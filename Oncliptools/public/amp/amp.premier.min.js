Array.prototype.indexOf||(Array.prototype.indexOf=function(c,a){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var b=this.length>>>0;a=+a||0;Infinity===Math.abs(a)&&(a=0);0>a&&(a+=b,0>a&&(a=0));for(;a<b;a++)if(this[a]===c)return a;return-1});
Date.now||(Date.now=function(){return +new Date});
if(!Function.prototype.bind){Function.prototype.bind=function(e){function s(){}if(typeof this!=="function"){throw new TypeError("Bind must be called on a function")}var t=[].slice,n=t.call(arguments,1),r=this,i=function(){return r.apply(this instanceof s?this:e||{},n.concat(t.call(arguments)))};s.prototype=r.prototype;i.prototype=new s;return i}}
if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();



(function(){function Hf(){var a,b,c,e=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var e;b=c;a();for(e in b)c=b[e],window[e]=c;return b};this.saveSDK=function(a,b){var e,d;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(e in b)if(d=b[e],(null!=d?d.VERSION:void 0)===a){b.main=d;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,d;if(null!=(c=window.com)&&null!=(d=c.akamai)&&d.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==e[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);e.saveSDK(c.VERSION,a);break}};a()}var zf;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new Hf);if(null==window.AKAMAI_MEDIA_PLAYER["AMP Premier v2.0.0052"]){zf=
window.AKAMAI_MEDIA_PLAYER["AMP Premier v2.0.0052"]={};var If=function(a){return{}.hasOwnProperty(a)},f=function(a,b){function c(){this.constructor=a}for(var e in b)If.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},Nc=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},Jf=function(a,b){return function(){return a.apply(b,arguments)}},d;d={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",
CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languageChange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",UPDATE_DATA_BINDINGS:"updatedatabindings",
CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",CHANGE_PLAYBACK_CORE:"changePlaybackCore",UPDATE_PLAYBACK_CORE:"updatePlaybackCore",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",
REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",DISABLE_VIDEO_EVENTS:"disableVideoEvents",ENABLE_VIDEO_EVENTS:"enableVideoEvents",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",
LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",
FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange"};var E=function(a,b){E.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now());this.logger=T;this.config=a;this.moduleMap={};this.viewComponent=b;this.initialize();this.moduleAPI=this.createAPI()};f(E,puremvc.Facade);E.prototype.logger=null;E.prototype.config=null;E.prototype.moduleName=null;E.prototype.moduleMap=null;E.prototype.viewComponent=null;E.prototype.moduleAPI=null;E.prototype.initialize=function(){this.createModel();
this.createController();this.createView()};E.prototype.createModel=function(){this.registerProxy(new y(this.config))};E.prototype.createView=function(){};E.prototype.createController=function(){};E.prototype.createAPI=function(){return new Za(this)};E.prototype.getModuleName=function(){return this.moduleName};E.prototype.getConfig=function(){return this.config};E.prototype.hasModule=function(a){return null!=this.moduleMap[a]};E.prototype.getModules=function(){var a,b,c,e;b={};e=this.moduleMap;for(a in e)c=
e[a],b[a]=c.module;return b};E.prototype.registerModule=function(a){var b,c,e;e=a.getModuleName();null!=a&&null==this.moduleMap[e]&&(b=new mb(a),this.moduleMap[e]=b,this.registerMediator(b),b=this.getAPI(),c=a.getAPI(),null!=b&&null!=c&&(b[e]=c),a.onRegister())};E.prototype.retrieveModule=function(a){return this.moduleMap[a].module};E.prototype.removeModule=function(a){var b,c;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),c=this.getAPI(),null!=(null!=c?c[a]:
void 0)&&delete c[a],b.module.onRemove(),b.module};E.prototype.getAPI=function(){return this.moduleAPI};E.prototype.listNotificationInterests=function(){return[]};E.prototype.listNotificationPublications=function(){return[]};E.prototype.listNotificationEvents=function(){return[]};E.prototype.getViewComponent=function(){return this.viewComponent};E.prototype.setViewComponent=function(a){return this.viewComponent=a};E.prototype.onRegister=function(){};E.prototype.onRemove=function(){};E.prototype.destroy=
function(){var a;null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");puremvc.Facade.removeCore(this.multitonKey);for(a in this)this[a]=null,delete this[a]};var Za=function(a){Za.attachModuleDispatcher(a,new ta(this))};Za.attachModuleDispatcher=function(a,b){var c,e;a.registerMediator(b);e=b.dispatcher;c=b.api;c.addEventListener=e.addEventListener.bind(e);c.removeEventListener=e.removeEventListener.bind(e);c.dispatchEvent=e.dispatchEvent.bind(e);!0===a.logger.enabled&&
(c.getModule=function(){return a})};Za.prototype.addEventListener=function(a,b,c){};Za.prototype.dispatchEvent=function(a){};Za.prototype.removeEventListener=function(a,b,c){};var y=function(a){this.config=a;y.__super__.constructor.call(this)};f(y,puremvc.Proxy);y.NAME="ModuleProxy";y.prototype.defaults=null;y.prototype.config=null;y.prototype.initializeNotifier=function(a){y.__super__.initializeNotifier.call(this,a);this.createData()};y.prototype.createData=function(){null!=this.config&&this.setData(this.config)};
y.prototype.getData=function(){return this.data};y.prototype.setData=function(a){var b,c,e,l;e={};l=this.defaults;for(c in l)b=l[c],b=c in a?a[c]:b,e[c]=b;this.data=e;return a};var Af=function(a){var b;a.className=Oc.PREFIX+"player";b=document.createElement("div");b.className=Oc.PREFIX+"install-flash";a.appendChild(b);a=document.createElement("p");a.innerHTML="To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.";b.appendChild(a);a=document.createElement("a");a.href=
"http://www.adobe.com/go/getflashplayer";b.appendChild(a);b=document.createElement("img");b.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";b.alt="Get Adobe Flash player";a.appendChild(b)};Af.prototype.getModules=function(){return[]};Af.prototype.getAPI=function(){return{}};var Md=function(){Md.__super__.constructor.call(this)};f(Md,puremvc.SimpleCommand);Md.prototype.execute=function(a){a=this.facade.retrieveProxy(B.NAME).getActiveState()===$a.ACTIVE?$a.INACTIVE:$a.ACTIVE;
this.sendNotification(d.CHANGE_ACTIVE_STATE,a)};var Nd=function(){Nd.__super__.constructor.call(this)};f(Nd,puremvc.SimpleCommand);Nd.prototype.execute=function(a){a=this.facade.retrieveProxy(B.NAME).getDisplayState()===ua.FULL_SCREEN?ua.NORMAL:ua.FULL_SCREEN;this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};var Rb=function(){Rb.__super__.constructor.call(this)};f(Rb,puremvc.SimpleCommand);Rb.interval=null;Rb.prototype.execute=function(a){var b,c,e,l=this;e=a.getBody();b=this.facade.retrieveProxy(r.NAME).getCore();
null!=b&&b.webkitSupportsFullscreen&&(a=this.facade.retrieveProxy(B.NAME),a.setDisplayState(e),c={},null!=b.webkitRequestFullScreen?(c.enter=function(){return b.webkitRequestFullScreen()},c.exit=function(){return document.webkitCancelFullScreen()},c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement"):null!=b.requestFullscreen?(c.enter=function(){return b.requestFullscreen()},c.exit=function(){return document.cancelFullscreen()},c.event="onfullscreenchange",c.element="fullscreenElement"):
null!=b.mozRequestFullScreen?(c.enter=function(){return b.mozRequestFullscreen()},c.exit=function(){return document.mozCancelFullScreen()},c.event="onmozfullscreenchange",c.element="mozFullscreenElement"):null!=b.webkitEnterFullscreen&&(c.enter=function(){return b.webkitEnterFullscreen()},c.exit=function(){return b.webkitExitFullscreen()},c.event=null),e===ua.FULL_SCREEN?(c.enter(),null!=c.event?b[c.event]=function(a){if(null==document[c.element])return l.sendNotification(d.CHANGE_DISPLAY_STATE,ua.NORMAL)}:
(clearInterval(Rb.interval),Rb.interval=setInterval(function(){if(!0!==b.webkitDisplayingFullscreen)return l.sendNotification(d.CHANGE_DISPLAY_STATE,ua.NORMAL),clearInterval(Rb.interval)},100))):e===ua.NORMAL&&(c.exit(),b[c.event]=null,clearInterval(Rb.interval)),this.sendNotification(d.DISPATCH_EVENT,new N("fullscreenchange",e===ua.FULL_SCREEN)))};var Od=function(){Od.__super__.constructor.call(this)};f(Od,puremvc.SimpleCommand);Od.prototype.execute=function(a){var b,c,e,l=this;this.facade.logger.debug("ChangePlaybackCoreCommand");
e=this.facade.retrieveProxy(r.NAME);c=this.facade.retrieveProxy(p.NAME);b=a.getBody();a=this.facade.getVideo();this.facade.setVideo(b);null!=a&&k.clear(a);a=[];a.push(k.create(b,"timeupdate",function(a){return l.sendNotification(d.TIME_UPDATE,a.target.currentTime)}));a.push(k.create(b,"durationchange",function(a){l.facade.logger.debug("Playback core: durationchange: "+a.target.duration);/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||l.sendNotification(d.CHANGE_DURATION,
a.target.duration)}));a.push(k.create(b,"playing",function(a){l.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PLAYING);l.sendNotification(d.PLAYING)}));a.push(k.create(b,"play",function(a){}));a.push(k.create(b,"pause",function(a){0<a.target.readyState&&l.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PAUSED)}));a.push(k.create(b,d.LOADED_DATA,function(a){l.sendNotification(d.LOADED_DATA)}));a.push(k.create(b,"waiting",function(a){l.sendNotification(d.WAITING)}));a.push(k.create(b,"seeking",function(a){l.sendNotification(d.SEEKING)}));
a.push(k.create(b,"seeked",function(a){l.sendNotification(d.SEEKED)}));a.push(k.create(b,"ended",function(a){l.sendNotification(d.ENDED)}));a.push(k.create(b,"progress",function(a){var b,c;try{c=a.target,b=c.buffered,l.sendNotification(d.PROGRESS,b.end(b.length-1)/c.duration)}catch(e){}}));a.push(k.create(b,"error",function(a){l.sendNotification(d.ERROR,a.target.error)}));a.push(k.create(b,d.LOAD_START,function(a){l.sendNotification(d.LOAD_START)}));a.push(k.create(b,"canplay",function(a){l.sendNotification(d.CAN_PLAY)}));
a.push(k.create(b,"canplaythrough",function(a){l.sendNotification(d.CAN_PLAY_THROUGH);l.sendNotification(d.PROGRESS,c.getDuration())}));a.push(k.create(b,"loadedmetadata",function(a){l.sendNotification(d.ENABLE_FULL_SCREEN);l.sendNotification(d.LOADED_METADATA);/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||l.sendNotification(d.CHANGE_DURATION,b.duration)}));this.sendNotification(d.DISABLE_FULL_SCREEN);e.setVideo(b);e.setHandlers(a)};var Pd=function(){Pd.__super__.constructor.call(this)};
f(Pd,puremvc.SimpleCommand);Pd.prototype.execute=function(a){this.facade.retrieveProxy(D.NAME).setAutoplay(a.getBody())};var Qd=function(){Qd.__super__.constructor.call(this)};f(Qd,puremvc.SimpleCommand);Qd.prototype.execute=function(a){this.facade.retrieveProxy(D.NAME).setLoop(a.getBody())};var Rd=function(){Rd.__super__.constructor.call(this)};f(Rd,puremvc.SimpleCommand);Rd.prototype.execute=function(a){this.facade.retrieveProxy(r.NAME).setVolume(a.getBody())};var Pc=function(){Pc.__super__.constructor.call(this)};
f(Pc,puremvc.SimpleCommand);Pc.prototype.execute=function(a){var b,c,e,l;e=a.getBody();c=this.facade.retrieveProxy(r.NAME);a=this.facade.retrieveProxy(p.NAME);0===e&&a.getType()===h.mimeTypes.m3u8&&(e=0.25);l=this.facade.getVideo();0===l.readyState?(b=function(a){l.removeEventListener("loadedmetadata",b,!1);return c.setCurrentTime(e)},l.addEventListener("loadedmetadata",b,!1)):c.setCurrentTime(e);this.sendNotification(d.CHANGE_PLAY_STATE,PlayState.WAITING)};var Sd=function(){Sd.__super__.constructor.call(this)};
f(Sd,puremvc.SimpleCommand);Sd.prototype.execute=function(a){this.facade.retrieveProxy(B.NAME).setSeeking(!0)};var gd=function(){gd.__super__.constructor.call(this)};f(gd,puremvc.SimpleCommand);gd.prototype.execute=function(a){this.facade.retrieveProxy(r.NAME).getSrc();this.facade.retrieveProxy(B.NAME).setSeeking(!1)};var Td=function(){Td.__super__.constructor.call(this)};f(Td,puremvc.SimpleCommand);Td.prototype.execute=function(a){this.facade.retrieveProxy(r.NAME).setCurrentTime(0.25);this.sendNotification(d.PLAY)};
var Ud=function(){Ud.__super__.constructor.call(this)};f(Ud,puremvc.SimpleCommand);Ud.prototype.execute=function(a){this.facade.logger.debug("EndCommand",a);a.getBody();a=this.facade.retrieveProxy(r.NAME);a.pause();if(a.getCurrentTime()!==a.getDuration())return a.setCurrentTime(a.getDuration())};var Vd=function(){Vd.__super__.constructor.call(this)};f(Vd,puremvc.SimpleCommand);Vd.prototype.execute=function(a){this.facade.logger.debug("StartedCommand");this.facade.retrieveProxy(r.NAME).setStarted(!0)};
var Wd=function(){Wd.__super__.constructor.call(this)};f(Wd,puremvc.SimpleCommand);Wd.prototype.execute=function(a){this.facade.logger.debug("WaitingCommand");this.facade.retrieveProxy(B.NAME).getPlayState()!==PlayState.LOADING&&this.sendNotification(d.CHANGE_PLAY_STATE,PlayState.WAITING)};var Xd=function(){Xd.__super__.constructor.call(this)};f(Xd,puremvc.SimpleCommand);Xd.prototype.execute=function(a){this.facade.retrieveProxy(r.NAME).setMuted(a.getBody())};var Yd=function(){Yd.__super__.constructor.call(this)};
f(Yd,puremvc.SimpleCommand);Yd.prototype.execute=function(a){var b;this.facade.logger.debug("CheckAuthorizationCommand");b=this.facade.retrieveProxy(aa.NAME);a=a.getBody();b.setMedia(a);!1===b.getAuthorized()?this.sendNotification(Y.AUTHORIZE,a):this.sendNotification(d.MEDIA_CHANGE,a)};var Zd=function(){Zd.__super__.constructor.call(this)};f(Zd,puremvc.SimpleCommand);Zd.prototype.execute=function(a){var b;this.facade.logger.debug("AuthorizedCommand");a=this.facade.retrieveProxy(p.NAME);a.authorized=
!0;b=this.facade.retrieveProxy(aa.NAME).createURL(a.getSrc());a.setSrc(b);this.sendNotification(d.MEDIA_CHANGE,a.getData())};var $d=function(){$d.__super__.constructor.call(this)};f($d,puremvc.SimpleCommand);$d.prototype.execute=function(a){this.facade.logger.debug("InitializedCommand");this.facade.retrieveProxy(r.NAME).initialized=!0};var ae=function(){ae.__super__.constructor.call(this)};f(ae,puremvc.SimpleCommand);ae.prototype.execute=function(a){var b,c,e,l,d;this.facade.logger.debug("DisableVideoEventsCommand",
a.getBody());a=a.getBody();c=this.facade.retrieveProxy(r.NAME).getHandlers();e=0;for(l=c.length;e<l;e++)b=c[e],(d=b.type,0<=Nc.call(a,d))&&b.unbind()};var be=function(){be.__super__.constructor.call(this)};f(be,puremvc.SimpleCommand);be.prototype.execute=function(a){var b,c,e,l,d;this.facade.logger.debug("EnableVideoEventsCommand",a.getBody());a=a.getBody();c=this.facade.retrieveProxy(r.NAME).getHandlers();e=0;for(l=c.length;e<l;e++)b=c[e],(d=b.type,0<=Nc.call(a,d))&&b.bind()};var ce=function(){ce.__super__.constructor.call(this)};
f(ce,puremvc.SimpleCommand);ce.prototype.execute=function(a){this.facade.logger.debug("RegisterPlaybackCoreCommand");this.facade.retrieveProxy(ba.NAME).registerPlaybackCore(a.getBody())};var de=function(){de.__super__.constructor.call(this)};f(de,puremvc.SimpleCommand);de.prototype.execute=function(a){this.facade.logger.debug("PlaybackTargetChangeCommand");a="amp"===a.getBody().target?d.REMOVE_APPLICATION_STATE:d.ADD_APPLICATION_STATE;this.sendNotification(a,"remote-playback")};var Sb=function(a,
b){this.cssPrefix=Oc.PREFIX;Sb.__super__.constructor.call(this,a,b)};f(Sb,puremvc.Mediator);Sb.prototype.config=null;Sb.prototype.cssPrefix=null;Sb.prototype.initializeNotifier=function(a){Sb.__super__.initializeNotifier.call(this,a);this.config=(this.facade.app||this.facade).retrieveProxy(y.NAME);this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(a,c){var e,l;null==c&&(c=this.element);e=this.prefix+a;return null!=(null!=(l=c.classList)?l.contains:void 0)?c.classList.contains(e):
-1!==c.className.indexOf(e)},add:function(a,c){var e,l;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(l=c.classList)?l.add:void 0)?c.classList.add(e):this.contains(a,c)||(c.className=""!==c.className?c.className+(" "+e):e)},remove:function(a,c){var e,l;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(l=c.classList)?l.remove:void 0)?c.classList.remove(e):this.contains(a,c)&&(e=RegExp(" ?"+e),c.className=c.className.replace(e,""))},toggle:function(a,c){var e;null==c&&(c=this.element);
return null!=(null!=(e=c.classList)?e.toggle:void 0)?c.classList.toggle(this.prefix+a):this.contains(a,c)?this.remome(a,c):this.add(a,c)}}};var Aa=function(a,b){Aa.__super__.constructor.call(this,a,b)};f(Aa,Sb);Aa.NAME="LocalizedMediator";Aa.prototype.localizationManager=null;Aa.prototype.initializeNotifier=function(a){Aa.__super__.initializeNotifier.call(this,a);this.localizationManager=(this.facade.app||this.facade).retrieveProxy(ca.NAME)};var da=function(a,b){null==b&&(b="div");"string"===typeof b&&
(b=document.createElement(b));da.__super__.constructor.call(this,a,b)};f(da,Aa);da.NAME="OverlayMediator";da.prototype.onRegister=function(){da.__super__.onRegister.call(this);this.sendNotification(d.ADD_OVERLAY,this.viewComponent)};var Tb=function(a){Tb.__super__.constructor.call(this,Tb.NAME,a)};f(Tb,da);Tb.NAME="EndSlateMediator";Tb.prototype.onRegister=function(){null!=this.config.getEndSlate()&&(this.classList.add("end-slate"),Tb.__super__.onRegister.call(this))};Tb.prototype.listNotificationInterests=
function(){return[d.MEDIA_CHANGE]};Tb.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.MEDIA_CHANGE:b=a.getBody(),a=this.config.getEndSlate(),this.viewComponent.innerHTML="",null!=a&&(a=!0===a.usePoster?b.poster:a.url,null!=a&&""!==a&&(this.viewComponent.innerHTML='\x3cimg src\x3d"'+a+'" class\x3d"end-slate-image" /\x3e'))}};var jc=function(a){jc.__super__.constructor.call(this,jc.NAME,a)};f(jc,da);jc.NAME="WaitingOverlayMediator";jc.prototype.bar=null;jc.prototype.onRegister=
function(){var a;this.classList.add("waiting-overlay");this.bar=document.createElement("div");this.classList.add("waiting-bar",this.bar);this.viewComponent.appendChild(this.bar);a=document.createElement("div");this.classList.add("waiting-text",a);a.textContent=this.localizationManager.getString(w.MSG_BUFFERING);this.viewComponent.appendChild(a);jc.__super__.onRegister.call(this)};var Dc=function(a){Dc.__super__.constructor.call(this,Dc.NAME,a)};f(Dc,da);Dc.NAME="LoadingOverlayMediator";Dc.prototype.onRegister=
function(){this.classList.add("loading-overlay");return Dc.__super__.onRegister.call(this)};var w=function(){};w.MSG_LIVE="MSG_LIVE";w.MSG_REPLAY="MSG_REPLAY";w.MSG_BUFFERING="MSG_BUFFERING_TEXT";w.MSG_CC="MSG_CC";w.MSG_CC_TITLE="MSG_CC_TITLE";w.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";w.MSG_CC_PRESETS="MSG_CC_PRESETS";w.MSG_CC_FONT="MSG_CC_FONT";w.MSG_CC_EDGE="MSG_CC_EDGE";w.MSG_CC_SIZE="MSG_CC_SIZE";w.MSG_CC_SCROLL="MSG_CC_SCROLL";w.MSG_CC_COLOR="MSG_CC_COLOR";w.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";w.MSG_CC_EDGE=
"MSG_CC_EDGE";w.MSG_CC_WINDOW="MSG_CC_WINDOW";w.MSG_CC_OPACITY="MSG_CC_OPACITY";w.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";w.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";w.MSG_CC_RESET="MSG_CC_RESET";w.MSG_CC_CANCEL="MSG_CC_CANCEL";w.MSG_CC_APPLY="MSG_CC_APPLY";w.MSG_SECONDS="MSG_SECONDS";var Cb=function(a){Cb.__super__.constructor.call(this,Cb.NAME,a)};f(Cb,da);Cb.NAME="ReplayOverlayMediator";Cb.prototype.replay=null;Cb.prototype.icon=null;Cb.prototype.label=null;Cb.prototype.onRegister=function(){var a=
this;this.classList.add("replay-overlay");this.replay=document.createElement("div");this.classList.add("replay-button",this.replay);this.viewComponent.appendChild(this.replay);k.create(this.replay,k.CLICK,function(b){b.stopImmediatePropagation();a.sendNotification(d.REPLAY);return!1});this.icon=document.createElement("span");this.classList.add("replay-icon",this.icon);this.replay.appendChild(this.icon);this.label=document.createElement("span");this.classList.add("replay-label",this.label);this.label.textContent=
this.localizationManager.getString(w.MSG_REPLAY);this.replay.appendChild(this.label);Cb.__super__.onRegister.call(this)};var ee=function(){ee.__super__.constructor.call(this)};f(ee,puremvc.SimpleCommand);ee.prototype.execute=function(a){a="persistent"!==this.facade.retrieveProxy(D.NAME).getControls().mode?a.getBody():$a.ACTIVE;this.facade.retrieveProxy(B.NAME).setActiveState(a)};var U=function(a){U.__super__.constructor.call(this,a)};f(U,y);U.NAME=y.NAME;U.prototype.bindings=null;U.prototype.configurationName=
null;U.prototype.configurationData=null;U.prototype.contextName=null;U.prototype.contextData=null;U.prototype.value=null;U.prototype.getConfigurationName=function(){return this.configurationName};U.prototype.getConfigurationData=function(){return this.configurationData.value||{}};U.prototype.getContextName=function(){return this.contextName};U.prototype.getContextData=function(){return this.contextData};U.prototype.onRegister=function(){var a;a=this.facade.app||this.facade;null==this.configurationName&&
(this.configurationName=this.facade.moduleName);this.bindings=a.retrieveProxy(R.NAME);this.bindings.registerConfiguration(this)};U.prototype.setData=function(a){var b,c,e;this.data={};e=this.defaults;for(b in e)c=e[b],this.data[b]=b in a?a[b]:c;this.configurationData=new kc(this.data);return this.data};U.prototype.getValue=function(a){var b;this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};U.prototype.compile=
function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;null==a&&(a=this.bindings.getData());null!=this.contextName&&null!=this.contextData&&(a=h.clone(a),a[this.contextName]=this.contextData);this.configurationData.compile(a,b);return this.value=this.configurationData.value};var q={BREAK_START:"adbreakstart",BREAK_END:"adbreakend",AD_CONTAINER_CREATED:"adcontainercreated",AD_LOADED:"adloaded",AD_STARTED:"adstarted",AD_TIME_UPDATE:"adtimeupdate",AD_TIME_REMAINING:"adtimeremaining",
AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adended",AD_ERROR:"aderror",AD_PLAY:"adplay",AD_PAUSE:"adpause",AD_COMPANION:"adcompanion"},Ba=function(){Ba.__super__.constructor.call(this)};f(Ba,puremvc.SimpleCommand);Ba.prototype.ads=null;Ba.prototype.initializeNotifier=function(a){Ba.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(y.NAME)};var fe=function(){fe.__super__.constructor.call(this)};f(fe,Ba);fe.prototype.execute=function(a){this.facade.logger.debug("AdContentEndedCommand");
this.ads.contentEnded()};var Ub=function(){Ub.__super__.constructor.call(this)};f(Ub,puremvc.MacroCommand);Ub.prototype.ads=null;Ub.prototype.initializeNotifier=function(a){Ub.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(x.NAME)};Ub.prototype.initializeMacroCommand=function(){this.addSubCommand(Qc)};Ub.prototype.execute=function(a){Ub.__super__.execute.call(this,a);this.facade.logger.debug("AdStartCommand");a=this.facade.app.retrieveProxy(r.NAME).initialized;!1===a&&
this.facade.app.sendNotification(d.INITIALIZED);!1!==a&&this.facade.isFullscreenDevice()||this.facade.app.video.load();this.ads.start();this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PLAYING)};var hd=function(){hd.__super__.constructor.call(this)};f(hd,Ba);hd.prototype.execute=function(a){this.facade.logger.debug("AdPlayCommand");!1===this.ads.getStarted()?this.sendNotification(d.START,!0):(this.ads.play(),this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PLAYING))};var id=
function(){id.__super__.constructor.call(this)};f(id,Ba);id.prototype.execute=function(a){this.facade.logger.debug("AdPauseCommand");this.ads.pause();this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PAUSED)};var jd=function(){jd.__super__.constructor.call(this)};f(jd,Ba);jd.prototype.execute=function(a){this.facade.logger.debug("AdTogglePlayPauseCommand");a=this.ads.getPaused()||!1===this.ads.getStarted()?d.PLAY:d.PAUSE;this.sendNotification(a,!0)};var kd=function(){kd.__super__.constructor.call(this)};
f(kd,puremvc.SimpleCommand);kd.prototype.execute=function(a){this.facade.logger.debug("EndedCommand",a);!0===this.facade.retrieveProxy(D.NAME).getLoop()?this.sendNotification(d.REPLAY):(this.sendNotification(d.CHANGE_PLAY_STATE,PlayState.ENDED),this.sendNotification(d.CHANGE_ACTIVE_STATE,$a.ACTIVE))};var ld=function(){ld.__super__.constructor.call(this)};f(ld,puremvc.SimpleCommand);ld.prototype.execute=function(a){var b,c;this.facade.logger.debug("StartCommand");c=this.facade.retrieveProxy(r.NAME);
b=this.facade.retrieveProxy(p.NAME);encodeURI(b.getSrc())!==c.getSrc()&&this.sendNotification(d.UPDATE_PLAYBACK_CORE);this.sendNotification(d.STARTED,a.getBody());this.sendNotification(d.PLAY,a.getBody());this.sendNotification(d.CHANGE_ACTIVE_STATE,$a.INACTIVE)};var lc=function(){lc.__super__.constructor.call(this)};f(lc,puremvc.MacroCommand);lc.prototype.initializeMacroCommand=function(){this.addSubCommand(Qc)};lc.prototype.execute=function(a){var b,c;this.facade.logger.debug("PlayCommand");lc.__super__.execute.call(this,
a);c=a.getBody();a=this.facade.retrieveProxy(p.NAME);b=this.facade.retrieveProxy(r.NAME);c&&!0!==b.initialized&&this.sendNotification(d.INITIALIZED);!0===b.initialized&&(a.getSrc()||a.getSource())&&(b.getStarted()?b.play():this.sendNotification(d.START))};var Rc=function(){Rc.__super__.constructor.call(this)};f(Rc,puremvc.SimpleCommand);Rc.prototype.execute=function(a){this.facade.retrieveProxy(r.NAME).pause();this.sendNotification(d.CHANGE_ACTIVE_STATE,$a.ACTIVE)};var mc=function(){mc.__super__.constructor.call(this)};
f(mc,puremvc.SimpleCommand);mc.prototype.execute=function(a){var b,c;this.facade.logger.debug("TogglePlayPauseCommand");a=this.facade.retrieveProxy(B.NAME);c=this.facade.retrieveProxy(r.NAME);switch(a.getPlayState()){case PlayState.ENDED:b=d.REPLAY;break;case PlayState.PAUSED:b=c.getStarted()?d.PLAY:d.START;break;case PlayState.READY:b=d.START;break;case PlayState.PLAYING:case PlayState.WAITING:b=d.PAUSE}this.sendNotification(b,!0)};var ge=function(){ge.__super__.constructor.call(this)};f(ge,Ba);
ge.prototype.execute=function(a){this.facade.logger.debug("AdContentStartedCommand");this.ads.contentStarted()};var K=function(a){K.__super__.constructor.call(this,a)};f(K,U);K.NAME=y.NAME;K.prototype.enabled=!0;K.prototype.loaded=!1;K.prototype.plugin=null;K.prototype.load=function(a){var b,c=this;b=this.getScript();null!=b?h.loadAMPScript(b,function(){c.loaded=!0;"function"===typeof a&&a(!0)}):(this.loaded=!1,"function"===typeof a&&a(!1))};K.prototype.getLoaded=function(){return this.loaded};K.prototype.getScript=
function(){var a;a=this.getConfigurationData().plugin;return null!=a?a.js||a:""};K.prototype.setEnabled=function(a){return this.enabled=a};K.prototype.getEnabled=function(){return this.enabled};K.prototype.createPlugin=function(){};K.prototype.initialize=function(){this.plugin=this.createPlugin()};K.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var x=function(a){x.__super__.constructor.call(this,a)};f(x,K);x.NAME=K.NAME;x.prototype.inprogress=
!1;x.prototype.paused=!1;x.prototype.started=!1;x.prototype.companions=null;x.prototype.loadedMetadata=!1;x.prototype.adVO=null;x.prototype.contextName="ad";x.prototype.getContextData=function(){return this.adVO||{}};x.prototype.setLoadedMetadata=function(a){return this.loadedMetadata=a};x.prototype.getLoadedMetadata=function(){return this.loadedmetadata};x.prototype.setCompanions=function(a){this.companions=a;this.sendNotification(q.AD_COMPANION,this);return a};x.prototype.getCompanions=function(){return this.companions};
x.prototype.getInProgress=function(){return this.inprogress};x.prototype.setInProgress=function(a){return this.inprogress=a};x.prototype.getStarted=function(){return this.started};x.prototype.setStarted=function(a){return this.started=a};x.prototype.getPaused=function(){return this.paused};x.prototype.setPaused=function(a){return this.paused=a};x.prototype.play=function(){this.setPaused(!1);this.sendNotification(q.AD_PLAY)};x.prototype.pause=function(){this.setPaused(!0);this.sendNotification(q.AD_PAUSE)};
x.prototype.breakStart=function(){};x.prototype.breakEnd=function(){this.setInProgress(!1);this.reset()};x.prototype.error=function(a){var b;b=("function"===typeof a.getMessage?a.getMessage():void 0)||a.message;this.facade.logger.error("[AMP AD ERROR]",""+b+" Skipping ad content.",a);this.sendNotification(q.AD_ERROR,a);this.sendNotification(q.BREAK_END)};x.prototype.engage=function(a){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,
"ad-mode")),this.facade.app.removeCommand(d.START),this.facade.app.removeCommand(d.PLAY),this.facade.app.removeCommand(d.PAUSE),this.facade.app.removeCommand(d.ENDED),this.facade.app.removeCommand(d.TOGGLE_PLAY_PAUSE),this.facade.app.removeCommand(C.PLAY),this.facade.app.removeCommand(C.PAUSE),this.facade.app.removeCommand(C.TOGGLE_PLAY_PAUSE),this.facade.isFullscreenDevice()&&this.facade.app.removeCommand(d.CHANGE_DURATION),this.facade.removeCommand(d.STARTED),this.facade.removeCommand(d.ENDED),
this.facade.registerCommand(d.START,Ub),this.facade.registerCommand(d.PLAY,hd),this.facade.registerCommand(d.PAUSE,id),this.facade.registerCommand(d.TOGGLE_PLAY_PAUSE,jd),this.facade.registerCommand(C.PLAY,hd),this.facade.registerCommand(C.PAUSE,id),this.facade.registerCommand(C.TOGGLE_PLAY_PAUSE,jd))};x.prototype.reset=function(){this.facade.removeCommand(d.START);this.facade.removeCommand(d.PLAY);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(d.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(C.PLAY);
this.facade.removeCommand(C.PAUSE);this.facade.removeCommand(C.TOGGLE_PLAY_PAUSE);this.facade.app.registerCommand(d.START,ld);this.facade.app.registerCommand(d.PLAY,lc);this.facade.app.registerCommand(d.PAUSE,Rc);this.facade.app.registerCommand(d.ENDED,kd);this.facade.app.registerCommand(d.TOGGLE_PLAY_PAUSE,mc);this.facade.app.registerCommand(C.PLAY,lc);this.facade.app.registerCommand(C.PAUSE,Rc);this.facade.app.registerCommand(C.TOGGLE_PLAY_PAUSE,mc);this.facade.isFullscreenDevice()&&this.facade.app.registerCommand(d.CHANGE_DURATION,
md);this.facade.registerCommand(d.STARTED,ge);this.facade.registerCommand(d.ENDED,fe)};x.prototype.start=function(){if(!1===this.getEnabled())return this.sendNotification(q.BREAK_END),!1;this.setStarted(!0);return!0};x.prototype.contentPlay=function(){this.facade.app.sendNotification(d.PLAY,!0)};x.prototype.contentPause=function(){this.facade.app.video.pause()};x.prototype.contentStarted=function(){};x.prototype.contentEnded=function(){};var z=function(a,b){Za.attachModuleDispatcher(a,new nc(this,
b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()}};f(z,Za);z.prototype.getContainer=function(){};z.prototype.getVideo=function(){};z.prototype.getConfig=function(){};z.prototype.evaluateBinding=function(){};z.prototype.canPlayType=function(){};z.prototype.load=function(){};z.prototype.play=function(){};z.prototype.replay=function(){};z.prototype.pause=
function(){};z.prototype.end=function(){};z.prototype.setParams=function(a){};z.prototype.getParams=function(){};z.prototype.setAutoplay=function(a){};z.prototype.getAutoplay=function(){};z.prototype.setLoop=function(a){};z.prototype.getLoop=function(){};z.prototype.setMuted=function(a){};z.prototype.getMuted=function(){};z.prototype.mute=function(){return this.setMuted(!0)};z.prototype.unmute=function(){return this.setMuted(!1)};z.prototype.setMedia=function(a){};z.prototype.getMedia=function(){};
z.prototype.setCurrentTime=function(a){};z.prototype.getCurrentTime=function(){};z.prototype.getDuration=function(){};z.prototype.setSrc=function(a){};z.prototype.getSrc=function(){};z.prototype.setSource=function(a){};z.prototype.getSource=function(){};z.prototype.setVolume=function(a){};z.prototype.getVolume=function(){};z.prototype.getSeeking=function(){};z.prototype.getPaused=function(){};z.prototype.getEnded=function(){};z.prototype.enterFullScreen=function(){};z.prototype.exitFullScreen=function(){};
z.prototype.destroy=function(){};var Cf=function(a,b){var c,e,l,ga;Cf.__super__.constructor.call(this,a,b);l=a.retrieveProxy(p.NAME);c=a.retrieveProxy(R.NAME);e=a.retrieveProxy(D.NAME);ga=a.retrieveProxy(ab.NAME);this.evaluateBinding=c.evaluateBinding.bind(c);this.canPlayType=function(b){return a.retrieveProxy(r.NAME).canPlayType(b)};this.load=function(){a.sendNotification(d.LOAD)};this.play=function(){a.sendNotification(d.PLAY,!0)};this.replay=function(){a.sendNotification(d.REPLAY)};this.pause=
function(){a.sendNotification(d.PAUSE)};this.end=function(){a.sendNotification(d.END)};this.setParams=function(b){a.sendNotification(d.CHANGE_PARAMS,b);return b};this.getParams=ga.getData.bind(ga);this.setAutoplay=function(b){a.sendNotification(d.CHANGE_AUTOPLAY,b);return b};this.getAutoplay=e.getAutoplay.bind(e);this.setLoop=function(b){a.sendNotification(d.CHANGE_LOOP,b);return b};this.getLoop=e.getLoop.bind(e);this.setMuted=function(b){a.sendNotification(d.CHANGE_MUTED,b);return b};this.getMuted=
function(){return a.retrieveProxy(r.NAME).getMuted()};this.setMedia=function(b){a.sendNotification(d.SET_MEDIA,b);return b};this.getMedia=l.getData.bind(l);this.setCurrentTime=function(b){a.sendNotification(d.SEEK,b);return b};this.getCurrentTime=function(){return a.retrieveProxy(r.NAME).getCurrentTime()};this.getDuration=l.getDuration.bind(l);this.setSrc=function(b){a.sendNotification(d.SET_MEDIA,{src:b});return b};this.getSrc=function(){return a.retrieveProxy(r.NAME).getSrc()};this.setSource=function(b){a.sendNotification(d.SET_MEDIA,
{source:b});return b};this.getSource=l.getSource.bind(l);this.setVolume=function(b){a.sendNotification(d.CHANGE_VOLUME,b);return b};this.getVolume=function(){return a.retrieveProxy(r.NAME).getVolume()};this.getSeeking=function(){return a.retrieveProxy(r.NAME).getSeeking()};this.getPaused=function(){return a.retrieveProxy(r.NAME).getPaused()};this.getEnded=function(){return a.retrieveProxy(r.NAME).getEnded()};this.enterFullScreen=function(){a.sendNotification(d.CHANGE_DISPLAY_STATE,ua.FULL_SCREEN)};
this.exitFullScreen=function(){a.sendNotification(d.CHANGE_DISPLAY_STATE,ua.NORMAL)}};f(Cf,z);var ha=function(a,b,c){this.dispatcher=c;ha.__super__.constructor.call(this,a,b)};f(ha,E);ha.prototype.moduleName="amp";ha.prototype.playerType=null;ha.prototype.dispatcher=null;ha.prototype.config=null;ha.prototype.video=null;ha.prototype.getVideo=function(){return this.video};ha.prototype.setVideo=function(a){return this.video=a};ha.prototype.getPlayerType=function(){return this.playerType};ha.prototype.createPlugins=
function(){var a,b,c,e,l,d,g;l=[];d=this.getPlayerType();g=s.plugins;for(c in g)if(a=g[c],c in this.config&&(b=this.config[c],null!=b&&!1!==b.enabled))if(a=a[d],null==a)this.logger.debug("Plugin could not be found: "+c);else try{e=new a(this,b),l.push(e)}catch(f){this.logger.error("Plugin could not be created: "+c+". "+f)}this.sendNotification(oc.REGISTER_PLUGINS,l);return l};ha.prototype.createVideo=function(){return null};ha.prototype.initialize=function(){ha.__super__.initialize.call(this);this.video=
this.createVideo();this.createPlugins()};ha.prototype.listNotificationEvents=function(){return ha.__super__.listNotificationEvents.call(this).concat([d.LOAD_START,d.TIME_UPDATE,d.DURATION_CHANGE,d.ERROR,d.LOADED_METADATA,d.WAITING,d.SEEKING,d.SEEKED,d.ENDED,d.PROGRESS,d.CAN_PLAY,d.CAN_PLAY_THROUGH,d.PAUSE,d.PLAY,d.PLAYING,d.STARTED,d.PLAY_REQUEST,d.READY,d.MEDIUM_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.MEDIA_CHANGE,d.FULL_SCREEN_CHANGE,d.VOLUME_CHANGE,d.FAIL_OVER_ATTEMPT,d.PLAYBACK_TARGET_CHANGE,d.PLAY_STATE_CHANGE,
Y.AUTHORIZE,Y.AUTHORIZED])};var Vb=function(a,b,c){Vb.__super__.constructor.call(this,a,b,c)};f(Vb,ha);Vb.prototype.playerType="html";Vb.prototype.createAPI=function(){return new Cf(this,this.dispatcher)};Vb.prototype.createVideo=function(){var a;a=document.createElement("video");null==a.dataset&&(a.dataset={});this.sendNotification(d.CHANGE_PLAYBACK_CORE,a);return a};Vb.prototype.createModel=function(){var a,b;b=new R;this.registerProxy(b);this.registerProxy(new aa);this.registerProxy(new D(this.config));
this.registerProxy(new ca(this.config));a=new B;this.registerProxy(a);a.setRenderMode(Kf.HTML);a=new r;this.registerProxy(a);this.registerProxy(new p);this.registerProxy(new ba(a));this.registerProxy(new ab(this.config.params));b.initialize()};Vb.prototype.createView=function(){var a,b=this;a=this.getViewComponent();this.registerMediator(new ja(a,"html5"));this.registerMediator(new nb);this.registerMediator(new ob);this.registerMediator(new bb);a=new Db;this.registerMediator(a);k.create(a.viewComponent,
k.CLICK,function(){b.sendNotification(d.TOGGLE_ACTIVE)});this.registerMediator(new Dc);this.registerMediator(new jc);this.registerMediator(new Cb);this.registerMediator(new Tb);this.registerMediator(new cb);this.registerMediator(new pb)};Vb.prototype.createController=function(){this.registerCommand(d.TOGGLE_PLAY_PAUSE,mc);this.registerCommand(d.PLAY,lc);this.registerCommand(d.PAUSE,Rc);this.registerCommand(d.CHANGE_PLAY_STATE,nd);this.registerCommand(d.TOGGLE_FULL_SCREEN,Nd);this.registerCommand(d.CHANGE_DISPLAY_STATE,
Rb);this.registerCommand(d.TOGGLE_ACTIVE,Md);this.registerCommand(d.CHANGE_ACTIVE_STATE,ee);this.registerCommand(d.CHANGE_MEDIA,od);this.registerCommand(d.MEDIA_CHANGE,pd);this.registerCommand(d.SET_MEDIA,qd);this.registerCommand(d.UPDATE_DATA_BINDINGS,rd);this.registerCommand(d.CHANGE_PLAYBACK_CORE,Od);this.registerCommand(d.UPDATE_PLAYBACK_CORE,sd);this.registerCommand(d.START,ld);this.registerCommand(d.STARTED,Vd);this.registerCommand(d.SEEK,Pc);this.registerCommand(d.SEEKING,Sd);this.registerCommand(d.SEEKED,
gd);this.registerCommand(d.CHANGE_VOLUME,Rd);this.registerCommand(d.CHANGE_MUTED,Xd);this.registerCommand(d.CHANGE_AUTOPLAY,Pd);this.registerCommand(d.CHANGE_LOOP,Qd);this.registerCommand(d.END,Ud);this.registerCommand(d.ENDED,kd);this.registerCommand(d.REPLAY,Td);this.registerCommand(d.ERROR,td);this.registerCommand(d.READY,ud);this.registerCommand(d.WAITING,Wd);this.registerCommand(d.CHANGE_DURATION,md);this.registerCommand(d.CHANGE_PARAMS,vd);this.registerCommand(Y.CHECK_AUTHORIZATION,Yd);this.registerCommand(Y.AUTHORIZED,
Zd);this.registerCommand(Y.SET_KEY,wd);this.registerCommand(Y.SET_TOKEN,xd);this.registerCommand(d.INITIALIZED,$d);this.registerCommand(d.ENABLE_VIDEO_EVENTS,be);this.registerCommand(d.DISABLE_VIDEO_EVENTS,ae);this.registerCommand(d.REGISTER_PLAYBACK_CORE,ce);this.registerCommand(C.TOGGLE_PLAY_PAUSE,mc);this.registerCommand(C.SEEK,Pc);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,de)};var F=function(){};F.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):a.createTextNode(b)};
F.updateTextContent=function(a,b){var c;c=F.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);a.appendChild(c);return a};F.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(a)}catch(e){try{return a.xml}catch(l){}}}}};F.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,"text/xml")):(b=
new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var xd=function(){xd.__super__.constructor.call(this)};f(xd,puremvc.SimpleCommand);xd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(aa.NAME);a=a.getBody();b.setToken(a);b.setAuthorized(!0)};var wd=function(){wd.__super__.constructor.call(this)};f(wd,puremvc.SimpleCommand);wd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(aa.NAME);a=a.getBody();b.setKey(a)};var pc=function(a){this.config=a;pc.__super__.constructor.call(this,
this.constructor.NAME)};f(pc,puremvc.Mediator);pc.prototype.config=null;pc.NAME="LocalizationWrapper";pc.prototype.listNotificationInterests=function(){return[n.CREATE_FLASH_VARS,n.CREATE_XML]};pc.prototype.handleNotification=function(a){var b,c,e,l,d,g,f,Bf;pc.__super__.handleNotification.call(this,a);d=a.getName();a=a.getBody();switch(d){case n.CREATE_FLASH_VARS:e=a.flashvars;c=a.config;null!=c.language&&(e.locale_setting=c.language);break;case n.CREATE_XML:for(c in d=a.xml,b=d.getElementsByTagName("application")[0],
a=d.getElementsByTagName("locales")[0],null==a&&(a=d.createElement("locales"),b.appendChild(a)),Bf=this.config.locales,Bf)for(e in l=Bf[c],b=d.createElement("locale"),b.setAttribute("id",c),a.appendChild(b),l)f=l[e],g=d.createElement("property"),g.setAttribute("key",e),f=F.createTextContent(d,f),g.appendChild(f),b.appendChild(g)}};var ja=function(a,b){ja.__super__.constructor.call(this,this.constructor.NAME,a);this.layers=[];null!=b&&(this.type=b)};f(ja,Sb);ja.NAME="PlayerMediator";ja.prototype.core=
null;ja.prototype.medium=null;ja.prototype.layers=null;ja.prototype.type=null;ja.prototype.ready=!1;ja.prototype.classList=null;ja.prototype.onRegister=function(){var a;ja.__super__.onRegister.call(this);this.classList.add("player");this.classList.add(this.type);a=h.getDevice();if(null!=a)return this.classList.add(a)};ja.prototype.listNotificationInterests=function(){return[d.DISPLAY_STATE_CHANGE,d.ACTIVE_STATE_CHANGE,d.PLAY_STATE_CHANGE,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.MEDIUM_CHANGE,
d.DURATION_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.ADD_LAYER,d.REMOVE_LAYER,d.READY]};ja.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case d.ACTIVE_STATE_CHANGE:case d.PLAY_STATE_CHANGE:case d.DISPLAY_STATE_CHANGE:case d.MEDIUM_CHANGE:b=a.newState;a=a.oldState;null!=a&&this.classList.contains(a)&&this.classList.remove(a);null!=b&&this.classList.add(b);break;case d.ADD_APPLICATION_STATE:this.classList.add(a);break;case d.REMOVE_APPLICATION_STATE:this.classList.remove(a);
break;case d.TEMPORAL_TYPE_CHANGE:"live"===a?this.sendNotification(d.ADD_APPLICATION_STATE,"live"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"live");break;case d.DURATION_CHANGE:3600<a?this.sendNotification(d.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"long-form");break;case d.ADD_LAYER:this.addLayer(a);break;case d.REMOVE_LAYER:this.removeLayer(a);break;case d.READY:for(this.ready=!0,e=this.layers,b=0,c=e.length;b<c;b++)a=e[b],this.viewComponent.contains(a)||
this.viewComponent.appendChild(a)}};ja.prototype.addLayer=function(a){this.layers.push(a);this.ready&&this.viewComponent.appendChild(a)};ja.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var Ec=function(a){Ec.__super__.constructor.call(this,a,this.type)};f(Ec,ja);Ec.NAME="FlashPlayerMediator";Ec.prototype.type="flash";Ec.prototype.addLayer=function(a){Ec.__super__.addLayer.call(this,a);-1===
a.className.indexOf("video-layer")||this.viewComponent.contains(a)||this.viewComponent.appendChild(a)};var Wb=function(){Wb.__super__.constructor.call(this)};f(Wb,puremvc.SimpleCommand);Wb.prototype.getProxy=function(){return this.facade.retrieveProxy(A.NAME)};var he=function(){he.__super__.constructor.call(this)};f(he,Wb);he.prototype.execute=function(a){this.facade.logger.debug("AISPauseCommand");a=this.getProxy();a.vcsSet(a.currentTime)};var ie=function(){ie.__super__.constructor.call(this)};f(ie,
Wb);ie.prototype.execute=function(a){this.facade.logger.debug("AISEndedCommand");this.getProxy().vcsSet(0)};var je=function(){};je.setCookie=function(a,b,c,e,l){var d;b=escape(b);null!=c&&(d=new Date,d.setDate(d.getDate()+c),b+="; expires\x3d"+d.toUTCString());null!=l&&(b+="; domain\x3d"+l);null!=e&&(b+="; path\x3d"+e);return document.cookie=a+"\x3d"+b};je.getCookie=function(a){var b,c,e,l,d,g;c=document.cookie.split(";");d=0;for(g=c.length;d<g;d++)if(b=c[d],e=b.indexOf("\x3d"),l=b.substr(0,e).replace(/^\s+|\s+$/g,
""),b=unescape(b.substr(e+1)),l===a)return b};je.deleteCookie=function(a){return this.setCookie(a,"",-1)};var ke=function(){ke.__super__.constructor.call(this)};f(ke,Wb);ke.prototype.execute=function(a){var b;b=this.getProxy();a=Math.floor(a.getBody());0!==a&&0===a%30&&a!==b.currentTime&&b.vcsSet(a);b.currentTime=a};var A=function(a){A.__super__.constructor.call(this,a)};f(A,K);A.NAME=y.NAME;A.prototype.client=null;A.prototype.currentTime=null;A.prototype.idps=null;A.prototype.idp=null;A.prototype.token=
null;A.prototype.authz=null;A.prototype.defaults={plugin:null,platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}};A.prototype.getScript=function(){return this.value.plugin};A.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);this.client.setPlatformId(this.value.platformID);this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));
this.client.assignhandler("chooser",this.chooserHandler.bind(this));this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));this.client.assignhandler("vcs",this.vcsHandler.bind(this));window.onunload=function(){}};A.prototype.authorize=function(){this.token=this.authz=null;this.disengage();
this.sendNotification("startAuthentication")};A.prototype.authorized=function(a){null==a&&(a=this.token);this.engage();this.sendNotification("authenticationComplete");this.sendNotification(Y.AUTHORIZED,a)};A.prototype.play=function(a){this.sendNotification(d.INITIALIZED);this.sendNotification(d.PLAY);if(null!=a)return this.sendNotification(d.SEEK,a)};A.prototype.engage=function(){this.facade.registerCommand(d.TIME_UPDATE,ke);this.facade.registerCommand(d.PAUSE,he);this.facade.registerCommand(d.ENDED,
ie)};A.prototype.disengage=function(){this.facade.removeCommand(d.TIME_UPDATE);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(d.ENDED)};A.prototype.logout=function(){var a,b,c;a=(null!=(b=this.idp.window_display)?b.method:void 0)||"redirect";b=this.getTarget(a);this.setRedirect(a);switch(a){case "redirect":window.open(this.client.logoutFormat(b),"_top");break;case "popup":c=this.idp.window_display.width||320,a=this.idp.window_display.height||240,window.open(this.client.logoutFormat(b),
"ais_popup","width\x3d"+c+",height\x3d"+a)}};A.prototype.bounce=function(a){this.client.bounce()};A.prototype.init=function(a){this.client.init()};A.prototype.choose=function(){this.client.chooser()};A.prototype.resourceAccess=function(a){null==a&&(a=this.value.resourceID);this.client.resourceAccess(a)};A.prototype.vcsSet=function(a){a=h.formatTimecode(a);return this.client.vcsSet(this.value.contentID,a)};A.prototype.bounceHandler=function(a,b){var c;c="true"===b.authenticated.toString();!1===c?(this.sendNotification(d.DISPATCH_EVENT,
new N("authenticationfailed")),this.choose()):!0===c&&this.init()};A.prototype.initHandler=function(a,b){var c,e,l,ga;this.facade.logger.debug(a,b);this.idp=b.idps;this.facade.idps={};l=b.idps;for(c in l){l=l[c];this.facade.idps.key=c;for(e in l)ga=l[e],this.facade.idps[e]=ga;break}for(c in b)l=b[c],"idps"!==c&&null!=l&&(this.facade[c]=l);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key];this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating");
this.sendNotification("aisauthenticated",this.facade.idps);this.resourceAccess(this.value.resourceID)};A.prototype.chooserHandler=function(a,b){this.facade.logger.debug(a,b.authenticated);this.facade.sendNotification(d.ADD_APPLICATION_STATE,"authenticating");b.possible_idps=this.idps=this.sort(b.possible_idps,"value","display_name");this.sendNotification("chooseAuthProvider",b)};A.prototype.launchIDPLogin=function(a){var b,c,e;this.sendNotification("aisathenticating",!0);b=this.idps[a];c=(null!=(e=
b.window_display)?e.method:void 0)||"redirect";e=this.getTarget(c);this.setRedirect(c);switch(c){case "redirect":window.open(this.client.loginFormat(a,e),"_top");break;case "popup":c=b.window_display.width||320,b=b.window_display.height||240,window.open(this.client.loginFormat(a,e),"ais_popup","width\x3d"+c+",height\x3d"+b)}};A.prototype.identityHandler=function(a,b){this.facade.logger.debug(a,b)};A.prototype.authz_queryHandler=function(a,b){var c;this.facade.logger.debug(a,b);c="true"===b.authorization.toString();
!1===c?(this.sendNotification(Y.AUTHORIZATION_FAILED),this.authorize()):!0===c&&(this.authz=b,c={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.app.sendNotification("mediaanalytics:setDimensions",c),this.facade.viewerId=this.client.aisuid,c=b.resource,null!=c&&(this.facade.resource=c),this.token="hdnea\x3d"+b.security_token,this.sendNotification(Y.SET_KEY,"hdnea\x3d"),this.sendNotification(Y.SET_TOKEN,b.security_token),this.sendNotification("aisathenticating",
!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))};A.prototype.logoutHandler=function(a,b){top.location.href=top.location.href};A.prototype.vcsHandler=function(a,b){"get"===b.operation&&("00:00:00"===b.ph_pos||"00:00"===b.ph_pos?(this.client.vcsSet(this.value.contentID,b.ph_pos),this.authorized(this.token)):this.sendNotification("choosePlayOptions",h.flattenTimecode(b.ph_pos)))};A.prototype.sort=function(a,b,c){var e,l,d,g,f;g={};e=[];l=0;for(d in a)f=
a[d],e[l]={key:d,value:f[c]},l++;e.sort(function(a,c){var e,l;e="value"===b?a.value.toLowerCase():a.key.toLowercase();l="value"===b?c.value.toLowerCase():c.key.toLowercase();return e<l?-1:e>l?1:0});l=c=0;for(d=e.length;c<d;l=++c)l=e[l],g[l.key]=a[l.key];return g};A.prototype.setRedirect=function(a){var b,c,e;try{b=/\/dev\./,e=window.top.location.href||window.top.location,c=b.test(e)?e.replace(b,"/"):null,je.setCookie(this.getTarget(a),e,1,"/",c)}catch(l){}};A.prototype.getTarget=function(a){null==
a&&(a="redirect");return this.value.responseTargets[a]};var qc=function(){qc.__super__.constructor.call(this,this.constructor.NAME,{})};f(qc,puremvc.Proxy);qc.NAME="FlashMediaProxy";qc.prototype.getSrc=function(){return this.data.src};qc.prototype.setSrc=function(a){return this.data.src=a};var le=function(){le.__super__.constructor.call(this)};f(le,puremvc.SimpleCommand);le.prototype.execute=function(a){var b,c;this.facade.logger.debug("FlashAuthorizedCommand");a=this.facade.retrieveProxy(qc.NAME);
b=this.facade.retrieveProxy(aa.NAME);c=a.getSrc()||"";-1===c.indexOf(".smil")&&(c=b.createURL(c));a.setSrc(c);this.facade.video.authenticationComplete({media:a.getData()})};var ta=function(a,b){this.api=a;this.dispatcher=null!=b?b:new qb(this.api);ta.__super__.constructor.call(this,name,this)};f(ta,puremvc.Mediator);ta.NAME="ModuleDispatcher";ta.prototype.dispatcher=null;ta.prototype.api=null;ta.prototype.onRegister=function(){var a,b=this;a=this.dispatcher.dispatchEvent;this.dispatcher.dispatchEvent=
function(c){b.log(b.getMessage(c),c);a(c)}};ta.prototype.listNotificationInterests=function(){return[d.DISPATCH_EVENT].concat(this.facade.listNotificationEvents())};ta.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();b===d.DISPATCH_EVENT?this.dispatchEvent(a):this.dispatchEvent(this.createEvent(this.getType(b),a))};ta.prototype.createEvent=function(a,b){return new N(a,b)};ta.prototype.dispatchEvent=function(a){this.dispatcher.dispatchEvent(a)};ta.prototype.getType=function(a){return a.replace(RegExp("^"+
this.facade.getModuleName()),"")};ta.prototype.getMessage=function(a){return"["+this.facade.getModuleName().toUpperCase()+" EVENT]"};ta.prototype.log=function(a,b){null!=a&&null!=b&&(null!=b.data?this.facade.logger.log(a,b.type,b,b.data):this.facade.logger.log(a,b.type,b))};var n={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",
PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",
PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",
AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",FEED_LOADED:"mediaPlayerFeedLoaded"},nc=function(a,b){nc.__super__.constructor.call(this,a,b)};f(nc,ta);nc.NAME="PlayerDispatcher";nc.prototype.dispatchEvent=function(a){a.player=this.facade.parent;this.dispatcher.dispatchEvent(a)};nc.prototype.getMessage=function(a){if("timeupdate"!==a.type&&"progress"!==a.type)return nc.__super__.getMessage.call(this,
a)};var Sc=function(a,b){Sc.__super__.constructor.call(this,a,b)};f(Sc,nc);Sc.NAME="FlashPlayerDispatcher";Sc.prototype.getMessage=function(a){if(a.type!==n.TIME_UPDATE&&a.type!==n.CAPTION_DATA_CHANGE&&"adComponentPlaybackProgress"!==a.type&&"adComponentTimeElapsed"!==a.type)return Sc.__super__.getMessage.call(this,a)};var me=function(a,b){Za.attachModuleDispatcher(a,new Sc(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=
function(){return a.getConfig()};this.destroy=function(){return a.destroy()};this.getFlashXML=function(){var b,e;b=unescape(a.flashvars.settings_xml);e=F.parse(b);e.toString=function(){return b};return e};this.getFlashVars=function(){return a.flashvars};this.evaluateBinding=function(b){return a.video.evaluateBinding(b)};this.canPlayType=function(a){return 0<=Nc.call(h.flashTypes,a)?"maybe":""};this.replay=function(){a.video.replay()};this.pause=function(){a.video.pause()};this.end=function(){a.video.stopPlayer()};
this.getCurrentTime=function(b){return a.video.getCurrentTime()};this.setCurrentTime=function(b){a.video.jumpToTime(b);return b};this.getParams=function(){return a.video.getParams()};this.setParams=function(b){a.video.setParams(b);return b};this.getVolume=function(){return a.video.getVolume()};this.setVolume=function(b,e){a.video.setVolume(b,e||"");return b};this.getDuration=function(){return a.video.getDuration()};this.exitFullScreen=function(){a.video.exitFullScreen()};this.setMedia=a.setMedia.bind(a);
this.getMedia=a.getMedia.bind(a);this.load=a.load.bind(a);this.play=a.play.bind(a);this.setMuted=a.setMuted.bind(a);this.getMuted=a.getMuted.bind(a);this.getSrc=a.getSrc.bind(a);this.setSrc=a.setSrc.bind(a);this.setAutoplay=a.setAutoplay.bind(a);this.getAutoplay=a.getAutoplay.bind(a);this.getMedium=a.getMedium.bind(a);this.setMedium=a.setMedium.bind(a);this.setSource=a.setSource.bind(a);this.getSource=a.getSource.bind(a);this.getSeeking=a.getSeeking.bind(a);this.getPaused=a.getPaused.bind(a);this.getEnded=
a.getEnded.bind(a)};f(me,z);me.prototype.getFlashXML=function(){};me.prototype.getFlashVars=function(){};var t=function(a,b,c){var e,l,d,g=this;this.flashObjectID+=Date.now();this.plugins={};t.__super__.constructor.call(this,a,b,c);this.debug=/debug\=true/.test(location.search);this.media={};a=this.config.flash||{};b=!0===(null!=(e=a["static"])?e.enabled:void 0)?a["static"]:a;l=this.debug&&null!=b.debug?b.debug:b.swf||"amp.swf";d=a.version||"10.1";b=a.expressInstallSWF||"playerProductInstall.swf";
c=this.createParams(a);e=this.createAttributes(a);this.flashvars=this.createFlashVars(a);null==this.flashvars.settings_url&&(this.flashvars.settings_xml=this.createXML(this.config));swfobject.embedSWF(l,this.flashObjectID,"100%","100%",d,b,this.flashvars,c,e,function(a){g.createdHandler(a)})};f(t,ha);t.prototype.playerType="flash";t.prototype.flashObjectID="flashObject";t.prototype.playState=null;t.prototype.loaded=!1;t.prototype.flashvars=null;t.prototype.seeking=!1;t.prototype.paused=!1;t.prototype.ended=
!1;t.prototype.media=null;t.prototype.muted=!1;t.prototype.autoplay=!1;t.prototype.plugins=null;t.prototype.debug=!1;t.prototype.started=!1;t.prototype.createAPI=function(){return new me(this,this.dispatcher)};t.prototype.createModel=function(){this.registerProxy(new R);this.registerProxy(new aa);this.registerProxy(new qc)};t.prototype.createView=function(){this.registerMediator(new Ec(this.getViewComponent()));this.registerMediator(new ob);this.registerMediator(new Db);this.registerMediator(new pc(this.config))};
t.prototype.createController=function(){this.registerCommand(Y.AUTHORIZED,le);this.registerCommand(Y.SET_TOKEN,xd);this.registerCommand(Y.SET_KEY,wd)};t.prototype.createVideo=function(){var a;a=document.createElement("div");a.id=a.name=this.flashObjectID;this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return a};t.prototype.createParams=function(a){var b;b={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=
a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&(b.wmode=a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&/MSIE/.test(navigator.userAgent)&&(b.wmode="transparent");return b};t.prototype.getModules=function(){return this.plugins};t.prototype.createPlugins=function(){var a,b,c;c=s.plugins;for(b in c)if(a=c[b],b in this.config&&!1!==this.config[b].enabled)if(a=a[this.getPlayerType()],
null==a)this.logger.debug("Plugin could not be found: "+b);else try{this.plugins[b]=new a(this,this.config[b]),this.registerMediator(this.plugins[b]),this.logger.debug("Plugin loaded: "+b)}catch(e){this.logger.error("Plugin could not be loaded: "+b)}};t.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=a.attributes&&(null!=a.attributes.id&&(b.id=a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};t.prototype.createFlashVars=
function(a){var b,c,e,l;b={};null!=this.config.autoplay&&(this.setAutoplay(this.config.autoplay),b.auto_play=this.config.autoplay);null!=this.config.rules&&h.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(h.rules));null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&(this.setSource(this.config.media.source),b.video_url=escape(this.media.src)),
null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),null!=this.config.media.title&&(b.title=escape(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);null!=(null!=(e=this.config.ima)?null!=(l=e.overlay)?l.delay:void 0:void 0)&&(b.overlay_ad_delay=
this.config.ima.overlay.delay);null!=this.config.volume&&(b.volume=h.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);null!=this.config.name&&(b.core_player_name=this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);b.auto_replay=!0===this.config.loop;null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&
(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));null!=this.config.fullscreen&&(b.fullscreen_enabled=!1!==this.config.fullscreen.enabled);null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?
"long":"short");this.sendNotification(n.CREATE_FLASH_VARS,{flashvars:b,config:this.config});if(null!=a.vars)for(c in e=a.vars,e)a=e[c],b[c]=a;return b};t.prototype.createXML=function(a){var b,c,e,l,d,g;l=F.parse(a.flash.xml);this.sendNotification(n.CREATE_XML,{config:a,xml:l});b=l.getElementsByTagName("plugin");e=a.flash["static"];if(!0===(null!=e?e.enabled:void 0)&&null!=e.plugins)for(d=0,g=b.length;d<g;d++)a=b[d],null!=(c=e.plugins[a.getAttribute("id")])&&(a.setAttribute("type","static"),F.updateTextContent(a,
c));else if(!0===this.debug)for(e=0,d=b.length;e<d;e++)a=b[e],"AkamaiAdvancedStreamingPlugin"===a.getAttribute("id")&&(c=a.textContent||a.text,F.updateTextContent(a,c.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")));b=F.serialize(l);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");return escape(b)};t.prototype.createdHandler=function(a){var b=this;this.video=a.ref;this.video.className="video";this.video.eventHandler=
function(a,e){return b.eventHandler(a,e)};this.sendNotification(n.FLASH_CREATED);null!=this.getMedium()&&this.setMedium(this.media.medium)};t.prototype.eventHandler=function(a,b){var c,e,l;try{switch(a){case n.INITIALIZED:l=e="ready";break;case n.RESET:e="ready";this.started=!1;break;case n.LOADING:l="loadstart";break;case n.PLAYER_ERROR:l=e="error";break;case n.MEDIA_ERROR:l=e="error";break;case n.ERROR_STREAM_NOT_FOUND:l=e="error";break;case n.CAPABILITY_CHANGE:c=b.type;"canPlayChange"===c&&!0===
b.enabled?(l="canplay",this.loaded=!0):"canSeekChange"===c&&!0===b.enabled?l="canplaythrough":"temporalChange"===c&&!0===b.enabled&&(l="loadedmetadata");break;case n.PLAYBACK_OPEN:l="started";this.started=!0;break;case n.PLAYING:this.started||this.sendNotification("play",b);l=e="playing";this.paused=this.ended=!1;break;case n.PLAY_REQUEST:l="playrequest";break;case n.PLAY:"paused"!==this.playState&&this.started&&(l="play");break;case n.ENDED:l=e="ended";this.ended=!0;break;case n.PAUSED:l="pause";
e="paused";this.paused=!0;break;case n.BUFFERING:"ended"!==this.className&&(l=e="waiting");break;case n.DURATION_CHANGE:isNaN(b.time)||(l="durationchange",b=b.time);break;case n.VOLUME_CHANGE:l="volumechange";break;case n.TIME_UPDATE:l="timeupdate";break;case n.SEEKING_CHANGE:l=b.seeking?"seeking":"seeked";this.seeking=b.seeking;break;case n.FULLSCREEN_CHANGE:l="fullscreenchange";b="fullScreen"===b.displayState;break;case n.FAIL_OVER_ATTEMPT:l="failoverattempt";break;case n.ERROR:this.logger.error(b),
l=e="error"}this.sendNotification(d.DISPATCH_EVENT,{type:a,data:b,player:this.parent});this.sendNotification(a,b);null!=l&&this.sendNotification(l,b);null!=e&&this.setPlayState(e)}catch(ga){this.logger.error("Flash Event Error:",ga)}};t.prototype.setPlayState=function(a){var b;if(a!==this.playState)return b={newState:a,oldState:this.playState},this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,b),a};t.prototype.setMedia=function(a){if(a!==this.media)return this.media=a,null!=this.playState&&
this.setPlayState("ready"),null!=a.src&&this.setSrc(a.src),null!=a.source&&0<a.source.length&&this.setSource(a.source),this.sendNotification(d.MEDIA_CHANGE,a),this.loaded=!0,null==a.autoplay&&(a.autoplay=this.autoplay),this.video.loadURL(this.media.src,a),a};t.prototype.getMedia=function(){return this.media};t.prototype.load=function(){this.loaded=!0;this.video.loadURL(this.media.src)};t.prototype.play=function(){this.loaded?this.video.unpause():this.load()};t.prototype.setMuted=function(a){this.muted=
a;try{!0===a?this.video.mute():this.video.unmute()}catch(b){this.logger.error(b)}return a};t.prototype.getMuted=function(){return this.muted};t.prototype.getSrc=function(a){return this.video.getURL()};t.prototype.setSrc=function(a){this.media.src=a;this.loaded=!1;this.setMedium(h.getMimeType(a));return a};t.prototype.setAutoplay=function(a){return this.autoplay=a};t.prototype.getAutoplay=function(){return this.autoplay};t.prototype.getMedium=function(){return this.media.medium};t.prototype.setMedium=
function(a){var b,c;if(a!==this.media.medium)return null!=this.media.medium&&null!=this.media.medium&&(c="medium-"+this.media.medium),b=this.media.medium=/audio/.test(a)?"audio":"video",this.sendNotification(d.MEDIUM_CHANGE,{newState:"medium-"+b,oldState:c}),a};t.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){this.media.source=a;this.loaded=!1;b=h.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==
typeof type&&null!==type&&this.setMedium(type);else throw Error("No valid source could be found");return a}};t.prototype.getSource=function(a){return this.media.source};t.prototype.getSeeking=function(){return this.seeking};t.prototype.getPaused=function(){return this.paused};t.prototype.getEnded=function(){return this.ended};t.prototype.getFlashXML=function(){return F.parse(this.getConfigXMLString())};t.prototype.getFlashVars=function(){return this.flashvars};t.prototype.evaluateBinding=function(a){return this.video.evaluateBinding(a)};
t.prototype.canPlayType=function(a){return 0<=Nc.call(h.flashTypes,a)?"maybe":""};t.prototype.replay=function(){this.video.replay()};t.prototype.pause=function(){this.video.pause()};t.prototype.end=function(){this.video.stopPlayer()};t.prototype.getCurrentTime=function(a){return this.video.getCurrentTime()};t.prototype.setCurrentTime=function(a){this.video.jumpToTime(a);return a};t.prototype.getParams=function(){return this.video.getParams()};t.prototype.setParams=function(a){this.video.setParams(a);
return a};t.prototype.getVolume=function(){return this.video.getVolume()};t.prototype.setVolume=function(a){this.video.setVolume(a);return a};t.prototype.getDuration=function(){return this.video.getDuration()};t.prototype.exitFullScreen=function(){this.video.exitFullScreen()};var mb=function(a){this.module=a;mb.__super__.constructor.call(this,a.getModuleName(),this)};f(mb,puremvc.Mediator);mb.prototype.module=null;mb.prototype.mediator=null;mb.prototype.initializeNotifier=function(a){var b,c=this;
mb.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),a.getBody(),a.getType())})};mb.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)};mb.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)};
mb.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};mb.prototype.handleNotification=function(a){this.module.sendNotification(a.getName(),a.getBody(),a.getType())};var oc={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered"},k=function(a,b,c){var e;this.target=a;this.type=b;this.handler=c;this.trigger=Jf(this.trigger,this);k.instances.push(this);this.types=[];(e=this.type,0<=Nc.call(k.EVENTS,e))?h.isTouchDevice()?(this.types.push(k.TOUCH_EVENTS[this.type]),
this.type===k.TOUCH_EVENTS[1]&&this.types.push(k.TOUCH_EVENTS[4])):this.types.push(k.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type);this.bind()};k.PRESS=0;k.RELEASE=1;k.MOVE=2;k.CLICK=3;k.EVENTS=[k.PRESS,k.RELEASE,k.MOVE,k.CLICK];k.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click"];k.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];k.instances=[];k.create=function(a,b,c){return new k(a,b,c)};k.bind=function(a,b){var c,
e,l,d;d=k.instances;c=e=0;for(l=d.length;e<l;c=++e)c=d[c],c.target===a&&(null!=b&&c.type!==b||c.bind())};k.unbind=function(a,b){var c,e,l,d;d=k.instances;c=e=0;for(l=d.length;e<l;c=++e)c=d[c],c.target===a&&(null!=b&&c.type!==b||c.unbind())};k.clear=function(a,b){var c,e,l,d,g;g=k.instances;c=l=0;for(d=g.length;l<d;c=++l)e=g[c],(null!=e?e.target:void 0)!==a||null!=b&&e.type!==b||(e.clear(),k.instances.splice(c,1))};k.prototype.types=null;k.prototype.bind=function(){var a,b,c,e;e=this.types;b=0;for(c=
e.length;b<c;b++)a=e[b],null!=this.target.addEventListener?this.target.addEventListener(a,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};k.prototype.unbind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};k.prototype.clear=function(){this.unbind();this.types=this.type=this.handler=
this.target=null};k.prototype.trigger=function(a){this.handler(a)};var Xb=function(){Xb.__super__.constructor.call(this);null==this.contextName&&(this.contextName=this.constructor.NAME)};f(Xb,puremvc.Proxy);Xb.prototype.contextName=null;Xb.prototype.contextData=null;Xb.prototype.getContextName=function(){return this.contextName};Xb.prototype.getContextData=function(){return this.contextData};var Qc=function(){Qc.__super__.constructor.call(this)};f(Qc,puremvc.SimpleCommand);Qc.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST)};
var rc=function(a){rc.__super__.constructor.call(this,a)};f(rc,ta);rc.NAME="PluginDispatcher";rc.prototype.dispatchEvent=function(a){a.player=this.facade.app.parent;this.dispatcher.dispatchEvent(a)};rc.prototype.getMessage=function(a){return rc.__super__.getMessage.call(this,a).replace("[","["+this.facade.app.getModuleName().toUpperCase()+" ")};var ca=function(a){var b,c;ca.__super__.constructor.call(this);if(a&&(null!=a.language&&(this.data.language=a.language),null!=a.locales))for(c in a.locales)if(null!=
this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=a.locales[c];this.setLocale(this.data.language)};f(ca,Xb);ca.NAME="LocalizationProxy";ca.prototype.contextName="l10n";ca.prototype.data={language:navigator.language,locales:{en:{MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CC_TITLE:"Captions",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",
MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}};ca.prototype.locale=null;ca.prototype.getContextData=function(){return this.locale};ca.prototype.getLanguage=
function(){return this.data.language};ca.prototype.setLanguage=function(a){this.data.language=a;this.setLocale(a);this.sendNotification(d.LANGUAGE_CHANGED,a);return a};ca.prototype.setLocale=function(a){this.locale=this.data.locales[a];null==this.locale&&(this.locale=this.data.locales[a.substring(0,2)]);return a};ca.prototype.getLocales=function(){return this.data.locales};ca.prototype.setLocales=function(a){return this.data.locales=a};ca.prototype.getString=function(a){return(this.locale||this.data.locales.en)[a]||
""};ca.prototype.getLanguageString=function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),b=this.getString(b));return b};var Eb=function(a,b){null==b&&(b="div");"string"===typeof b&&(b=document.createElement(b));Eb.__super__.constructor.call(this,a,b)};f(Eb,Aa);Eb.NAME="LayerMediator";Eb.prototype.onRegister=function(){Eb.__super__.onRegister.call(this);this.classList.add("layer");this.sendNotification(d.ADD_LAYER,
this.viewComponent)};var Db=function(a,b){Db.__super__.constructor.call(this,b,a)};f(Db,Eb);Db.NAME="OverlayLayerMediator";Db.prototype.onRegister=function(){Db.__super__.onRegister.call(this);this.classList.add("overlays-layer")};Db.prototype.listNotificationInterests=function(){return[d.ADD_OVERLAY,d.REMOVE_OVERLAY]};Db.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ADD_OVERLAY:this.viewComponent.appendChild(a);break;case d.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};
var Y={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"},aa=function(){aa.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()};f(aa,puremvc.Proxy);aa.NAME="SecurityProxy";aa.prototype.setupHDN1=function(){var a=this;return window.retrieveToken=function(b,c){var e;a.facade.logger.debug("HDN1: Token Requested",b,c);e=a.getToken();null!=e?a.facade.video.tokenRetrievalSuccess("\x26primaryToken\x3d"+
e):a.sendNotification(Y.AUTHORIZE);return!0}};aa.prototype.getKey=function(){return this.data.key};aa.prototype.setKey=function(a){return this.data.key=a};aa.prototype.getToken=function(){return this.data.token};aa.prototype.setToken=function(a){return this.data.token=a};aa.prototype.getSecret=function(){var a;if(null==this.data.token)return null;a="";null!=this.data.key&&(a+=this.data.key);return a+=this.data.token};aa.prototype.createURL=function(a){var b;b=this.getSecret();null!=b&&(a+=/\?/.test(a)?
"\x26":"?",a+=b);return a};aa.prototype.getAuthorized=function(){return this.data.authorized};aa.prototype.setAuthorized=function(a){return this.data.authorized=a};aa.prototype.getProvider=function(){return this.data.provider};aa.prototype.setProvider=function(a){return this.data.provider=a};var nd=function(){nd.__super__.constructor.call(this)};f(nd,puremvc.SimpleCommand);nd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(B.NAME);a=a.getBody();b.setPlayState(a)};var pd=function(){pd.__super__.constructor.call(this)};
f(pd,puremvc.SimpleCommand);pd.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaChangeCommand",a.getBody());b=a.getBody();this.sendNotification(d.UPDATE_PLAYBACK_CORE,!1);c=this.facade.retrieveProxy(r.NAME);a=this.facade.retrieveProxy(D.NAME);!0===(c.initialized&&(a.getAutoplay()||!0===b.autoplay))&&this.sendNotification(d.START)};var sd=function(){sd.__super__.constructor.call(this)};f(sd,puremvc.SimpleCommand);sd.prototype.execute=function(a){var b,c;this.facade.logger.debug("UpdatePlaybackCoreCommand");
b=this.facade.retrieveProxy(p.NAME);this.facade.retrieveProxy(ba.NAME).setPlaybackType(b.getType());c=this.facade.retrieveProxy(r.NAME);b=b.getSrc();null!=b&&""!==b&&"undefined"!==b&&(c.setSrc(b),a=null!=a.getBody()?a.getBody():!0,!0===a&&c.load())};var md=function(){md.__super__.constructor.call(this)};f(md,puremvc.SimpleCommand);md.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeDurationCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(p.NAME);b.getDuration()!==
a&&b.setDuration(a)};var td=function(){td.__super__.constructor.call(this)};f(td,puremvc.SimpleCommand);td.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(r.NAME).getCore();k.clear(b);this.facade.logger.error("[AMP ERROR]",a.getBody());this.sendNotification(d.CHANGE_PLAY_STATE,PlayState.ERROR)};var ud=function(){ud.__super__.constructor.call(this)};f(ud,puremvc.SimpleCommand);ud.prototype.execute=function(a){var b,c;this.facade.logger.debug("ReadyCommand");a=null!=(b=this.facade.config)?
b.volume:void 0;null!=a&&this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification(d.CHANGE_DISPLAY_STATE,ua.NORMAL);this.sendNotification(d.CHANGE_PLAY_STATE,PlayState.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,$a.ACTIVE);b=null!=(c=this.facade.config)?c.media:void 0;null!=b&&this.sendNotification(d.SET_MEDIA,b)};var rd=function(){rd.__super__.constructor.call(this)};f(rd,puremvc.SimpleCommand);rd.prototype.execute=function(a){this.facade.logger.debug("UpdateDataBindingsCommand");a=
a.getBody()||{};this.facade.retrieveProxy(R.NAME).compile(a.contexts,a.suppressErrors)};var vd=function(){vd.__super__.constructor.call(this)};f(vd,puremvc.SimpleCommand);vd.prototype.execute=function(a){this.facade.logger.debug("ChangeParamsCommand",a.getBody());a=a.getBody();this.facade.retrieveProxy(ab.NAME).setData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var qd=function(){qd.__super__.constructor.call(this)};f(qd,puremvc.SimpleCommand);qd.prototype.execute=function(a){var b;
a=a.getBody();this.facade.logger.debug("SetMediaCommand",a);this.sendNotification(d.CHANGE_MEDIA,a);b=this.facade.retrieveProxy(p.NAME);a=b.getData();!0===b.authorized&&this.sendNotification(d.MEDIA_CHANGE,a)};var od=function(){od.__super__.constructor.call(this)};f(od,puremvc.SimpleCommand);od.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeMediaCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(p.NAME);this.sendNotification(d.CHANGE_PLAY_STATE,PlayState.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,
$a.ACTIVE);b.setData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(Y.AUTHORIZE)};var bb=function(a){bb.__super__.constructor.call(this,bb.NAME,a)};f(bb,Eb);bb.NAME="PosterMediator";bb.prototype.poster=null;bb.prototype.clickHandler=null;bb.prototype.onRegister=function(){var a=this;this.classList.add("poster-layer");this.poster=document.createElement("div");this.classList.add("poster-content",this.poster);this.viewComponent.appendChild(this.poster);this.clickHandler=k.create(this.viewComponent,
k.CLICK,function(b){b.stopImmediatePropagation();b.preventDefault();a.sendNotification(d.TOGGLE_PLAY_PAUSE,!0);return!1});bb.__super__.onRegister.call(this)};bb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};bb.prototype.handleNotification=function(a){switch(a.getName()){case d.CHANGE_MEDIA:this.poster.innerHTML="",a=a.getBody().poster,null!=a&&""!==a&&(this.poster.innerHTML='\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e')}};var pb=function(a){pb.__super__.constructor.call(this,
pb.NAME,a)};f(pb,Eb);pb.NAME="ErrorSlateMediator";pb.prototype.message=null;pb.prototype.onRegister=function(){pb.__super__.onRegister.call(this);this.classList.add("error-layer");this.message=document.createElement("div");this.classList.add("error-message",this.message);return this.viewComponent.appendChild(this.message)};pb.prototype.listNotificationInterests=function(){return[d.ERROR]};pb.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.ERROR:a=a.getBody();b="Error: ";
switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+="Source not supported.";break;default:b+=a}return this.message.textContent=b}};var cb=function(a){cb.__super__.constructor.call(this,cb.NAME,a)};f(cb,da);cb.NAME="TitleBarMediator";cb.prototype.title=null;cb.prototype.description=null;cb.prototype.onRegister=
function(){this.classList.add("title-bar");this.title=document.createElement("div");this.classList.add("title-text",this.title);this.viewComponent.appendChild(this.title);this.description=document.createElement("div");this.classList.add("description-text",this.description);this.viewComponent.appendChild(this.description);cb.__super__.onRegister.call(this)};cb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};cb.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.CHANGE_MEDIA:a=
a.getBody();b=a.title;if(null==b||""===b||"undefined"===b)return this.classList.add("hidden");this.title.innerHTML=b;null!=a.duration&&(this.title.innerHTML+=" - "+h.formatTimecode(a.duration));this.description.innerHTML=a.description?a.description:"";return this.classList.remove("hidden")}};var db=function(a){Za.attachModuleDispatcher(a,new rc(this));this.getConfig=function(){return a.getConfig()}};f(db,Za);db.prototype.getConfig=function(){};var Oc={PREFIX:"akamai-"},S=function(a,b){this.app=a;
this.logger=this.app.logger;S.__super__.constructor.call(this,b)};f(S,E);S.NAME="Plugin";S.prototype.app=null;S.prototype.initialize=function(){this.createModel();this.createController()};S.prototype.createAPI=function(){return new db(this)};S.prototype.onRegister=function(){var a;a=this.retrieveProxy(K.NAME);null==(null!=a?a.getLoaded:void 0)||a.getLoaded()?this.registered():a.load(this.registered.bind(this))};S.prototype.registered=function(){var a;this.createView();null!=(a=this.retrieveProxy(K.NAME))&&
"function"===typeof a.initialize&&a.initialize();this.sendNotification(oc.PLUGIN_REGISTERED,this)};S.prototype.listNotificationPublications=function(){var a,b;return[d.ADD_LAYER,d.REMOVE_LAYER,d.ADD_OVERLAY,d.REMOVE_OVERLAY,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE].concat(function(){var c;c=[];for(a in oc)b=oc[a],c.push(b);return c}())};var C={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},nb=function(){this.plugins=[];this.registered=[];nb.__super__.constructor.call(this,
this.constructor.NAME,{})};f(nb,puremvc.Mediator);nb.NAME="PluginAdapter";nb.prototype.plugins=null;nb.prototype.registered=null;nb.prototype.onRegister=function(){return nb.__super__.onRegister.call(this)};nb.prototype.listNotificationInterests=function(){return[oc.REGISTER_PLUGINS,oc.PLUGIN_REGISTERED]};nb.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case oc.REGISTER_PLUGINS:e=this.plugins=a;a=0;for(c=e.length;a<c;a++)b=e[a],this.facade.registerModule(b);
break;case oc.PLUGIN_REGISTERED:this.registered.push(a),this.facade.logger.debug("Plugin Registered: "+a.constructor.NAME),this.registered.length===this.plugins.length&&this.sendNotification(d.READY,this.facade.config)}};var ob=function(a){ob.__super__.constructor.call(this,ob.NAME,a)};f(ob,Eb);ob.NAME="VideoMediator";ob.prototype.video=null;ob.prototype.onRegister=function(){this.classList.add("video-layer");ob.__super__.onRegister.call(this)};ob.prototype.listNotificationInterests=function(){return[d.PLAYBACK_CORE_CHANGE]};
ob.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_CORE_CHANGE:null!=this.video&&this.viewComponent.removeChild(this.video),this.video=a,this.classList.add("video",this.video),this.viewComponent.appendChild(this.video)}};var Fc=function(){};Fc.prototype.data=null;Fc.prototype.value=null;Fc.prototype.source=null;Fc.prototype.parse=function(a){};Fc.prototype.compile=function(a,b){};var R=function(){R.__super__.constructor.call(this,this.constructor.NAME,
{});this.data={};this.contextMap={};this.configurationMap={}};f(R,puremvc.Proxy);R.NAME="DataBindingProxy";R.prototype.contextMap=null;R.prototype.configurationMap=null;R.prototype.paramsProxy=null;R.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(ab.NAME);this.registerContext(this.facade.retrieveProxy(p.NAME));this.registerContext(this.facade.retrieveProxy(ca.NAME));this.registerContext(this.facade.retrieveProxy(ba.NAME));return this.update()};R.prototype.registerContext=
function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};R.prototype.retrieveContext=function(a){return this.contextMap[a]};R.prototype.removeContext=function(a){var b;b=this.contextMap[a];delete this.contextMap[a];return b};R.prototype.registerConfiguration=function(a){null!=a&&(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};R.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};R.prototype.removeConfiguration=function(a){var b;b=this.configurationMap[a];
delete this.configurationMap[a];return b};R.prototype.evaluateBinding=function(a){a=new Fb(a);a.compile(this.data);return a.value};R.prototype.update=function(a){var b,c,e,l;this.data.now=Date.now();l=this.contextMap;for(e in l)b=l[e],-1!==(null!=a?"function"===typeof a.indexOf?a.indexOf(e):void 0:void 0)&&(this.data[e]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};R.prototype.compile=function(a,b){var c,e,l,d,g;
null==b&&(b=!1);this.update(a);e=h.clone(this.data);d=this.paramsProxy.getConfigurationName();g=this.configurationMap;for(l in g)c=g[l],l!==d&&c.compile(e,b)};var Gb=function(a){null!=a&&this.parse(a)};f(Gb,Fc);Gb.prototype.data=null;Gb.prototype.value=null;Gb.prototype.source=null;Gb.prototype.parse=function(a){return a instanceof Array?new Tc(a):a instanceof Object?new kc(a):new Fb(a)};var Tc=function(a){Tc.__super__.constructor.call(this,a)};f(Tc,Gb);Tc.prototype.parse=function(a){var b,c,e,l;
this.data=[];b=e=0;for(l=a.length;e<l;b=++e)c=a[b],this.data[b]=Tc.__super__.parse.call(this,c);return this.data};Tc.prototype.compile=function(a,b){var c,e,l,d,g;null==a&&(a={});null==b&&(b=!1);this.value=[];g=this.data;c=l=0;for(d=g.length;l<d;c=++l){e=g[c];try{this.value[c]=e.compile(a,b)}catch(f){this.value[c]=null,b||T.error(f)}}return this.value};var yd=function(a){this.message=yd.MESSAGE+a};f(yd,Error);yd.MESSAGE="Tokenization Error: Could not find token value for: ";var Uc=function(a){Uc.__super__.constructor.call(this,
a)};f(Uc,Gb);Uc.prototype.parse=function(a){return this.source=this.data=this.value=a};Uc.prototype.compile=function(a,b){return this.value};var Vc=function(a){Vc.__super__.constructor.call(this,a)};f(Vc,Gb);Vc.prototype.exec=null;Vc.prototype.parse=function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+";}return value;");return this.data};Vc.prototype.compile=function(a,b){null==a&&(a={});if(null==this.exec)return this.value;try{this.value=
this.exec(a)}catch(c){if(this.value=null,!suppressErors)throw new yd(this.data);}return this.value};var Fb=function(a){this.token=RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");Fb.__super__.constructor.call(this,a)};f(Fb,Gb);Fb.prototype.exec=null;Fb.prototype.tokenStart=/#{/;Fb.prototype.tokenEnd=/}/;Fb.prototype.token=null;Fb.prototype.parse=function(a){var b,c,e,l,d,g;this.source=a;this.data=[];if(this.token.test(this.source)){l=[];c=null;a=this.source.replace(this.token,function(a,
b,e,d){l.push(b);c="\x3c\x3c\x3e\x3e";0<e&&e<d.length-a.length&&(c+="\x3c\x3c\x3e\x3e");return c});b=a.split("\x3c\x3c\x3e\x3e");d=e=0;for(g=b.length;d<g;d++)a=b[d],""===a&&l[e]?(this.data.push(new Vc(l[e])),e++):""!==a&&this.data.push(new Uc(a));1===this.data.length&&(this.data=this.data[0])}else this.data=new Uc(a);return this.data};Fb.prototype.compile=function(a,b){var c,e,l,d;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof Fc)this.value=this.data.compile(a,
b);else for(this.value="",d=this.data,e=0,l=d.length;e<l;e++)c=d[e],this.value+=c.compile(a,b)}catch(g){if(this.value=null,!b)throw new yd(this.source);}return this.value};var kc=function(a){kc.__super__.constructor.call(this,a)};f(kc,Gb);kc.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=kc.__super__.parse.call(this,c);return this.data};kc.prototype.compile=function(a,b){var c,e,l;null==a&&(a={});null==b&&(b=!1);this.value={};l=this.data;for(c in l){e=
l[c];try{this.value[c]=e.compile(a,b)}catch(d){this.value[c]=null,T.error(d)}}return this.value};var rb=function(){rb.__super__.constructor.call(this)};f(rb,puremvc.Proxy);rb.NAME="PlaybackProxy";rb.prototype.src=null;rb.prototype.canPlayType=function(a){return"external"===a};rb.prototype.getSrc=function(){return this.src};rb.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,"The value of src is not supported: "+a);a!==this.src&&(this.src=a);return a};rb.prototype.play=function(){window.open(this.getSrc(),
"_blank")};rb.prototype.load=function(){};rb.prototype.setVolume=function(){};var ab=function(a){ab.__super__.constructor.call(this,a)};f(ab,U);ab.NAME="ParamsProxy";ab.prototype.defaults={};ab.prototype.configurationName="params";ab.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new kc(this.data);return this.data};var Df=function(a,b){Df.__super__.constructor.call(this,a,b);this.evaluateBinding=
function(b){var e;return null!=(e=a.retrieveProxy(R.NAME))?e.evaluateBinding(b):void 0};this.canPlayType=function(a){return"maybe"};this.play=function(){a.sendNotification(d.PLAY)};this.setParams=function(b){a.sendNotification(d.CHANGE_PARAMS,b);return b};this.getParams=function(){return a.retrieveProxy(ab.NAME).getData()};this.setAutoplay=function(a){return!1};this.getAutoplay=function(){return!1};this.setLoop=function(a){return!1};this.getLoop=function(){return!1};this.setMuted=function(a){return!1};
this.getMuted=function(){return!1};this.setMedia=function(b){a.sendNotification(d.SET_MEDIA,b);return b};this.getMedia=function(b){var e;return null!=(e=a.retrieveProxy(p.NAME))?e.getData():void 0};this.setCurrentTime=function(a){return 0};this.getCurrentTime=function(a){return 0};this.getDuration=function(b){return a.retrieveProxy(p.NAME).getDuration()};this.setSrc=function(b){a.sendNotification(d.SET_MEDIA,{src:b});return b};this.getSrc=function(b){return a.retrieveProxy(p.NAME).getSrc()};this.setSource=
function(b){a.sendNotification(d.SET_MEDIA,{source:b});return b};this.getSource=function(){return a.retrieveProxy(p.NAME).getSource()};this.setVolume=function(a){return a};this.getVolume=function(a){return 1};this.getSeeking=function(){return!1};this.getPaused=function(){return!1};this.getEnded=function(){return!1}};f(Df,z);var sc=function(){sc.__super__.constructor.call(this)};f(sc,puremvc.MacroCommand);sc.prototype.initializeMacroCommand=function(){return this.addSubCommand(Qc)};sc.prototype.execute=
function(a){this.facade.logger.debug("PlayCommand");sc.__super__.execute.call(this,a);this.facade.retrieveProxy(r.NAME).play()};var ua={NORMAL:"normal",FULL_SCREEN:"full-screen"},Kf={FLASH:"flash",HTML:"html"},$a={ACTIVE:"active",INACTIVE:"inactive"};PlayState={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"};var B=function(){B.__super__.constructor.call(this)};f(B,puremvc.Proxy);B.NAME="ApplicationStateProxy";B.prototype.displayState=
null;B.prototype.playState=null;B.prototype.renderMode=null;B.prototype.activeState=null;B.prototype.seeking=!1;B.prototype.getDisplayState=function(){return this.displayState};B.prototype.setDisplayState=function(a){var b;a!==b&&(b=this.displayState,this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,{oldState:b,newState:this.displayState}))};B.prototype.getPlayState=function(){return this.playState};B.prototype.setPlayState=function(a){var b;a!==this.playState&&!0!==this.seeking&&(b=
this.playState,this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,{oldState:b,newState:this.playState}))};B.prototype.getSeeking=function(){return this.seeking};B.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a)};B.prototype.getRenderMode=function(){return this.renderMode};B.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};B.prototype.getMedium=function(){return this.medium};B.prototype.setMedium=function(a){var b;a!==this.medium&&(b=null!=this.medium?
"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(d.MEDIUM_CHANGE,{oldState:b,newState:"medium-"+this.medium}))};B.prototype.getActiveState=function(){return this.activeState};B.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=a,this.sendNotification(d.ACTIVE_STATE_CHANGE,{oldState:b,newState:this.activeState}))};var D=function(a){D.__super__.constructor.call(this,a)};f(D,y);D.NAME=y.NAME;D.prototype.defaults={name:null,autoplay:!1,
loop:!1,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null};D.prototype.setData=function(a){null!=a.rules&&h.mergeRules(a.rules);return D.__super__.setData.call(this,a)};D.prototype.getAutoplay=function(){return this.data.autoplay};D.prototype.setAutoplay=function(a){return this.data.autoplay=a};D.prototype.getLoop=function(){return this.data.loop};D.prototype.setLoop=function(a){return this.data.loop=a};D.prototype.getEndSlate=function(){return this.data.endslate};D.prototype.setEndSlate=
function(a){return this.data.endslate=a};D.prototype.getDomain=function(){return this.data.domain};D.prototype.setDomain=function(a){return this.data.domain=a};D.prototype.getTarget=function(){return this.data.target};D.prototype.setTarget=function(a){return this.data.target=a};D.prototype.getName=function(){return this.data.name};D.prototype.setName=function(a){return this.data.name=a};D.prototype.getControls=function(){return this.data.controls};D.prototype.setControls=function(a){return this.data.controls=
a};D.prototype.getFullscreen=function(){return this.data.fullscreen};D.prototype.setFullscreen=function(a){return this.data.fullscreen=a};var r=function(){r.__super__.constructor.call(this,r.NAME)};f(r,puremvc.Proxy);r.NAME="PlaybackProxy";r.prototype.data={core:null,muted:!1,started:!1,volume:1,handlers:null};r.prototype.initialized=!1;r.prototype.getCore=function(){return this.facade.getVideo()};r.prototype.getStarted=function(){return this.data.started};r.prototype.setStarted=function(a){return this.data.started=
a};r.prototype.getHandlers=function(){return this.data.handlers};r.prototype.setHandlers=function(a){var b,c,e,l;if(null!=this.data.handlers)for(l=this.data.handlers,c=0,e=l.length;c<e;c++)b=l[c],b.clear();return this.data.handlers=a};r.prototype.getVideo=function(){return this.data.core};r.prototype.setVideo=function(a){if(a!==this.data.core)return this.data.core=a,this.sendNotification(d.PLAYBACK_CORE_CHANGE,this.data.core),this.data.core};r.prototype.canPlayType=function(a){var b;b=this.data.core.canPlayType(a)||
"";(/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===h.mimeTypes.m3u8&&(b="maybe");return b};r.prototype.getPaused=function(){return this.data.core.paused};r.prototype.getEnded=function(){return this.data.core.ended};r.prototype.getSeeking=function(){return this.data.core.seeking};r.prototype.getCurrentTime=function(){var a;return null!=(a=this.data.core)?a.currentTime:void 0};r.prototype.setCurrentTime=function(a){if(this.data.core&&a!==this.data.core.currentTime)return this.data.core.currentTime=
h.clamp(a,0,this.getDuration())};r.prototype.getSrc=function(){return this.data.core.src};r.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,"The value of src is not supported: "+a);a!==this.data.core.src&&(this.data.started=!1,this.data.core.src=a);return a};r.prototype.getVolume=function(){return this.data.core.volume};r.prototype.setVolume=function(a){0<=a&&1>=a&&a!==this.data.core.volume&&this.sendNotification(d.VOLUME_CHANGE,this.data.core.volume=a);return a};r.prototype.getMuted=
function(){return this.data.muted};r.prototype.setMuted=function(a){var b;this.data.muted=a;!0===this.data.muted?(this.data.volume=this.getVolume(),b=0):b=this.data.volume;this.sendNotification(d.CHANGE_VOLUME,b);return a};r.prototype.getDuration=function(a){var b;return null!=(b=this.data.core)?b.duration:void 0};r.prototype.play=function(){this.data.started||(this.data.started=!0);this.data.core.play()};r.prototype.pause=function(){this.data.core.pause()};r.prototype.load=function(){this.data.core.load()};
r.prototype.end=function(){this.data.core&&(this.data.core.currentTime=this.data.core.duration)};var ba=function(a){this.defaultPlaybackCore=a;ba.__super__.constructor.call(this);this.playbackCoreMap={}};f(ba,Xb);ba.NAME="PlayerProxy";ba.prototype.contextName="player";ba.prototype.playbackCoreMap=null;ba.prototype.defaultPlaybackCore=null;ba.prototype.registerPlaybackCore=function(a){null!=a&&(this.playbackCoreMap[a.getPlaybackCoreName()]=a)};ba.prototype.retrievePlaybackCore=function(a){return this.playbackCoreMap[a]};
ba.prototype.removePlaybackCore=function(a){var b;b=this.playbackCoreMap[a];delete this.playbackCoreMap[a];return b};ba.prototype.setPlaybackType=function(a){var b,c,e,l,d;l=this.defaultPlaybackCore;d=this.playbackCoreMap;for(e in d)if(c=d[e],b=c.canPlayType(a),""!==b){l=c;break}b=this.facade.retrieveProxy(r.NAME);b!==l&&(this.facade.removeProxy(r.NAME),this.facade.registerProxy(l),l.setData(b.getData()));return a};ba.prototype.canPlayType=function(a){var b,c,e;e=this.playbackCoreMap;for(c in e)if(b=
e[c],b=b.canPlayType(a),""!==b)return b;return b=this.defaultPlaybackCore.canPlayType(a)};ba.prototype.getContextData=function(){var a,b,c,e;a=this.facade.retrieveProxy(D.NAME);e=this.facade.retrieveProxy(r.NAME);c=this.facade.retrieveProxy(p.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),domain:a.getDomain(),name:a.getName(),currentTime:e.getCurrentTime(),duration:e.getDuration(),timecode:{duration:h.formatTimecode(c.getDuration()),
currentTime:h.formatTimecode(e.getCurrentTime())}}};var p=function(){this.data={metadata:{}};p.__super__.constructor.call(this)};f(p,Xb);p.NAME="MediaProxy";p.prototype.contextName="media";p.prototype.data=null;p.prototype.authorized=!0;p.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),
temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory()}};p.prototype.setData=function(a){var b;this.data.autoplay=a.autoplay;this.data.type=a.type;null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.data.title=a.title;this.setDuration(a.duration);this.data.poster=a.poster;this.data.guid=a.guid;this.data.link=a.link;this.data.embed=a.embed;this.data.width=a.width;this.data.height=a.height;this.data.category=a.category;this.data.description=
a.description;this.data.status=a.status||{};"blocked"===(null!=(b=this.data.status)?b.state:void 0)&&(this.authorized=!1);this.data.category=a.category;this.data.metadata=a.metadata||{};null!=a.isLive&&this.setIsLive(a.isLive);null!=a.temporalType?this.setTemporalType(a.temporalType):this.setTemporalType("vod");null!=a.medium&&this.setMedium(a.medium);null!=a.pubDate&&this.setPubDate(a.pubDate);return a};p.prototype.getGUID=function(){return this.data.guid};p.prototype.setGUID=function(a){return this.data.guid=
a};p.prototype.getLink=function(){return this.data.link};p.prototype.setLint=function(a){return this.data.link=a};p.prototype.getEmbed=function(){return this.data.embed};p.prototype.setEmbed=function(a){return this.data.embed=a};p.prototype.getAutoplay=function(){return this.data.autoplay};p.prototype.setAutoplay=function(a){return this.data.autoplay=a};p.prototype.getPubDate=function(){return this.data.pubDate};p.prototype.setPubDate=function(a){return this.data.pubDate=a};p.prototype.getCategory=
function(){return this.data.category};p.prototype.setCategory=function(a){return this.data.category=a};p.prototype.getSrc=function(){return this.data.src};p.prototype.setSrc=function(a){this.data.src=a;if(null!=this.data.src&&null==this.data.type)return this.setType(h.getMimeType(this.data.src))};p.prototype.getType=function(){return this.data.type};p.prototype.setType=function(a){this.data.type=a;a=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(a)};p.prototype.getMedium=function(){return this.data.medium};
p.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(B.NAME).setMedium(a)};p.prototype.getMetadata=function(){return this.data.metadata};p.prototype.setMetadata=function(a){return this.data.metadata=a};p.prototype.getSource=function(){return this.data.source};p.prototype.setSource=function(a){var b;if(!(null==a||1>a.length)){this.data.source=a;b=this.facade.retrieveProxy(ba.NAME);a=h.selectSource(a,function(a){return b.canPlayType(a)});if(null!=
(null!=a?a.src:void 0)&&""!==a.src)return this.setSrc(a.src),this.setType(a.type);throw Error("No valid source could be found");}};p.prototype.getTrack=function(){return this.data.track};p.prototype.setTrack=function(a){return this.data.track=a};p.prototype.getTitle=function(){return this.data.title};p.prototype.setTitle=function(a){return this.data.title=a};p.prototype.getWidth=function(){return this.data.width};p.prototype.setWidth=function(a){return this.data.width=a};p.prototype.getHeight=function(){return this.data.height};
p.prototype.setHeight=function(a){return this.data.height=a};p.prototype.getDescription=function(){return this.data.description};p.prototype.setDescription=function(a){return this.data.description=a};p.prototype.getCategory=function(){return this.data.category};p.prototype.setCategory=function(a){return this.data.category=a};p.prototype.getDuration=function(a){return this.data.duration};p.prototype.setDuration=function(a){if(0!==a&&(a!==this.data.duration&&(this.data.duration=a,this.sendNotification(d.DURATION_CHANGE,
a)),Infinity===a))return this.setTemporalType("live")};p.prototype.getPoster=function(a){return this.data.poster};p.prototype.setPoster=function(a){return this.data.poster=a};p.prototype.getIsLive=function(){return this.data.isLive};p.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a};p.prototype.getTemporalType=function(){return this.data.temporalType};p.prototype.setTemporalType=function(a){if(a!==this.data.temporalType)return this.data.temporalType=a,this.sendNotification(d.TEMPORAL_TYPE_CHANGE,
a)};var Wc=function(){Wc.__super__.constructor.call(this)};f(Wc,p);Wc.NAME="MediaProxy";Wc.prototype.setSource=function(a){if(!(null==a||1>a.length))return a=a.filter(function(a){return"external"===a.type}),Wc.__super__.setSource.call(this,a)};var tc=function(a,b,c){tc.__super__.constructor.call(this,a,b,c)};f(tc,ha);tc.prototype.playerType="external";tc.prototype.createAPI=function(){return new Df(this,this.dispatcher)};tc.prototype.createModel=function(){var a;this.registerProxy(new ca(this.config));
this.registerProxy(new B);a=new rb;this.registerProxy(new ba(a));this.registerProxy(new R);this.registerProxy(new D(this.config));this.registerProxy(a);this.registerProxy(new Wc);this.registerProxy(new ab(this.config.params))};tc.prototype.createView=function(){var a,b=this;this.registerMediator(new ja(this.viewComponent,"external"));this.registerMediator(new nb);a=new Db;this.registerMediator(a);k.create(a.viewComponent,k.CLICK,function(){return b.sendNotification(d.TOGGLE_ACTIVE)});this.registerMediator(new bb);
this.registerMediator(new cb);a=document.createElement("div");this.viewComponent.appendChild(a);this.registerMediator(new pb(a))};tc.prototype.createController=function(){this.registerCommand(d.UPDATE_DATA_BINDINGS,rd);this.registerCommand(d.UPDATE_DATA_BINDINGS,sd);this.registerCommand(d.TOGGLE_PLAY_PAUSE,sc);this.registerCommand(C.TOGGLE_PLAY_PAUSE,sc);this.registerCommand(d.PLAY,sc);this.registerCommand(d.CHANGE_PLAY_STATE,nd);this.registerCommand(d.SET_MEDIA,qd);this.registerCommand(d.CHANGE_MEDIA,
od);this.registerCommand(d.MEDIA_CHANGE,pd);this.registerCommand(d.ERROR,td);this.registerCommand(d.READY,ud);this.registerCommand(d.CHANGE_PARAMS,vd)};var uc=function(a){null!=a&&this.decode(a)};uc.decode=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,e,l,d){b[decodeURIComponent(e)]=decodeURIComponent(d)}));return b};uc.encode=function(a){var b,c,e;c=[];for(b in a)e=a[b],c.push(""+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e));return c.join("\x26")};
uc.prototype.decode=function(a){var b,c;if(null!=a)for(b in c=uc.decode(a),c)a=c[b],this[b]=a;return c};uc.prototype.encode=function(){return uc.encode(this)};var qb=function(a){var b;null==a&&(a=this);b={};this.addEventListener=function(a,e){e&&(null==b[a]&&(b[a]=[]),b[a].push(e))};this.dispatchEvent=function(c){var e,l,d,g;l=b[c.type];e=a["on"+c.type];c.target=a;null!=e&&e.apply(this,[c]);if(null!=l)for(d=0,g=l.length;d<g;d++)e=l[d],e.apply(a,[c])};this.removeEventListener=function(a,e){var l,d;
if(a in b&&(l=b[a],d=l.indexOf(e),-1!==d))return l.splice(d,1)}};qb.prototype.addEventListener=function(a,b,c){};qb.prototype.dispatchEvent=function(a){};qb.prototype.removeEventListener=function(a,b,c){};var T=function(){};T.enabled=!1;T.enable=function(a){null==a&&(a=/debug\=true/.test(location.search.toLowerCase()));this.enabled=a;this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){});return a};T.log=function(){try{console.log.apply(console,arguments)}catch(a){}};
T.trace=function(){try{console.trace.apply(console,arguments)}catch(a){}};T.debug=function(){try{console.log.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};T.info=function(){try{console.info.apply(console,arguments)}catch(a){}};T.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};T.error=function(){try{console.error.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};T.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var Hb=
function(){this.item=[];this.metadata={}};Hb.prototype.title=null;Hb.prototype.link=null;Hb.prototype.description=null;Hb.prototype.category=null;Hb.prototype.pubDate=null;Hb.prototype.language=null;Hb.prototype.ttl=null;Hb.prototype.item=null;Hb.prototype.metadata=null;var ka=function(){this.metadata={}};ka.prototype.src=null;ka.prototype.source=null;ka.prototype.title=null;ka.prototype.description=null;ka.prototype.link=null;ka.prototype.guid=null;ka.prototype.pubDate=null;ka.prototype.poster=null;
ka.prototype.thumbnail=null;ka.prototype.embed=null;ka.prototype.category=null;ka.prototype.type=null;ka.prototype.medium=null;ka.prototype.duration=null;ka.prototype.track=null;ka.prototype.metadata=null;ka.prototype.scenes=null;var Gc=function(a,b){var c,e,d=this;this.date=a;this.label=null!=b?b:this.label;Gc.__super__.constructor.call(this);e=null;this.engage=function(a){null==a&&(a=Date.now());a=this.date.getTime()-a;if(0>a)throw Error("Alarm date has past.");if(2147483647<a)throw Error("Invalid alarm date.");
this.disengage();e=setTimeout(c,a)};this.disengage=function(){clearTimeout(e)};c=function(){d.dispatchEvent({type:"alarm",label:d.label})}};f(Gc,qb);Gc.prototype.date=null;Gc.prototype.label="alarm";Gc.prototype.engage=function(a){};Gc.prototype.disengage=function(){};var vc=function(){};vc.prototype.getFeed=function(a,b,c){return h.getJson(a,b,c)};vc.prototype.getMediaNode=function(a,b,c){var e,d,ga,g;null==c&&(c=!0);ga="media-"+b;e=a["media-group"]||a;d=e["media-content"];null!=d&&null!=d[ga]?g=
d[ga]:null!=e[ga]?g=e[ga]:null!=a[ga]?g=a[ga]:null!=a[b]&&c&&(g=a[b]);return g};vc.prototype.createEmbed=function(a){var b,c,e,d,ga,g;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);g=b["media-param"];d=0;for(ga=g.length;d<ga;d++)e=g[d],c.params[e["@attributes"].name]=e["#text"]}catch(f){T.error("[AMP Feed Parse Error] embed parse error: "+
f.message,f)}return c};vc.prototype.createFeed=function(a){var b,c,e,d,f,g,m,h,k;try{if(b=a.channel,c=new Hb,null!=b){c.title=b.title;c.description=b.description;c.language=b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;d=b.item instanceof Array?b.item:[b.item];h=0;for(k=d.length;h<k;h++)e=d[h],g=this.createMedia(e),c.item.push(g);for(f in b)m=b[f],f in c||(c.metadata[f]=m)}}catch(n){T.error("[AMP Feed Parse Error] feed parse error: "+n.message,n)}return c};
vc.prototype.createMedia=function(a){var b,c,e,d,f,g,m,h,k,n,p,q,r,s,t,u,v,y,w;try{m=new ka;g=this.getMediaNode(a,"content");if(g instanceof Array)for(m.source=[],q=0,t=g.length;q<t;q++)e=g[q],k={src:e["@attributes"].url,type:e["@attributes"].type},c=e["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(f=b.label||c["#text"],null!=f&&""!==f&&(null==k.rules&&(k.rules=[]),k.rules.push(f)))),m.source.push(k),m.medium=e["@attributes"].medium,m.duration=
parseFloat(e["@attributes"].duration);else m.type=g["@attributes"].type,m.src=g["@attributes"].url,m.medium=g["@attributes"].medium,m.duration=parseFloat(g["@attributes"].duration);m.guid=a.guid;m.title=this.getMediaNode(a,"title");m.link=a.link;m.description=this.getMediaNode(a,"description");m.pubDate=new Date(Date.parse(a.pubDate));m.thumbnail=m.poster=null!=(y=this.getMediaNode(a,"thumbnail"))?null!=(w=y["@attributes"])?w.url:void 0:void 0;m.embed=this.createEmbed(a);m.scenes=this.getMediaNode(a,
"scenes")["media-scene"];h=this.getMediaNode(a,"status",!1);null!=h&&(m.status={state:h["@attributes"].state,reason:h["@attributes"].reason});m.category=a.category;m.category instanceof Array||(m.category=[m.category]);h=this.getMediaNode(a,"category",!1);if(null!=h)for(r=0,u=h.length;r<u;r++)c=h[r],null!=c["#text"]&&""!==c["#text"]&&m.category.push(c["#text"]);null!=m.category&&m.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});h=this.getMediaNode(a,"subTitle");
if(null!=h)for(null==m.track&&(m.track=[]),h instanceof Array||(h=[h]),s=0,v=h.length;s<v;s++)n=h[s],null!=n["@attributes"]&&m.track.push({src:n["@attributes"].href,type:n["@attributes"].type,kind:"captioning",srclang:n["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);m.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");m.temporalType=m.isLive?"live":"ondemand";for(d in a)p=a[d],d in m||(m.metadata[d]=p)}catch(x){T.error("[AMP Feed Parse Error] media parse error: "+
x.message,x)}return m};var sb=function(a,b,c){var e,d,f,g,m,k=this;this.url=a;null==b&&(b=!0);this.interval=null!=c?c:1E3;sb.__super__.constructor.call(this);f=e=0;m=d=null;this.sync=function(){var a,b=this;a=h.getXHR();a.onreadystatechange=function(c){try{switch(a.readyState){case 1:e=Date.now();break;case 2:if(400<=a.status)throw Error("Sync error ("+a.status+"): "+b.url);Date.now();d=a.getResponseHeader("Date");null!=d?(f=Date.parse(d),b.offset=e-f):b.offset=0;b.dispatchEvent({type:"sync",time:b.now()})}}catch(g){b.offset=
0,b.dispatchEvent({type:"error",error:g,xhr:a})}};a.onerror=function(c){b.offset=0;b.dispatchEvent({type:"error",error:c,xhr:a})};Date.now();a.open("HEAD",this.url,!0);a.send()};this.start=function(){this.stop();this.running=!0;g();m=setInterval(g,this.interval)};this.stop=function(){this.running=!1;clearInterval(m);m=null};g=function(){k.dispatchEvent({type:"tick",time:k.now()})};!0===b&&null!=this.url&&this.sync()};f(sb,qb);sb.prototype.url=null;sb.prototype.interval=1E3;sb.prototype.running=!1;
sb.prototype.offset=0;sb.prototype.now=function(){return Date.now()-this.offset};sb.prototype.sync=function(){};sb.prototype.start=function(){};sb.prototype.stop=function(){};var N=function(a,b){this.type=a;null!=b&&(this.data=b)};N.prototype.type=null;N.prototype.target=null;N.prototype.data=null;var ea=function(){ea.__super__.constructor.call(this,this)};f(ea,qb);ea.prototype.xhr=null;ea.prototype.headers=null;ea.prototype.response=null;ea.prototype.responseXML=null;ea.prototype.responseText=null;
ea.prototype.responseType=null;ea.prototype.withCredentials=!1;ea.prototype.readyState=0;ea.prototype.status=null;ea.prototype.open=function(a,b){var c,e,d=this;try{e=new XMLHttpRequest}catch(f){e=new window.ActiveXObject("Microsoft.XMLHTTP")}ea.isCORS(b)&&(Object.prototype.hasOwnProperty.call(e,"withCredentials")?e.withCredentials=this.withCredentials:"undefined"!==typeof XDomainRequest&&(c=!0,e=new XDomainRequest));if(null!=e){c&&(e.onload=function(a){"function"===typeof e.onreadystatechange&&(e.readyState=
4,e.status=200,e.contentType.match(/\/xml/)&&(e.responseXML=new ActiveXObject("Microsoft.XMLDOM"),e.responseXML.async=!1,e.responseXML.loadXML(e.responseText)),e.onreadystatechange.call(e,a,!1))});e.onreadystatechange=function(a){var b,c;d.readyState=e.readyState;d.dispatchEvent(new N("readystatechange",e));if(4===e.readyState)if(d.status=e.status,199<(b=e.status)&&400>b){null==e.responseText&&(e.responseText=e.text);d.responseText=e.responseText;if(null!=e.responseXML&&0<(null!=(c=e.responseXML.childNodes)?
c.length:void 0))d.response=d.responseXML=e.responseXML,d.responseType="document";else try{d.response=JSON.parse(e.responseText),d.responseType="json"}catch(g){d.response=e.responseText,d.responseType="text"}d.dispatchEvent(new N("load",d))}else 0!==d.status&&d.dispatchEvent(new N("error",d))};try{"undefined"!==typeof e.onerror&&(e.onerror=function(a){d.dispatchEvent(new N("error",d))})}catch(g){}e.open(a,b)}this.xhr=e};ea.prototype.send=function(a){var b,c,e;if(null!=this.headers)for(b in e=this.headers,
e)c=e[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);this.xhr.send(a)};ea.prototype.setRequestHeader=function(a,b){null!=a&&null!=b&&(null==this.headers&&(this.headers={}),this.headers[a]=b)};ea.prototype.setRequestHeaders=function(a){return this.headers=a};ea.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===typeof b.getResponseHeader?b.getResponseHeader(a):void 0:void 0};ea.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===
typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};ea.isCORS=function(a){var b,c;b=document.createElement("a");b.href=a;a=""!==b.hostname?b.hostname:location.hostname;c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===location.port&&"80"===c)};var Hc=function(){};Hc.construct=function(){var a,b,c;c=uc.decode(window.location.search);for(a in c)b=c[a],Hc[a]=b;return!0};
Hc.constructed=Hc.construct();Hc.serialize=function(a,b){var c,e,d,f;d=[];for(e in a)f=a[e],c=b?b+"["+e+"]":e,d.push("object"===typeof f?this.serialize(f,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(f));return d.join("\x26")};var h=function(){};h.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
h.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];h.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml"};h.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",
regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android 4|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};h.getPlaybackMode=function(a){var b;null==a&&(a=(null!=(b=Hc.mode)?b.toLowerCase():void 0)||"auto");if("auto"!==a)return"flash"!==a||this.hasFlash()||(a="none"),a;this.hasFlash()||(a=this.supportsHTML5Video()?"html":"none");"auto"===a&&(a=this.isHTML5()?"html":"flash");return a};h.mergeRules=function(a){var b,c,e;e=[];for(b in a)c=
a[b],e.push(h.rules[b]=c);return e};h.checkRules=function(a){var b,c,e;if(null!=a&&0<a.length)for(c=0,e=a.length;c<e;c++)if(b=a[c],b=h.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;return!1};h.selectSource=function(a,b){var c,e,d;e=0;for(d=a.length;e<d;e++)if(c=a[e],h.checkRules(c.rules))return c;e=0;for(d=a.length;e<d;e++)if(c=a[e],""!==b(c.type||h.getMimeType(c.src)))return c;return null};h.getMimeType=function(a){return this.mimeTypes[h.getFileExtension(a)]};h.selectTrack=
function(a,b){var c,e,d,f;d=0;for(f=a.length;d<f;d++)if(c=a[d],c.kind===b){e=c;break}return e};h.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};h.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};h.isAndroid4=function(){return/Android 4/.test(navigator.userAgent)};h.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};h.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};h.isBlackBerry=
function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};h.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};h.supportsHTML5Video=function(){return null!=document.createElement("video").canPlayType};h.isHTML5=function(){return this.isIOS()||this.isAndroid4()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};h.isIOS=function(){var a;a=/iPad|iPhone|iPod/i;return a.test(navigator.platform)||a.test(navigator.userAgent)};h.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")};
h.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};h.getDevice=function(){var a;a=null;this.isIPhone()?a="iphone":this.isIPad()?a="ipad":/Android/.test(navigator.userAgent)?a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()?a="kindlefire":/Mac|Win32/.test(navigator.platform)&&(a="desktop");return a};h.xmlToJson=function(a){var b,c,e,d,f;e={};9===a.nodeType&&(a=a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(e["@attributes"]={},c=a.attributes,
b=d=0,f=c.length;d<f;b=++d)b=c[b],e["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)e=a.nodeValue;if(a.hasChildNodes())for(f=a.childNodes,b=a=0,d=f.length;a<d;b=++a)if(c=f[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==e[b]?e[b]=c:(e[b]instanceof Array||(e[b]=[e[b]]),e[b].push(c));return e};h.getXHR=function(){return new ea};h.get=function(a,b,c){var e;null==b&&
(b={});null==c&&(c=null);e=h.getXHR();null!=b&&(null!=b.withCredentials&&(e.withCredentials=b.withCredentials),null!=b.onload&&(e.onload=b.onload),null!=b.onerror&&(e.onerror=b.onerror));e.open("GET",a);null!=c&&e.setRequestHeaders(c);e.send();return e};h.send=function(a,b,c,e){var d;null==c&&(c={});null==e&&(e={"Content-Type":"String"});d=h.getXHR();null!=c.onload&&(d.onload=c.onload);null!=c.onerror&&(d.onerror=c.onerror);d.open("POST",a);null!=e&&d.setRequestHeaders(e);d.send(b);return d};h.loadAMPScript=
function(a,b){return this.loadScript(a,b,this.getAMPParent())};h.getAMPParent=function(a,b){var c;c=this.getAMPScriptTag();if(null!=c)return c.parentNode;c=document.getElementsByTagName("head");if(null!=(null!=c?c[0]:void 0))return c[0]};h.getAMPScriptTag=function(){var a,b,c,e;b=document.getElementsByTagName("script");c=0;for(e=b.length;c<e;c++)if(a=b[c],/amp(\..*)?\.js/.test(a.src))return a;return null};h.loadScript=function(a,b,c){var e;c=c||document.getElementsByTagName("head")[0];e=document.createElement("script");
e.type="text/javascript";null!=b&&(e.addEventListener?e.onload=function(a){this.onload=null;b()}:e.readyState&&(e.onreadystatechange=function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,b()}));e.src=a;return c.appendChild(e)};h.loadStyleSheet=function(a){var b,c;b=document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;return b.appendChild(c)};h.read=function(a,b,c,e){var d,f;null==b&&(b=
{});null==c&&(c="");null==e&&(e=[]);try{return f=this.get(a,b,e),d=f.responseText||f.text,c===h.mimeTypes.json?JSON.parse(d):c===h.mimeTypes.xml&&null!=f.responseXML?f.responseXML:d}catch(g){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",g),null}};h.getFileExtension=function(a){return a.split(".").pop().replace(/\?.*/,"")};h.getResponseHeader=function(a,b,c){var e;null==c&&(c={});e=h.getXHR();null!=c.onerror&&(e.onerror=c.onerror);
e.open("HEAD",a,!1);e.send();return e.getResponseHeader(b)};h.getResponseHeaders=function(a,b,c){var e,d,f;null==c&&(c={});e=h.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();c={};if(null==b)return e.getAllResponseHeaders();d=0;for(f=b.length;d<f;d++)a=b[d],c[a]=e.getResponseHeader(a);return c};h.isTouchDevice=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}};h.clamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};h.beacon=function(a){var b;
b=document.getElementById("beaconId");null==b&&(b=document.createElement("img"),b.setAttribute("id","beaconId"),b.setAttribute("height",0),b.setAttribute("width",0),document.body.appendChild(b),b.style.display="none");b.setAttribute("src",a);return b};h.getElementOffset=function(a){var b;b={left:0,top:0};if(a.offsetParent)for(b.left=a.offsetLeft,b.top=a.offsetTop;a=a.offsetParent;)b.left+=a.offsetLeft,b.top+=a.offsetTop;return b};h.override=function(a,b,c){var e;null==c&&(c=!0);if(null==a)return b;
if(null==b)return a;!0===c&&(a=h.clone(a),b=h.clone(b));for(e in b)c=b[e],"object"===typeof c?(null==a[e]&&(a[e]=c instanceof Array?[]:{}),a[e]=h.override(a[e],c,!1)):a[e]=c;return a};h.clone=function(a,b){var c,e,d,f,g,m,h;null==b&&(b=!0);if("object"!==typeof a)c=a;else for(f in c=a instanceof Array?[]:{},a)if(g=a[f],"object"===typeof g&&!0===b)if(g instanceof Array)for(c[f]=[],m=0,h=g.length;m<h;m++)e=g[m],c[f].push(this.clone(e));else for(d in c[f]={},g)e=g[d],c[f][d]=this.clone(e);else c[f]=g;
return c};h.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";c=h.formatZeroFill(a%60);a=parseInt(a/60);c=h.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=h.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};h.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};h.flattenTimecode=function(a,b){var c,e,d;null==b&&(b=30);if(null==a||""===a)return NaN;d=a.split(":");c=0;4===d.length?c=parseInt(d.pop())/b:3===d.length&&(d[2]=d[2].replace(",",
"."),-1!==d[2].indexOf(".")&&(e=d[2].split(".")),1<(null!=e?e.length:void 0)&&(d[2]=e[0],c=parseInt(e[1])/1E3));for(e=parseInt(d.pop());0<d.length;)e+=Math.pow(60,d.length)*parseInt(d.shift());return e+c};h.cacheBust=function(a,b,c){var e;null==b&&(b="cacheBust");null==c&&(c=Date.now());e=-1===a.indexOf("?")?"?":"\x26";return a+e+b+"\x3d"+c};h.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};h.trim=function(a){return a.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")};
h.getJson=function(a,b,c){var e;e=h.getXHR();e.open("GET",a);e.onload=function(a){a="document"===e.responseType?h.xmlToJson(e.responseXML):e.response;"function"===typeof b&&b(a)};e.onerror=function(a){"function"===typeof c&&c(a)};e.send();return e};h.getSource=function(a,b,c){var e;e=h.getPlaybackMode();h.getJson(a,function(a){var c,d;a=(new vc).createFeed(a);0<(null!=a?null!=(d=a.item)?d.length:void 0:void 0)&&(c=function(a){return"flash"===e&&-1!==h.flashTypes.indexOf(a)||"html"===e&&-1===h.flashTypes.indexOf(a)?
"maybe":""},c=h.selectSource(a.item[0].source,c));"function"===typeof b&&b(c)},c)};var na=function(a){na.__super__.constructor.call(this,a)};f(na,y);na.prototype.defaults={mode:"auto",autoHide:3};na.prototype.timeout=null;na.prototype.initializeNotifier=function(a){na.__super__.initializeNotifier.call(this,a);if(null!=this.config.mode)return this.setMode(this.config.mode)};na.prototype.setMode=function(a){if(this.data.mode===a)return a;"auto"===this.data.mode&&this.stop();this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,
"controls-"+this.data.mode);this.data.mode=a;this.facade.sendNotification(d.ADD_APPLICATION_STATE,"controls-"+this.data.mode);return a};na.prototype.getMode=function(){return this.data.mode};na.prototype.setAutoHide=function(a){return this.data.autoHide=a};na.prototype.getAutoHide=function(){return this.data.autoHide};na.prototype.start=function(){var a=this;this.stop();this.timeout=setTimeout(function(){"auto"===a.data.mode&&a.facade.sendNotification(d.CHANGE_ACTIVE_STATE,$a.INACTIVE)},1E3*this.data.autoHide)};
na.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};var Sa=function(a,b,c,e){this.buttonName=a;this.buttonLabel=b;this.onclick=null!=c?c:this.onclick;null==e&&(e="div");"string"===typeof e&&(e=document.createElement(e));Sa.__super__.constructor.call(this,this.constructor.NAME+"-"+this.buttonName,e)};f(Sa,Aa);Sa.NAME="ButtonMediator";Sa.prototype.buttonName=null;Sa.prototype.buttonLabel=null;Sa.prototype.buttonClickHandler=null;Sa.prototype.icon=null;Sa.prototype.label=null;
Sa.prototype.onclick=null;Sa.prototype.onRegister=function(){Sa.__super__.onRegister.call(this);this.classList.add(""+this.buttonName+"-button");this.classList.add("button");this.icon=document.createElement("div");this.classList.add(""+this.buttonName+"-button-icon",this.icon);this.classList.add("button-icon",this.icon);this.classList.add("icon",this.icon);this.viewComponent.appendChild(this.icon);null!=this.buttonLabel&&""!==this.buttonLabel&&(this.label=document.createElement("div"),this.label.textContent=
this.buttonLabel,this.classList.add(""+this.buttonName+"-button-label",this.label),this.classList.add("button-label",this.label),this.classList.add("label",this.label),this.viewComponent.appendChild(this.label));null!=this.buttonClickHandler&&null==this.onclick&&(this.onclick=this.buttonClickHandler.bind(this));null!=this.onclick&&this.viewComponent.addEventListener("click",this.onclick)};var G=function(a,b){this.player=a;this.config=b;G.__super__.constructor.call(this);this.dispatcher=new qb(this)};
f(G,puremvc.Mediator);G.NAME="PluginWrapper";G.prototype.player=null;G.prototype.config=null;G.prototype.dispatcher=null;G.prototype.createFlashVars=null;G.prototype.createXML=null;G.prototype.getAPI=function(){return this};G.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};G.prototype.dispatchEvent=function(a){"timeupdate"!==a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT]",a.type,a.data,
a);a.player=this.player.parent;this.dispatcher.dispatchEvent(a)};G.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};G.prototype.createProperty=function(a,b,c,e){var d;d=a.createElement("property");d.setAttribute("key",b);null!=e&&e.appendChild(d);if(null!=c)if("object"!==typeof c||c instanceof Array)a=F.createTextContent(a,c.toString()),d.appendChild(a);else for(b in c)e=c[b],this.createProperty(a,b,e,d);return d};G.prototype.listNotificationInterests=function(){return[n.CREATE_FLASH_VARS,
n.CREATE_XML]};G.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case n.CREATE_FLASH_VARS:"function"===typeof this.createFlashVars&&this.createFlashVars(a.flashvars);break;case n.CREATE_XML:"function"===typeof this.createXML&&this.createXML(a.xml)}};var ne=function(){ne.__super__.constructor.call(this)};f(ne,puremvc.SimpleCommand);ne.prototype.execute=function(a){this.facade.logger.debug("ControlsPlayCommand");this.facade.retrieveProxy(na.NAME).start()};var oe=
function(){oe.__super__.constructor.call(this)};f(oe,puremvc.SimpleCommand);oe.prototype.execute=function(a){this.facade.logger.debug("ControlsPauseCommand");this.facade.retrieveProxy(na.NAME).stop()};var pe=function(){pe.__super__.constructor.call(this)};f(pe,puremvc.SimpleCommand);pe.prototype.execute=function(a){var b,c;this.facade.logger.debug("ControlsActiveStateChangeCommand");c=this.facade.retrieveProxy(na.NAME);b=this.facade.app.retrieveProxy(B.NAME);a.getBody().newState===$a.ACTIVE&&b.getPlayState()!==
PlayState.READY&&c.start()};var qe=function(){qe.__super__.constructor.call(this)};f(qe,puremvc.SimpleCommand);qe.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakStartCommand");this.facade.app.getVideo().controls=!1};var re=function(){re.__super__.constructor.call(this)};f(re,puremvc.SimpleCommand);re.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakEndCommand");this.facade.app.getVideo().controls=!0};var se=function(){se.__super__.constructor.call(this)};
f(se,puremvc.SimpleCommand);se.prototype.execute=function(a){this.facade.logger.debug("ControlsChangeMediaCommand");a=a.getBody().poster;null!=a&&""!==a&&(this.facade.app.getVideo().poster=a)};var Ca=function(a,b){Ca.__super__.constructor.call(this,a,b)};f(Ca,G);Ca.NAME="ControlsWrapper";Ca.prototype.mode="auto";Ca.prototype.autoHide=5;Ca.prototype.listNotificationInterests=function(){return Ca.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIUM_CHANGE])};Ca.prototype.handleNotification=
function(a){var b;Ca.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case d.MEDIUM_CHANGE:b=/audio/.test(a)?"persistent":this.mode,this.setMode(b)}};Ca.prototype.createFlashVars=function(a){null!=this.config.mode&&(this.mode=a.controls_mode=this.config.mode);return a};Ca.prototype.createXML=function(a){var b,c,e,d,f,g;d=a.getElementsByTagName("view")[0];e=a.getElementsByTagName("element");b=null;f=0;for(g=e.length;f<g;f++)if(c=e[f],"controls"===c.getAttribute("id")){b=
c;break}null==b&&(b=a.createElement("element"),b.setAttribute("id","controls"),d.appendChild(b));null!=b.attributes.autoHideDelay?this.autoHide=b.getAttribute("autoHideDelay"):null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,b.setAttribute("autoHideDelay",this.config.autoHide));return a};Ca.prototype.getMode=function(){return this.mode};Ca.prototype.setMode=function(a){if(a!==this.mode){try{this.mode=a,this.player.video.setPlayerProperty("controlsMode",a)}catch(b){this.facade.logger.error("Controls Error:",
b)}return a}};Ca.prototype.getAutoHide=function(){return this.autoHide};var wc=function(a){wc.__super__.constructor.call(this,this.buttonName,null,null,a)};f(wc,Sa);wc.NAME="FullScreenMediator";wc.prototype.buttonName="full-screen";wc.prototype.buttonClickHandler=function(){event.stopImmediatePropagation();this.sendNotification(d.TOGGLE_FULL_SCREEN);return!1};wc.prototype.listNotificationInterests=function(){return[d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN]};wc.prototype.handleNotification=function(a){var b;
b=a.getName();a.getBody();switch(b){case d.DISABLE_FULL_SCREEN:this.sendNotification(d.ADD_APPLICATION_STATE,"disable-full-screen");break;case d.ENABLE_FULL_SCREEN:this.sendNotification(d.REMOVE_APPLICATION_STATE,"disable-full-screen")}};var O=function(a){O.__super__.constructor.call(this,O.NAME,a)};f(O,Sb);O.NAME="ProgressMediator";O.prototype.bufferValue=null;O.prototype.progressValue=null;O.prototype.scrubber=null;O.prototype.scrubTime=null;O.prototype.scrubTimeSeparator=null;O.prototype.cuePoints=
null;O.prototype.duration=0;O.prototype.scrubbing=!1;O.prototype.value=0;O.prototype.isLive=!1;O.prototype.releaseHandler=null;O.prototype.dragHandler=null;O.prototype.pressHandler=null;O.prototype.onRegister=function(){var a,b=this;O.__super__.onRegister.call(this);this.classList.add("progress");this.bufferValue=document.createElement("div");this.classList.add("buffer-value",this.bufferValue);this.viewComponent.appendChild(this.bufferValue);this.progressValue=document.createElement("div");this.classList.add("progress-value",
this.progressValue);this.viewComponent.appendChild(this.progressValue);a=document.createElement("div");this.classList.add("seek-bar",a);this.viewComponent.appendChild(a);k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();b.setValue(b.calculateValue(a.clientX));return!1});this.cuePoints=document.createElement("div");this.classList.add("cue-points",this.cuePoints);this.viewComponent.appendChild(this.cuePoints);this.scrubTimeSeparator=document.createElement("div");this.classList.add("scrub-time-separator",
this.scrubTimeSeparator);this.viewComponent.appendChild(this.scrubTimeSeparator);this.scrubber=document.createElement("div");this.classList.add("scrubber",this.scrubber);this.viewComponent.appendChild(this.scrubber);this.pressHandler=k.create(this.scrubber,k.PRESS,function(a){b.dragHandler.bind();b.releaseHandler.bind();b.scrubbing=!0;b.classList.add("scrubbing");a.stopImmediatePropagation();return!1});this.releaseHandler=k.create(window,k.RELEASE,function(a){a.stopImmediatePropagation();b.dragHandler.unbind();
b.releaseHandler.unbind();b.setValue(b.value);b.classList.remove("scrubbing");return b.scrubbing=!1});this.releaseHandler.unbind();this.dragHandler=k.create(window,k.MOVE,function(a){a.stopImmediatePropagation();b.updateValue(b.calculateValue(a.clientX?a.clientX:a.targetTouches[0].screenX));return!1});this.dragHandler.unbind();this.scrubTime=document.createElement("div");this.classList.add("scrub-time",this.scrubTime);this.viewComponent.appendChild(this.scrubTime)};O.prototype.listNotificationInterests=
function(){return[d.ENDED,d.MEDIA_CHANGE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PROGRESS,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS]};O.prototype.handleNotification=function(a){var b,c,e,l;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(c);this.bufferValue.style.width="0%";break;case d.TIME_UPDATE:this.scrubbing||this.updateValue(a/this.duration);break;case d.PROGRESS:c=h.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=c+"%";break;
case d.DURATION_CHANGE:this.duration=a;break;case d.ENDED:this.updateValue(1);break;case d.ADD_CUE_POINTS:this.removeCuePoints();e=0;for(l=a.length;e<l;e++)b=a[e],0!==b&&-1!==b&&(c=document.createElement("div"),this.classList.add("cue-point",c),c.style.left=100*(b/this.duration)+"%",this.cuePoints.appendChild(c));break;case d.REMOVE_CUE_POINTS:this.removeCuePoints()}};O.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")};O.prototype.setValue=function(a){this.updateValue(a);
this.sendNotification(C.SEEK,a*this.duration)};O.prototype.updateValue=function(a){!0===this.isLive&&(a=1);this.value=h.clamp(a,0,1);!0===this.scrubbing&&(this.scrubTime.textContent=h.formatTimecode(this.value*this.duration));this.progressValue.style.width=this.scrubber.style.left=this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*this.value).toFixed(2)+"%"};O.prototype.calculateValue=function(a){return h.clamp((a-h.getElementOffset(this.viewComponent).left)/this.viewComponent.offsetWidth,
0,1)};var Ka=function(a){Ka.__super__.constructor.call(this,Ka.NAME,a)};f(Ka,Aa);Ka.NAME="TimeDisplayMediator";Ka.prototype.currentTimeText=null;Ka.prototype.currentTime=0;Ka.prototype.separator=null;Ka.prototype.durationText=null;Ka.prototype.duration=null;Ka.prototype.onRegister=function(){var a;Ka.__super__.onRegister.call(this);this.classList.add("time-display");a=document.createElement("div");this.classList.add("live-display",a);a.textContent=this.localizationManager.getString(w.MSG_LIVE);this.viewComponent.appendChild(a);
this.currentTimeText=document.createElement("div");this.classList.add("current-time-display",this.currentTimeText);this.currentTimeText.textContent="00:00";this.viewComponent.appendChild(this.currentTimeText);this.separator=document.createElement("div");this.classList.add("separator-display",this.separator);this.separator.textContent=" / ";this.viewComponent.appendChild(this.separator);this.durationText=document.createElement("div");this.classList.add("duration-display",this.durationText);this.durationText.textContent=
"00:00";this.viewComponent.appendChild(this.durationText)};Ka.prototype.listNotificationInterests=function(){return[d.TIME_UPDATE,d.DURATION_CHANGE,d.ENDED]};Ka.prototype.handleNotification=function(a){this.facade.retrieveProxy(p.NAME);switch(a.getName()){case d.TIME_UPDATE:this.currentTime=a.getBody();this.currentTimeText.textContent=h.formatTimecode(this.currentTime,this.duration);break;case d.DURATION_CHANGE:this.duration=a.getBody();this.currentTimeText.textContent=h.formatTimecode(this.currentTime,
this.duration);this.durationText.textContent=h.formatTimecode(this.duration);break;case d.ENDED:this.currentTimeText.textContent=this.durationText.textContent=h.formatTimecode(this.duration)}};var Xc=function(a){Xc.__super__.constructor.call(this,this.buttonName,null,null,a)};f(Xc,Sa);Xc.NAME="PlayPauseMediator";Xc.prototype.buttonName="play-pause";Xc.prototype.buttonClickHandler=function(a){a.stopImmediatePropagation();this.sendNotification(C.TOGGLE_PLAY_PAUSE);return!1};var H=function(){H.__super__.constructor.call(this)};
f(H,qb);H.UNINITIALIZED=0;H.LOADING=1;H.LOADED=2;H.AMP_DEFAULTS="amp-defaults";H.getConfigURL=function(){var a;a=h.getAMPScriptTag();return null!=a&&(a=a.src,-1!==a.indexOf("?")&&(a=uc.decode(a),null!=a[this.AMP_DEFAULTS]))?a[this.AMP_DEFAULTS]:null};H.parseModule=function(a){var b,c,e,d;c={};a=a.childNodes;e=0;for(d=a.length;e<d;e++)b=a[e],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=this.parseItem(b));return c};H.parseItem=function(a){var b,c,e,d;b=(""+a.getAttribute("type")).toLowerCase();c=
a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=this.parseModule(a);break;case "array":c=[];b=a.childNodes;e=0;for(d=b.length;e<d;e++)a=b[e],1===a.nodeType&&c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};H.loadHead=function(a,b){var c,e,d,f,g,m,k,n,p,q,r;d=h.getAMPParent();m=function(a){var b;b=document.createElement("script");b.type="text/javascript";b.src=
a;b.addEventListener?b.addEventListener("load",n,!1):b.readyState&&(b.onreadystatechange=n);d.appendChild(b)};n=function(){k++;return k<c?m(p[k]):"function"===typeof b?b():void 0};if(null!=a.links&&0<a.links.length)for(g=a.links,q=0,r=g.length;q<r;q++)f=g[q],e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.href=f,d.appendChild(e);null!=a.scripts&&0<a.scripts.length?(p=a.scripts,k=-1,c=p.length,n()):"function"===typeof b&&b()};H.prototype.url=null;H.prototype.data=null;H.prototype.xml=
null;H.prototype.readyState=H.UNINITIALIZED;H.prototype.loaded=!1;H.prototype.loadURL=function(a,b){var c=this;null==b&&(b=!1);if(null==a&&(a=H.getConfigURL(),null==a))return;this.url=a;this.setReadyState(H.LOADING);h.get(a,{withCredentials:b,onload:function(a){a=a.data;"document"===a.responseType?(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],a=H.parseModule(a)):a=a.response;c.loadModule(a)},onerror:function(a){c.dispatchEvent(new N("error",a));T.error(a)}})};
H.prototype.loadModule=function(a){var b=this;null!=a.head?H.loadHead(a.head,function(){b.loadData(a.config)}):this.loadData(a.config)};H.prototype.loadData=function(a){this.data=a;this.setReadyState(H.LOADED)};H.prototype.load=function(a,b){null==b&&(b=!1);"object"===typeof a?this.loadModule(a):null!=a&&"string"!==typeof a||this.loadURL(a,b)};H.prototype.setReadyState=function(a){this.readyState=a;this.dispatchEvent(new N("readystatechange",a));a!==H.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new N("load",
this.data)))};var Ib=function(a){Ib.__super__.constructor.call(this,Ib.NAME,a)};f(Ib,Eb);Ib.NAME="ControlsMediator";Ib.prototype.controlPanel=null;Ib.prototype.onRegister=function(){var a,b;Ib.__super__.onRegister.call(this);this.classList.add("controls-layer");a=document.createElement("div");this.viewComponent.appendChild(a);this.facade.registerMediator(new Xc(a));a=document.createElement("div");this.viewComponent.appendChild(a);this.facade.registerMediator(new Ka(a));b=document.createElement("div");
this.classList.add("progress-area",b);this.viewComponent.appendChild(b);a=document.createElement("div");b.appendChild(a);this.facade.registerMediator(new O(a));a=document.createElement("div");this.classList.add("separator",a);this.viewComponent.appendChild(a)};Ib.prototype.listNotificationInterests=function(){return[d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,"controlpanelvisibilitychange"]};Ib.prototype.handleNotification=function(a){var b,c,e;c=a.getName();b=a.getBody();switch(c){case d.READY:!1!==(null!=
(e=b.fullscreen)?e.enabled:void 0)&&(b=document.createElement("div"),this.viewComponent.appendChild(b),this.facade.registerMediator(new wc(b)));break;case d.ADD_CONTROL:this.viewComponent.appendChild(b);break;case d.REMOVE_CONTROL:this.viewComponent.appendChild(b);break;case "controlpanelvisibilitychange":a=puremvc.Facade.getInstance(a.getType()),!0===b?(null!=this.controlPanel&&this.controlPanel!==a&&this.controlPanel.sendNotification("controlpanelchangevisibility",!1),this.controlPanel=a):this.controlPanel===
a&&(this.controlPanel=null)}};var Ic=function(a){Ic.__super__.constructor.call(this,a);a=a.retrieveProxy(na.NAME);this.setMode=a.setMode.bind(a);this.getMode=a.getMode.bind(a);this.setAutoHide=a.setAutoHide.bind(a);this.getAutoHide=a.getAutoHide.bind(a)};f(Ic,db);Ic.prototype.setMode=function(a){};Ic.prototype.getMode=function(){};Ic.prototype.setAutoHide=function(a){};Ic.prototype.getAutoHide=function(){};var s=function(a,b,c){var e,d,f,g,m=this;"string"===typeof a&&(a=document.getElementById(a));
e=f=null;d=new qb(this);this.addEventListener=function(a,b,c){d.addEventListener(a,b,c)};this.dispatchEvent=function(a){a.player=this;d.dispatchEvent(a)};this.removeEventListener=function(a,b,c){d.removeEventListener(a,b,c)};null!=c&&this.addEventListener("ready",c);g=function(){var c,g,k;null!=s.defaults.data&&(b=h.override(s.defaults.data,b));m.version=m.getVersion();b.mode=h.getPlaybackMode(b.mode);null==b.version&&(b.version=m.version);null==a.dataset&&(a.dataset={});a.dataset.version=m.version;
T.log(m.version);switch(b.mode){case "html":f=m.createHTMLPlayer(b,a,d);break;case "flash":f=m.createFlashPlayer(b,a,d);break;case "external":f=m.createExternalPlayer(b,a,d);break;case "none":f=m.createInstallPlayer(a)}f.parent=m;e="function"===typeof f.getAPI?f.getAPI():void 0;if(null!=e)for(g in e)c=e[g],null==m[g]&&(m[g]=c);k=f.getModules();for(g in k)c=k[g],e="function"===typeof c.getAPI?c.getAPI():void 0,m[g]=e||c,c="function"===typeof c.getFeatureName?c.getFeatureName():void 0,null!=c&&(m[c]=
m[g]);try{a.amp=m}catch(n){T.error(n)}};this.getVersion=function(){return s.VERSION};T.enable(null!=(null!=b?b.debug:void 0)?b.debug:null);(function(){var a;"string"===typeof b&&(a=h.get(b),b=JSON.parse(a.responseText));s.defaults.readyState!==H.LOADED?(null!=H.getConfigURL()&&s.defaults.readyState===H.UNINITIALIZED&&s.loadDefaults(),s.defaults.addEventListener("load",function(a){g()})):g()})()};s.prototype.createFlashPlayer=function(a,b,c){return new t(a,b,c)};s.prototype.createHTMLPlayer=function(a,
b,c){return new Vb(a,b,c)};s.prototype.createExternalPlayer=function(a,b,c){return new tc(a,b,c)};s.prototype.createInstallPlayer=function(a){return new Af(a)};s.VERSION="AMP Premier v2.0.0052";s.defaults=new H;s.plugins=[];s.loadDefaults=function(a,b){null==b&&(b=!1);this.defaults.load(a,b)};s.getPlaybackMode=function(){return h.getPlaybackMode()};s.registerPlugin=function(a,b,c){var e;null==(e=this.plugins)[a]&&(e[a]={});this.plugins[a][b]=c};var zd=function(){return zd.__super__.constructor.apply(this,
arguments)};f(zd,G);zd.NAME="PlayOverlayWrapper";zd.prototype.createFlashVars=function(a){a.show_play_button_overlay=null!=this.config.enabled?this.config.enabled:!0;return a};s.registerPlugin("playoverlay","flash",zd);var Jc=function(a){Jc.__super__.constructor.call(this,Jc.NAME,a)};f(Jc,da);Jc.NAME="PlayOverlayMediator";Jc.prototype.onRegister=function(){var a=this;k.create(this.viewComponent,k.CLICK,function(b){b.stopImmediatePropagation();b.preventDefault();a.sendNotification(C.TOGGLE_PLAY_PAUSE);
return!1});this.classList.add("play-overlay");return Jc.__super__.onRegister.call(this)};var Ta=function(a){Ta.__super__.constructor.call(this,a)};f(Ta,K);Ta.NAME=y.NAME;Ta.prototype.defaults={config:null,dimensions:null,plugin:{js:"http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js"}};Ta.prototype.initialize=function(){try{window.akamaiSetVideoObject(this.facade.app.getVideo())}catch(a){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",a)}};Ta.prototype.setDimensions=
function(a){var b,c,e;b=this.configurationData.source.dimensions;for(c in a)e=a[c],null!=e&&(b[c]=e);this.configurationData.parse(this.configurationData.source);this.applyDimensions(b);return a};Ta.prototype.applyDimensions=function(a){var b,c;if(null!=window.setAkamaiMediaAnalyticsData)try{for(b in a)c=a[b],setAkamaiMediaAnalyticsData(b,c)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",e)}};Ta.prototype.setMedia=function(a){var b,c;b=null!=(null!=(c=a.mediaanalytics)?
c.dimensions:void 0)?h.override(this.value.dimensions,a.mediaanalytics.dimensions):this.value.dimensions;this.applyDimensions(b);return a};var Da=function(a,b){Da.__super__.constructor.call(this,a,b)};f(Da,S);Da.NAME="ControlsPlugin";Da.prototype.moduleName="controls";Da.prototype.initialize=function(){!0===this.config["native"]?(this.app.getVideo().controls=!0,this.app.sendNotification(d.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(d.CHANGE_MEDIA,se),this.registerCommand(q.BREAK_START,
qe),this.registerCommand(q.BREAK_END,re),this.createAPI=this.createView=function(){}):Da.__super__.initialize.call(this)};Da.prototype.createController=function(){this.registerCommand(d.PLAY,ne);this.registerCommand(d.PAUSE,oe);this.registerCommand(d.ACTIVE_STATE_CHANGE,pe)};Da.prototype.createModel=function(){this.registerProxy(new na(this.config))};Da.prototype.createAPI=function(){return new Ic(this)};Da.prototype.createView=function(){this.registerMediator(new Ib)};Da.prototype.listNotificationInterests=
function(){return[d.MEDIA_CHANGE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PROGRESS,d.ENDED,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN,d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ACTIVE_STATE_CHANGE,d.PLAY,d.PAUSE,q.BREAK_START,q.BREAK_END,d.CHANGE_MEDIA,"controlpanelvisibilitychange"]};Da.prototype.listNotificationPublications=function(){return Da.__super__.listNotificationPublications.call(this).concat([d.CHANGE_ACTIVE_STATE,d.TOGGLE_FULL_SCREEN,C.TOGGLE_PLAY_PAUSE,C.SEEK])};
s.registerPlugin("controls","html",Da);s.registerPlugin("controls","flash",Ca);s.registerPlugin("controls","external",Da);var tb=function(a,b){tb.__super__.constructor.call(this,a,b)};f(tb,G);tb.NAME="MediaAnalyticsWrapper";tb.prototype.listNotificationInterests=function(){return tb.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,"mediaanalytics:setDimensions"])};tb.prototype.createFlashVars=function(a){var b,c,e,d;b=null!=(e=this.player.config)?null!=(d=e.media)?d.mediaanalytics:
void 0:void 0;if(null!=b)for(c in b)e=b[c],a["report_"+c]=e;return a};tb.prototype.createXML=function(a){var b,c,e,d,f;b=a.getElementsByTagName("application")[0];e=a.getElementsByTagName("metrics")[0];null==e&&(e=a.createElement("metrics"),b.appendChild(e));b=a.createElement("vendor");b.setAttribute("id","akamai");e.appendChild(b);null!=this.config.config&&(e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_BEACON"),e.appendChild(F.createTextContent(a,this.config.config)),b.appendChild(e),
f=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),e.appendChild(F.createTextContent(a,f)),b.appendChild(e));if(null!=this.config.dimensions)for(d in c=a.createElement("property"),c.setAttribute("key","dimensions"),b.appendChild(c),f=this.config.dimensions,f)b=f[d],e=a.createElement("property"),e.setAttribute("key",d),e.appendChild(F.createTextContent(a,b)),c.appendChild(e);
return a};tb.prototype.handleNotification=function(a){var b,c,e;tb.__super__.handleNotification.call(this,a);c=a.getName();a=a.getBody();switch(c){case d.MEDIA_CHANGE:if(null!=(null!=(e=a.mediaanalytics)?e.dimensions:void 0))for(b in a.dimensions=[],e=a.mediaanalytics.dimensions,e)c=e[b],a.dimensions.push({key:b,value:c});break;case "mediaanalytics:setDimensions":this.setDimensions(a)}};tb.prototype.setDimensions=function(a){this.player.video.setPlayerProperty("maDimensions",a);return a};var te=function(){te.__super__.constructor.call(this)};
f(te,puremvc.SimpleCommand);te.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsChangeMediaCommand");a=a.getBody();this.facade.retrieveProxy(Ta.NAME).setMedia(a)};var ue=function(){ue.__super__.constructor.call(this)};f(ue,puremvc.SimpleCommand);ue.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdBreakStartCommand");this.facade.app.getVideo().dataset.isad=!0};var ve=function(){ve.__super__.constructor.call(this)};f(ve,puremvc.SimpleCommand);ve.prototype.execute=
function(a){this.facade.logger.debug("MediaAnalyticsAdBreakEndCommand");this.facade.app.getVideo().dataset.isad=!1};var we=function(){we.__super__.constructor.call(this)};f(we,puremvc.SimpleCommand);we.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaAnalyticsAdLoadedCommand");try{c=a.getBody(),b={adDuration:c.duration,adPartnerId:c.partner,adTitle:c.title,adId:c.id},"function"===typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(b)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
e)}};var xe=function(){xe.__super__.constructor.call(this)};f(xe,puremvc.SimpleCommand);xe.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdStartCommand");try{"function"===typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}};var ye=function(){ye.__super__.constructor.call(this)};f(ye,puremvc.SimpleCommand);ye.prototype.execute=function(a){var b;a=a.getBody();a=Math.round(100*(a.currentTime/a.duration));b=
this.facade.retrieveProxy(Ta.NAME);try{25<=a&&25>b.percent?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"===typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):50<=a&&50>b.percent?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"===typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):75<=a&&75>b.percent&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"===typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(c){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
c)}b.percent=a};var ze=function(){ze.__super__.constructor.call(this)};f(ze,puremvc.SimpleCommand);ze.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdEndCommand");try{"function"===typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.facade.app.getVideo().dataset.isad=!0};var Ae=function(){Ae.__super__.constructor.call(this)};f(Ae,puremvc.SimpleCommand);Ae.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsSetDimensionsCommand");
a=a.getBody();this.facade.retrieveProxy(Ta.NAME).setDimensions(a)};var Be=function(a){Be.__super__.constructor.call(this,a);this.setDimensions=function(b){a.retrieveProxy(Ta.NAME).setDimensions(b);return b}};f(Be,db);Be.prototype.setDimensions=function(a){};var Jb=function(a,b){Jb.__super__.constructor.call(this,a,b)};f(Jb,S);Jb.NAME="PlayOverlayPlugin";Jb.prototype.moduleName="playoverlay";Jb.prototype.createModel=function(){};Jb.prototype.createView=function(){this.registerMediator(new Jc)};Jb.prototype.listNotificationPublications=
function(){return Jb.__super__.listNotificationPublications.call(this).concat([C.TOGGLE_PLAY_PAUSE])};s.registerPlugin("playoverlay","html",Jb);s.registerPlugin("playoverlay","external",Jb);var V=function(a,b,c,e){this.url=a;this.interval=null!=b?b:1E4;this.type=null!=c?c:null;this.headers=null!=e?e:null;V.__super__.constructor.call(this)};f(V,qb);V.prototype.timeout=null;V.prototype.interval=null;V.prototype.url=null;V.prototype.lastModified=null;V.prototype.contentLenght=null;V.prototype.data=null;
V.prototype.text=null;V.prototype.type=null;V.prototype.headers=null;V.prototype.useHeadRequest=!0;V.prototype.xhr=null;V.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};V.prototype.poll=function(){var a,b=this;a=h.getXHR();this.useHeadRequest?(a.onload=function(c){var e;304===a.status?b.invoke():(e=a.getResponseHeader("Last-Modified"),c=a.getResponseHeader("Content-Length"),null==e&&null==c||null!=e&&e!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=e,b.contentLength=
c,b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("HEAD",h.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};V.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)};V.prototype.updateData=function(){var a,b=this;a=h.getXHR();a.open("GET",h.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=
function(a){b.error(a)};this.applyHeaders();return a.send()};V.prototype.setText=function(a){var b;if(a!==this.text){b=this.text=a;if(this.type===h.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};V.prototype.setData=function(a){a!==this.data&&(this.data=a,this.dispatchEvent(new N("datachanged",this.data)));return a};V.prototype.error=function(a){T.error(event);this.stop()};V.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},
this.interval)};V.prototype.stop=function(){clearTimeout(this.timeout)};var Yc=function(){return Yc.__super__.constructor.apply(this,arguments)};f(Yc,G);Yc.NAME="EventManagementWrapper";Yc.prototype.createFlashVars=function(a){null!=this.config.enabled&&(a.eventmanagementstates_enabled=this.config.enabled);null!=this.config.url&&(a.eventmanagementstates_status_url=this.config.url);null!=this.config.interval&&(a.eventmanagementstates_status_interval=this.config.interval);return a};Yc.prototype.createXML=
function(a){var b,c,e,d,f,g,m;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("eventmanagementstates");null==c||0===c.length?(c=a.createElement("eventmanagementstates"),b.appendChild(c)):c=c[0];b=a.createElement("states");c.appendChild(b);m=this.config.states;f=0;for(g=m.length;f<g;f++)d=m[f],c=a.createElement("state"),b.appendChild(c),e=a.createElement("property"),e.setAttribute("key","ID"),e.appendChild(F.createTextContent(a,d.id)),c.appendChild(e),e=a.createElement("property"),
e.setAttribute("key","POSTER_SRC"),e.appendChild(F.createTextContent(a,d.poster)),c.appendChild(e),null!=d.url&&(e=a.createElement("property"),e.setAttribute("key","URL"),e.appendChild(F.createTextContent(a,d.url)),c.appendChild(e));return a};var Kb=function(a){Kb.__super__.constructor.call(this,Kb.NAME,a)};f(Kb,da);Kb.NAME="EventManagementMediator";Kb.prototype.poster=null;Kb.prototype.onRegister=function(){this.classList.add("event-management");this.classList.add("hidden");this.poster=document.createElement("img");
this.classList.add("event-poster",this.poster);Kb.__super__.onRegister.call(this)};Kb.prototype.listNotificationInterests=function(){return["eventStateChanged"]};Kb.prototype.handleNotification=function(a){switch(a.getName()){case "eventStateChanged":a=a.getBody(),"on"!==a.id?(null!=a.poster&&(this.poster.src=a.poster,this.viewComponent.appendChild(this.poster)),this.classList.remove("hidden"),this.sendNotification(d.PAUSE),this.sendNotification(d.CHANGE_DISPLAY_STATE,ua.NORMAL)):(this.viewComponent.contains(this.poster)&&
this.viewComponent.removeChild(this.poster),this.classList.add("hidden"))}};var Ce=function(){Ce.__super__.constructor.call(this)};f(Ce,puremvc.SimpleCommand);Ce.prototype.execute=function(a){var b;this.facade.logger.debug("EventManagementPlayCommand");(null!=(b=this.facade.retrieveProxy(la.NAME).getState())?b.id:void 0)!==la.ON.id&&this.sendNotification(d.PAUSE)};var la=function(a){var b=this;la.__super__.constructor.call(this,a);this.poller=new V;this.poller.ondatachanged=function(a){var e,d,f,
g;a=a.data;if("on"===a)e=la.ON;else for(g=b.data.states,d=0,f=g.length;d<f&&(e=g[d],e.id!==a);d++);if(null!=e)return b.setState(e)}};f(la,y);la.NAME=y.NAME;la.ON={id:"on"};la.prototype.defaults={url:null,interval:null,states:null,enabled:!1};la.prototype.poller=null;la.prototype.state=null;la.prototype.initialize=function(){!0===this.data.enabled&&(this.setURL(this.data.url),this.setInterval(this.data.interval),this.poller.start())};la.prototype.setURL=function(a){return this.data.url=this.poller.url=
a};la.prototype.getURL=function(){return this.data.url};la.prototype.getInterval=function(){return this.data.interval};la.prototype.setInterval=function(a){this.data.interval=this.poller.interval=1E3*a;return a};la.prototype.setState=function(a){this.state=a;this.sendNotification("eventStateChanged",a);return a};la.prototype.getState=function(){return this.state};var ub=function(a,b){ub.__super__.constructor.call(this,a,b)};f(ub,S);ub.NAME="MediaAnalyticsPlugin";ub.prototype.moduleName="mediaanalytics";
ub.prototype.createModel=function(){this.registerProxy(new Ta(this.config))};ub.prototype.createController=function(){this.registerCommand(d.MEDIA_CHANGE,te);this.registerCommand(q.BREAK_START,ue);this.registerCommand(q.BREAK_END,ve);this.registerCommand(q.AD_LOADED,we);this.registerCommand(q.AD_STARTED,xe);this.registerCommand(q.AD_TIME_UPDATE,ye);this.registerCommand(q.AD_ENDED,ze);this.registerCommand("mediaanalytics:setDimensions",Ae)};ub.prototype.createAPI=function(){return new Be(this)};ub.prototype.onRegister=
function(){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=this.config.config;ub.__super__.onRegister.call(this)};ub.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE,q.BREAK_START,q.BREAK_END,q.AD_LOADED,q.AD_STARTED,q.AD_TIME_UPDATE,q.AD_ENDED,"mediaanalytics:setDimensions"]};s.registerPlugin("mediaanalytics","html",ub);s.registerPlugin("mediaanalytics","flash",tb);var Zc=function(){return Zc.__super__.constructor.apply(this,arguments)};f(Zc,G);Zc.NAME="BrandingWrapper";Zc.prototype.createFlashVars=
function(a){null!=this.config.id&&(a.branding=this.config.id);return a};Zc.prototype.createXML=function(a){var b,c,e,d,f,g,m,h;if(null!=(null!=(b=this.config)?b.logo:void 0)){b="background-image: url('"+this.config.logo+"');";d=a.getElementsByTagName("element");m=0;for(h=d.length;m<h;m++)e=d[m],f=e.getAttribute("id"),"logo"===f?g=e:"controls"===f&&(c=e);null==g?(g=a.createElement("element"),g.setAttribute("id","logo"),g.setAttribute("style","width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5; "+
b),c.appendChild(g)):(c=g.getAttribute("style"),c=-1!==c.indexOf("background-image:")?c.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"']+/,b):b+c,g.setAttribute("style",c))}return a};var eb=function(a){eb.__super__.constructor.call(this,eb.NAME,a)};f(eb,da);eb.NAME="BrandingMediator";eb.prototype.logo=null;eb.prototype.text=null;eb.prototype.container=null;eb.prototype.onRegister=function(){this.classList.add("branding-overlay");this.container=document.createElement("div");this.classList.add("branding-container",
this.container);this.viewComponent.appendChild(this.container);this.logo=document.createElement("img");this.classList.add("branding-image",this.logo);this.classList.add("hidden",this.logo);this.container.appendChild(this.logo);this.text=document.createElement("div");this.classList.add("branding-text",this.text);this.container.appendChild(this.text);eb.__super__.onRegister.call(this)};eb.prototype.listNotificationInterests=function(){return[d.READY]};eb.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:a=
a.getBody().branding;if(null==a)break;null!=a.logo?(this.logo.src=a.logo,this.classList.remove("hidden",this.logo)):this.classList.add("hidden",this.logo);a=this.config.getDomain();null!=a&&0!==a.indexOf("http")&&(a=location.protocol+"//"+a,this.text.innerHTML='\x3cspan\x3eView all \x3ca href\x3d"'+a+'" target\x3d"'+this.config.getTarget()+'"\x3e'+this.config.getDomain()+"\x3c/a\x3e videos.")}};var Ea=function(a){Ea.__super__.constructor.call(this,a)};f(Ea,y);Ea.NAME=y.NAME;Ea.prototype.defaults=
{id:null,title:null,link:null,logo:null,target:null};Ea.prototype.getID=function(){return this.data.id};Ea.prototype.setID=function(a){return this.data.id=a};Ea.prototype.getTarget=function(){return this.data.target};Ea.prototype.setTarget=function(a){return this.data.target=a};Ea.prototype.getTitle=function(){return this.data.title};Ea.prototype.setTitle=function(a){return this.data.title=a};Ea.prototype.getLink=function(){return this.data.link};Ea.prototype.setLink=function(a){return this.data.link=
a};Ea.prototype.getLogo=function(){return this.data.logo};Ea.prototype.setLogo=function(a){return this.data.logo=a};var fb=function(a,b){fb.__super__.constructor.call(this,a,b)};f(fb,S);fb.NAME="EventManagementPlugin";fb.prototype.moduleName="eventmanagement";fb.prototype.createModel=function(){this.registerProxy(new la(this.config))};fb.prototype.createController=function(){this.registerCommand(d.PLAY,Ce)};fb.prototype.createView=function(){this.registerMediator(new Kb)};fb.prototype.listNotificationInterests=
function(){return[d.PLAY]};fb.prototype.listNotificationPublications=function(){return fb.__super__.listNotificationPublications.call(this).concat([d.CHANGE_DISPLAY_STATE,d.PAUSE,"eventStateChanged"])};fb.prototype.listNotificationEvents=function(){return["eventStateChanged"]};s.registerPlugin("eventmanagement","html",fb);s.registerPlugin("eventmanagement","flash",Yc);var Ua={LOAD_FEED:"loadFeed",FEED_CHANGED:"feedChanged",FEED_LOADED:"feedLoaded"},va=function(a,b){null==b&&(b={});va.__super__.constructor.call(this,
a,b);null!=b.url&&(this.url=b.url);null!=b.data&&(this.data=b.data);this.player.load=function(){}};f(va,G);va.NAME="FeedWrapper";va.prototype.url=null;va.prototype.data=null;va.prototype.updateData=!0;va.prototype.createFlashVars=function(a){null!=this.url&&""!==this.url&&(a.data_feed_url=escape(this.url))};va.prototype.listNotificationInterests=function(){return va.__super__.listNotificationInterests.apply(this,arguments).concat([n.READY,n.FEED_LOADED])};va.prototype.handleNotification=function(a){var b,
c,e=this;va.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case n.FEED_LOADED:!1===this.updateData?this.updateData=!0:this.data=JSON.parse(a);c="loaded";a=this.data;break;case n.READY:null!=this.data&&setTimeout(function(){e.setData(e.data)},25)}null!=c&&this.dispatchEvent(new N(c,a))};va.prototype.setURL=function(a){null!=a&&""!==a&&(this.url=a,this.player.video.playFile(this.url,this.player.getAutoplay()));return a};va.prototype.getURL=function(){return this.url};
va.prototype.setData=function(a){this.data=a;this.updateData=!1;this.player.video.playFile(this.data,this.player.getAutoplay());return a};va.prototype.getData=function(){return this.data};var De=function(){De.__super__.constructor.call(this)};f(De,puremvc.SimpleCommand);De.prototype.execute=function(a){this.facade.logger.debug("LoadFeedCommand",a.getBody());this.facade.retrieveProxy(wa.NAME).setURL(a.getBody())};var Ee=function(){Ee.__super__.constructor.call(this)};f(Ee,puremvc.SimpleCommand);Ee.prototype.execute=
function(a){this.facade.logger.debug("ChangeFeedCommand",a.getBody());this.facade.retrieveProxy(wa.NAME).setFeedData(a.getBody())};var Fe=function(){Fe.__super__.constructor.call(this)};f(Fe,puremvc.SimpleCommand);Fe.prototype.execute=function(a){this.facade.logger.debug("FeedChangedCommand",a.getBody());this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.READY);a=a.getBody().item[0];this.facade.app.sendNotification(d.SET_MEDIA,a)};var Ge=function(){Ge.__super__.constructor.call(this)};
f(Ge,puremvc.SimpleCommand);Ge.prototype.execute=function(a){this.facade.logger.debug("FeedInitializedCommand");this.facade.retrieveProxy(wa.NAME).invoke()};var Kc=function(a){var b;Kc.__super__.constructor.call(this,a);b=a.retrieveProxy(wa.NAME);this.setURL=function(b){a.sendNotification(Ua.LOAD_FEED,b);return b};this.getURL=b.getURL.bind(b);this.setData=function(b){a.sendNotification(Ua.CHANGE_FEED,b);return b};this.getData=b.getFeedData.bind(b)};f(Kc,db);Kc.prototype.setURL=function(a){};Kc.prototype.getURL=
function(){};Kc.prototype.setData=function(a){};Kc.prototype.getData=function(){};var wa=function(a){wa.__super__.constructor.call(this,a);this.helper=new vc};f(wa,y);wa.NAME=y.NAME;wa.prototype.defaults={url:null,data:null};wa.prototype.feed=null;wa.prototype.helper=null;wa.prototype.setURL=function(a){var b=this;this.data.url=a;this.helper.getFeed(a,function(a){b.sendNotification(Ua.CHANGE_FEED,a)});return a};wa.prototype.getURL=function(){return this.data.url};wa.prototype.setFeedData=function(a){this.data.data=
a;this.feed=this.helper.createFeed(a);this.sendNotification(Ua.FEED_CHANGED,this.feed);this.sendNotification(d.DISPATCH_EVENT,new N("loaded",a));return a};wa.prototype.getFeedData=function(){return this.data.data};wa.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(Ua.LOAD_FEED,this.data.url):null!=this.data.data&&this.sendNotification(Ua.CHANGE_FEED,this.data.data)};var vb=function(a,b){vb.__super__.constructor.call(this,a,b)};f(vb,S);vb.NAME="BrandingPlugin";
vb.prototype.moduleName="branding";vb.prototype.createModel=function(){this.registerProxy(new Ea(this.config))};vb.prototype.createView=function(){this.registerMediator(new eb)};vb.prototype.onRegister=function(){null!=this.config.id&&this.sendNotification(d.ADD_APPLICATION_STATE,"branding-"+this.config.id);vb.__super__.onRegister.call(this)};vb.prototype.listNotificationInterests=function(){return[d.READY]};s.registerPlugin("branding","html",vb);s.registerPlugin("branding","flash",Zc);s.registerPlugin("branding",
"external",vb);var Fa=function(a,b){Fa.__super__.constructor.call(this,a,b)};f(Fa,S);Fa.NAME="Feature";Fa.prototype.featureName=null;Fa.prototype.getFeatureName=function(){return this.featureName};Fa.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.app.sendNotification("registerfeature",this)};Fa.prototype.onRegister=function(){this.registerFeature();Fa.__super__.onRegister.call(this)};Fa.prototype.listNotificationPublications=function(){return Fa.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};
var Va=function(a,b){Va.__super__.constructor.call(this,a,b)};f(Va,S);Va.NAME="FeedPlugin";Va.prototype.moduleName="feed";Va.prototype.createModel=function(){this.registerProxy(new wa(this.config))};Va.prototype.createController=function(){Va.__super__.createController.call(this);this.registerCommand(d.READY,Ge);this.registerCommand(Ua.LOAD_FEED,De);this.registerCommand(Ua.CHANGE_FEED,Ee);this.registerCommand(Ua.FEED_CHANGED,Fe)};Va.prototype.createAPI=function(){return new Kc(this)};Va.prototype.listNotificationInterests=
function(){return Va.__super__.listNotificationInterests.call(this).concat([d.READY])};Va.prototype.listNotificationPublications=function(){var a,b;return Va.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in Ua)b=Ua[a],c.push(b);return c}())};s.registerPlugin("feed","html",Va);s.registerPlugin("feed","flash",va);var xc=function(a,b){null==b&&(b=constructor.NAME);xc.__super__.constructor.call(this,a,b)};f(xc,rc);xc.NAME="AdDispatcher";xc.prototype.getType=function(a){return xc.__super__.getType.call(this,
a.replace(/^ad/,""))};xc.prototype.getMessage=function(a){if("timeupdate"!==a.type&&"timeremaining"!==a.type)return xc.__super__.getMessage.call(this,a)};var Ga=function(a){Ga.__super__.constructor.call(this,Ga.NAME,a)};f(Ga,da);Ga.prototype.duration=null;Ga.prototype.currentTime=null;Ga.prototype.container=null;Ga.prototype.banner=null;Ga.prototype.text=null;Ga.prototype.bg=null;Ga.NAME="AdMediator";Ga.prototype.onRegister=function(){this.classList.add("ads");this.container=document.createElement("div");
this.classList.add("ad-container",this.container);this.viewComponent.container=this.container;this.viewComponent.appendChild(this.container);this.banner=document.createElement("div");this.classList.add("ad-banner",this.banner);this.viewComponent.appendChild(this.banner);this.bg=document.createElement("div");this.classList.add("ad-text-bg",this.bg);this.banner.appendChild(this.bg);this.text=document.createElement("div");this.classList.add("ad-text",this.text);this.banner.appendChild(this.text);Ga.__super__.onRegister.call(this);
this.sendNotification(q.AD_CONTAINER_CREATED,this.viewComponent);this.facade.setViewComponent(this.viewComponent)};Ga.prototype.listNotificationInterests=function(){return[q.BREAK_END,q.AD_TIME_REMAINING]};Ga.prototype.handleNotification=function(a){switch(a.getName()){case q.BREAK_END:this.text.textContent="";break;case q.AD_TIME_REMAINING:a=a.getBody(),a=0<a?"Video will resume in "+h.formatTimecode(a):"",this.text.textContent=a}};var He=function(){He.__super__.constructor.call(this)};f(He,Ba);He.prototype.execute=
function(a){this.facade.logger.debug("AdMediaChangeCommand");!1!==this.ads.getEnabled()&&(a=a.getBody(),this.ads.setLoadedMetadata(!1),this.ads.engage(a))};var Ie=function(){Ie.__super__.constructor.call(this)};f(Ie,Ba);Ie.prototype.execute=function(a){this.facade.logger.debug("AdLoadedCommand");this.sendNotification(d.UPDATE_DATA_BINDINGS,{contexts:[this.ads.getContextName()]})};var Je=function(){Je.__super__.constructor.call(this)};f(Je,Ba);Je.prototype.execute=function(a){this.facade.logger.debug("AdBreakStartCommand");
this.facade.app.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");this.facade.app.sendNotification(d.DISABLE_FULL_SCREEN);this.ads.breakStart()};var Ke=function(){Ke.__super__.constructor.call(this)};f(Ke,Ba);Ke.prototype.execute=function(a){this.facade.logger.debug("AdBreakEndCommand");this.ads.breakEnd();this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");this.facade.app.sendNotification(d.ENABLE_FULL_SCREEN)};var Le=function(){Le.__super__.constructor.call(this)};f(Le,Ba);
Le.prototype.execute=function(a){this.facade.logger.debug("AdLoadedMetadataCommand");this.ads.setLoadedMetadata(!0)};var Wa=function(a,b,c,e,d,f,g,m,h){this.id=a;this.title=b;this.duration=c;this.position=e;this.type=d;this.partner=f;this.advertiser=g;this.companions=m;this.metadata=h};Wa.prototype.id=null;Wa.prototype.title=null;Wa.prototype.duration=NaN;Wa.prototype.position=NaN;Wa.prototype.type=null;Wa.prototype.partner=null;Wa.prototype.advertiser=null;Wa.prototype.companions=null;Wa.prototype.metadata=
null;var yc=function(a){Za.attachModuleDispatcher(a,new xc(this));this.getConfig=function(){return plugin.getConfig()};a=a.retrieveProxy(x.NAME);this.setEnabled=a.setEnabled.bind(a);this.getEnabled=a.getEnabled.bind(a);this.getInProgress=a.getInProgress.bind(a);this.getStarted=a.getStarted.bind(a);this.getPaused=a.getPaused.bind(a);this.getCompanions=a.getCompanions.bind(a)};f(yc,db);yc.prototype.setEnabled=function(a){};yc.prototype.getEnabled=function(){};yc.prototype.getInProgress=function(){};
yc.prototype.getStarted=function(){};yc.prototype.getPaused=function(){};yc.prototype.getCompanions=function(){};var W=function(a){W.__super__.constructor.call(this,a)};f(W,x);W.NAME=x.NAME;W.prototype.defaults={plugin:null,videoId:null,defaultId:null,domain:null,zoneId:null,companion:null,userData:null,params:null};W.prototype.key="auditude";W.prototype.session=null;W.prototype.options=null;W.prototype.initialize=function(){var a=this;this.options={controls:!1,auditudeHandlesChapterBreaks:!1,style:{backgroundColor:"#000",
width:this.facade.app.video.clientWidth,height:this.facade.app.video.clientHeight},handlers:{play:function(){a.facade.logger.debug("ad play")},timeupdate:function(b,e,d){a.facade.sendNotification(q.AD_TIME_REMAINING,d.duration-d.currentTime)},error:function(b){a.facade.logger.debug("ad error:",b);a.error()},pause:function(){a.facade.logger.debug("ad pause")},loadedmetadata:function(b,e,d){a.facade.logger.debug("ad loadedmetadata")},end:function(){a.facade.logger.debug("ad end")}}};try{this.plugin=
this.createPlugin(),this.plugin.subscribe(aud.events.init_complete,function(b,e){a.facade.logger.debug("init_complete:",b,e);try{a.plugin.publish(aud.notifications.break_begin)}catch(d){a.error(d)}}),this.plugin.subscribe(aud.events.init_failed,function(b,e){a.error(b)}),this.plugin.subscribe(aud.events.break_begin,function(b,e){a.facade.logger.debug("break_begin:",b,e);a.sendNotification(q.BREAK_START)}),this.plugin.subscribe(aud.events.pause_playback,function(b,e){a.facade.logger.debug("pause_playback: "+
b+", "+e);a.contentPause(b,e)}),this.plugin.subscribe(aud.events.resume_playback,function(b,e){a.facade.logger.debug("resume_playback: ",b,e);a.contentPlay(b,e)}),this.plugin.subscribe(aud.events.linear_ad_begin,function(b,e,l){var f,g;a.facade.logger.debug("linear ad begin:",b,e,l);b=e._xmlDoc.querySelector("ad[id]");null!=b&&(f=b.getAttribute("id"));b=e._xmlDoc.querySelector("inLine[adTitle]");null!=b&&(g=b.getAttribute("adTitle"));a.adVO=new Wa(f,g,l.asset.duration,1,"preroll","auditude",null,
l.banners,l);a.sendNotification(q.AD_LOADED,a.adVO);a.sendNotification(q.AD_DURATION_CHANGE,a.adVO);a.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PLAYING);a.sendNotification(q.AD_PLAY);a.setInProgress(!0);a.setCompanions(l.banners);a.session=l.session;a.sendNotification(q.AD_STARTED)}),this.plugin.subscribe(aud.events.linear_ad_end,function(b,e,d){a.facade.logger.debug("linear ad end:",b,e,d);a.sendNotification(q.AD_ENDED)}),this.plugin.subscribe(aud.events.break_end,function(b,e){a.facade.logger.debug("break_end:",
b,e);a.sendNotification(q.BREAK_END)}),this.plugin.subscribe(aud.events.non_linear_ad_begin,function(b,e,d){a.facade.logger.debug("non linear ad begin");a.setCompanions(d.banners)}),this.plugin.subscribe(aud.events.non_linear_ad_end,function(b,e,d){a.facade.logger.debug("non linear ad end")})}catch(b){this.error(b)}};W.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.container.container,null,this.value.domain,this.value.zoneId,this.options)};W.prototype.start=function(){var a,
b,c,e,d,f,g;if(!1===W.__super__.start.call(this))return!1;try{e=this.value.params||{};d="";if(null!=this.value.userData)for(c in g=this.value.userData,g)f=g[c],d+=""+c+"\x3d"+f+";";null!=e.userData&&(d+=e.userData);""!==d&&(e.userData=d);b=this.value.videoId+"";null!=this.value.defaultId&&(a=this.value.defaultId+"",b=null!=b?[b,a]:a);this.facade.logger.log("Auditude init: ",b,e);this.plugin.init(b,e)}catch(m){this.error(m)}};W.prototype.play=function(){W.__super__.play.call(this);this.session.notifyResume()};
W.prototype.pause=function(){W.__super__.pause.call(this);this.session.notifyPause()};W.prototype.breakStart=function(){};W.prototype.setCompanions=function(a){var b,c,e,d,f;if(!(null==a||1>a.length)){c=[];e=0;for(d=a.length;e<d;e++)b=a[e],c.push({data:b.data,type:b.resourceType,width:parseInt(b.width),height:parseInt(b.height),metadata:b});W.__super__.setCompanions.call(this,c);if(null!=this.value.companion&&(c=this.value.companion,e=document.getElementById(c.id),null!=e))for(d=0,f=a.length;d<f;d++)if(b=
a[d],c.width===parseInt(b.width)&&c.height===parseInt(b.height)){e.innerHTML=b.data;break}}};W.prototype.contentStarted=function(){this.plugin.publish(aud.notifications.video_playback_started)};W.prototype.contentEnded=function(){this.plugin.publish(aud.notifications.video_playback_complete)};var La=function(a){La.__super__.constructor.call(this,a)};f(La,W);La.NAME=W.NAME;La.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.app.video,null,this.value.domain,this.value.zoneId,
this.options)};La.prototype.engage=function(a){La.__super__.engage.call(this,a);this.sendNotification(d.DISABLE_VIDEO_EVENTS,["ended"])};La.prototype.reset=function(a){La.__super__.reset.call(this,a);this.sendNotification(d.ENABLE_VIDEO_EVENTS,["ended"])};La.prototype.play=function(){La.__super__.play.call(this);this.facade.app.video.play()};La.prototype.pause=function(){La.__super__.pause.call(this);this.facade.app.video.pause()};La.prototype.contentPause=function(){this.facade.app.video.pause()};
var Q=function(a,b){Q.__super__.constructor.call(this,a,b)};f(Q,G);Q.NAME="AdWrapper";Q.prototype.enabled=!0;Q.prototype.paused=!1;Q.prototype.started=!1;Q.prototype.adVO=null;Q.prototype.getFeatureName=function(){return"ads"};Q.prototype.getInProgress=function(){return this.player.video.getPlayerProperty("adInProgress")};Q.prototype.getStarted=function(){return this.started};Q.prototype.getPaused=function(){return this.paused};Q.prototype.getCompanions=function(){var a;return null!=(a=this.adVO)?
a.companions:void 0};Q.prototype.setEnabled=function(a){this.enabled=a;this.player.video.setPlayerProperty("adsEnabled",a);return a};Q.prototype.getEnabled=function(){return this.enabled};Q.prototype.enable=function(){this.setEnabled(!0)};Q.prototype.disable=function(){this.setEnabled(!1)};Q.prototype.createFlashVars=function(a){a.core_ads_enabled=!0;return a};Q.prototype.listNotificationInterests=function(){return Q.__super__.listNotificationInterests.call(this).concat("adComponentBreakInitiated adComponentBreakComplete adComponentLoaded adComponentInitFailed adComponentAdBegin adComponentPlaybackProgress adComponentTimeElapsed adComponentPlaybackFailed adComponentPlaybackTerminated adComponentAdComplete adComponentMediaLoaded adComponentClicked adComponentCompanion adComponentPlaybackPaused adComponentPlaybackResumed adComponentLog".split(" "))};
Q.prototype.handleNotification=function(a){var b,c,e;Q.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();this.adVO=this.createAdVO(a);c=this;switch(b){case "adComponentBreakInitiated":e="breakstart";break;case "adComponentBreakComplete":e="breakend";break;case "adComponentLoaded":case "adComponentMediaLoaded":e="loaded";this.start=!1;break;case "adComponentAdBegin":e="started";this.started=!0;this.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");break;case "adComponentPlaybackProgress":case "adComponentTimeElapsed":e=
"timeupdate";break;case "adComponentInitFailed":case "adComponentPlaybackFailed":e="error";this.start=!1;this.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");break;case "adComponentAdComplete":case "adComponentPlaybackTerminated":e="ended";this.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");break;case "adComponentClicked":e="clicked";break;case "adComponentCompanion":e="companion";this.adVO.companions=a;break;case "adComponentPlaybackPaused":e="pause";c=this.player.getAPI();this.paused=
!0;this.player.setPlayState("paused");break;case "adComponentPlaybackResumed":e="playing";c=this.player.getAPI();this.paused=!0;this.player.setPlayState("playing");c.dispatchEvent(new N("play",a));break;case "adComponentLog":c.dispatchEvent(new N("adComponentLog",a)),e="log"}null!=e&&c.dispatchEvent(new N(e,this.adVO))};Q.prototype.createAdVO=function(a){return null==a?null:new Wa(a.id,a.title,a.duration,a.podIndex,a.podPosition,a.adPlatform,null,null,a)};var $c=function(){return $c.__super__.constructor.apply(this,
arguments)};f($c,Q);$c.NAME="AuditudeWrapper";$c.prototype.createFlashVars=function(a){null!=this.config.companion&&(a.ad_partner_companion_size=""+this.config.companion.width+"x"+this.config.companion.height);return a};$c.prototype.createXML=function(a){var b,c,e,d,f,g,m;c=a.getElementsByTagName("application")[0];b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","auditude");b.appendChild(c);e=[{value:this.config.domain,
key:"AUDITUDE_DOMAIN"},{value:this.config.videoId,key:"AUDITUDE_MEDIA_ID"},{value:this.config.defaultId,key:"AUDITUDE_DEFAULT_MEDIA_ID"},{value:this.config.zoneId,key:"AUDITUDE_ZONE_ID"},{value:this.config.prerollId,key:"AUDITUDE_PREROLL_MEDIA_ID"},{value:this.config.midrollId,key:"AUDITUDE_MIDROLL_MEDIA_ID"},{value:this.config.audienceManagerURL,key:"AUDITUDE_AUDIENCE_MGR_URL"},{value:this.config.version,key:"AUDITUDE_VERSION"}];d=0;for(f=e.length;d<f;d++)b=e[d],null!=b.value&&this.createProperty(a,
b.key,b.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);if(null!=this.config.companions){e=[];d=[];m=this.config.companions;f=0;for(g=m.length;f<g;f++)b=m[f],e.push(b.width+"x"+b.height),d.push(b.id);this.createProperty(a,"AUDITUDE_COMPANION_SIZE",e.join(","),c);this.createProperty(a,"AUDITUDE_COMPANION_ID",e.join(","),c)}null!=this.config.params&&this.createProperty(a,"AUDITUDE_PARAMS",this.config.params,c);null!=this.config.userData&&this.createProperty(a,"AUDITUDE_USER_DATA",
this.config.userData,c);return a};var Z=function(a,b){Z.__super__.constructor.call(this,a,b)};f(Z,Fa);Z.NAME="AdPlugin";Z.prototype.container=null;Z.prototype.featureName="ads";Z.prototype.createModel=function(){this.isFullscreenDevice()?this.registerProxy(this.createFullscreenProxy()):this.registerProxy(this.createProxy())};Z.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,He);this.registerCommand(d.LOADED_METADATA,Le);this.registerCommand(q.BREAK_START,Je);this.registerCommand(q.AD_LOADED,
Ie);this.registerCommand(q.BREAK_END,Ke)};Z.prototype.createView=function(){return this.registerMediator(new Ga)};Z.prototype.createAPI=function(){return this.api=new yc(this)};Z.prototype.isFullscreenDevice=function(){return h.isFullscreenDevice()};Z.prototype.createProxy=function(){};Z.prototype.createFullscreenProxy=function(){};Z.prototype.registered=function(){Z.__super__.registered.call(this);this.app.retrieveProxy(R.NAME).registerContext(this.retrieveProxy(x.NAME))};Z.prototype.listNotificationInterests=
function(){return[d.CHANGE_MEDIA,d.LOADED_METADATA,d.PLAY,d.PAUSE,d.START,d.TOGGLE_PLAY_PAUSE,d.STARTED,d.ENDED,d.READY,C.PLAY,C.PAUSE,C.TOGGLE_PLAY_PAUSE]};Z.prototype.listNotificationPublications=function(){var a,b;return Z.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in q)b=q[a],c.push(b);return c}()).concat([d.PLAY_REQUEST,d.DISABLE_VIDEO_EVENTS,d.ENABLE_VIDEO_EVENTS,d.UPDATE_DATA_BINDINGS])};Z.prototype.listNotificationEvents=function(){var a,b;return Z.__super__.listNotificationEvents.call(this).concat(function(){var c;
c=[];for(a in q)b=q[a],c.push(b);return c}())};var gb={TIME_UPDATE:"autoadvancetimeupdate",START:"autoadvancestart",STOP:"autoadvancestop",ADVANCE:"autoadvanceadvance"},hb=function(a,b){null==b&&(b={});hb.__super__.constructor.call(this,a,b);null!=b.interval&&(this.interval=b.interval);null!=b.handler&&(this.handler=b.handler)};f(hb,G);hb.NAME="AutoAdvanceWrapper";hb.prototype.interval=null;hb.prototype.handler=null;hb.prototype.getInterval=function(){return this.interval};hb.prototype.setInterval=
function(a){return this.interval=a};hb.prototype.getHandler=function(){return this.handler};hb.prototype.setHandler=function(a){return this.handler=a};hb.prototype.listNotificationInterests=function(){return[n.CREATE_FLASH_VARS,n.AUTO_ADVANCE]};hb.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case n.CREATE_FLASH_VARS:b=a.flashvars;null!=this.interval&&(b.next_video_timer=this.interval,b.auto_play_list=!0);break;case n.AUTO_ADVANCE:"function"===typeof(e=this.config).handler&&
e.handler(),c="advance"}null!=c&&this.dispatchEvent(new N(c))};var Ma=function(a){Ma.__super__.constructor.call(this,a)};f(Ma,y);Ma.NAME=y.NAME;Ma.prototype.defaults={interval:15,handler:null};Ma.prototype.currentTime=0;Ma.prototype.timeout=null;Ma.prototype.start=function(){var a=this;this.currentTime=this.data.interval;this.timeout=setInterval(function(){a.updateTime()},1E3);this.sendNotification(gb.TIME_UPDATE,this.currentTime)};Ma.prototype.stop=function(){clearInterval(this.timeout)};Ma.prototype.updateTime=
function(){this.currentTime--;this.sendNotification(gb.TIME_UPDATE,this.currentTime);0>=this.currentTime&&(this.stop(),this.sendNotification(gb.ADVANCE,this.data.handler))};var Me=function(){Me.__super__.constructor.call(this)};f(Me,puremvc.SimpleCommand);Me.prototype.execute=function(a){this.sendNotification(d.ADD_APPLICATION_STATE,"autoadvance-mode");this.facade.retrieveProxy(Ma.NAME).start()};var Ne=function(){Ne.__super__.constructor.call(this)};f(Ne,puremvc.SimpleCommand);Ne.prototype.execute=
function(a){this.facade.retrieveProxy(Ma.NAME);a=a.getBody();null!=a&&("string"===typeof a?eval(""+a+"()"):"function"===typeof a&&a());this.sendNotification(d.REMOVE_APPLICATION_STATE,"autoadvance-mode")};var Oe=function(){Oe.__super__.constructor.call(this)};f(Oe,puremvc.SimpleCommand);Oe.prototype.execute=function(a){null!=this.facade.retrieveProxy(Ma.NAME).getData().interval&&this.sendNotification(gb.START)};var Lc=function(){Lc.__super__.constructor.call(this)};f(Lc,puremvc.SimpleCommand);Lc.prototype.execute=
function(a){this.facade.retrieveProxy(Ma.NAME).stop()};var Lb=function(a,b,c,e,d,f,g,m,h){this.guid=a;this.link=b;this.title=c;this.description=e;this.thumbnail=d;this.duration=f;this.pubDate=g;this.target=m;this.metadata=null!=h?h:{}};Lb.prototype.guid=null;Lb.prototype.link=null;Lb.prototype.title=null;Lb.prototype.description=null;Lb.prototype.thumbnail=null;Lb.prototype.duration=null;Lb.prototype.pubDate=null;Lb.prototype.target=null;Lb.prototype.metadata=null;var ib={RECOMMENDATIONS_LOADED:"recommendationsloaded",
RECOMMENDATION_SELECTED:"recommendationsselected"},Mb=function(a){Mb.__super__.constructor.call(this,Mb.NAME,a)};f(Mb,da);Mb.NAME="AutoAdvanceMediator";Mb.prototype.text=null;Mb.prototype.onRegister=function(){this.classList.add("autoadvance");this.text=document.createElement("div");this.classList.add("autoadvance-text",this.text);this.viewComponent.appendChild(this.text);Mb.__super__.onRegister.call(this)};Mb.prototype.listNotificationInterests=function(){return[gb.TIME_UPDATE]};Mb.prototype.handleNotification=
function(a){switch(a.getName()){case gb.TIME_UPDATE:a=a.getBody(),this.text.textContent=""+this.localizationManager.getString("MSG_NEXT_VIDEO")+" "+a+" "+this.localizationManager.getString("MSG_SECONDS")}};var ia=function(a,b){null==b&&(b={});ia.__super__.constructor.call(this,a,b);null!=b.url&&(this.url=b.url);null!=b.target&&(this.target=b.target)};f(ia,G);ia.NAME="RecommendationsWrapper";ia.prototype.url=null;ia.prototype.target=null;ia.prototype.recommendations=null;ia.prototype.getFeatureName=
function(){return"recommendations"};ia.prototype.getData=function(){return this.recommendations};ia.prototype.setData=function(a){return this.recommendations=a};ia.prototype.getTarget=function(){var a,b;return this.target||(null!=(a=this.player)?null!=(b=a.config)?b.target:void 0:void 0)};ia.prototype.getURL=function(){return this.url};ia.prototype.createFlashVars=function(a){a.recommendations_partner="mrss";null!=this.config.target&&(a.external_target=this.config.target)};ia.prototype.createXML=
function(a){var b,c;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("recommendations")[0];null==c&&(c=a.createElement("recommendations"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","mrss");c.appendChild(b);this.createProperty(a,"RECOMMENDATIONS_MRSS_URL",this.url,b)};ia.prototype.listNotificationInterests=function(){return ia.__super__.listNotificationInterests.apply(this,arguments).concat([n.RECOMMENDATION_SELECTED,n.RECOMMENDATIONS_LOADED])};ia.prototype.handleNotification=
function(a){var b,c;ia.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case n.RECOMMENDATIONS_LOADED:c="loaded";this.recommendations=a;break;case n.RECOMMENDATION_SELECTED:c="selected"}null!=c&&this.dispatchEvent(new N(c,a))};var wb=function(a){wb.__super__.constructor.call(this,wb.NAME,a)};f(wb,da);wb.NAME="RecommendationsMediator";wb.prototype.list=null;wb.prototype.onRegister=function(){var a;this.classList.add("recommendations");a=document.createElement("div");
this.classList.add("recommendations-label",a);a.textContent="Recommended";this.viewComponent.appendChild(a);a=document.createElement("div");this.classList.add("recommendations-list-area",a);this.viewComponent.appendChild(a);this.list=document.createElement("ul");this.classList.add("recommendations-list",this.list);a.appendChild(this.list);wb.__super__.onRegister.call(this)};wb.prototype.listNotificationInterests=function(){return[ib.RECOMMENDATIONS_LOADED]};wb.prototype.handleNotification=function(a){var b,
c,e;switch(a.getName()){case ib.RECOMMENDATIONS_LOADED:if(this.list.innerHTML="",b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a)}};wb.prototype.addElement=function(a){var b,c=this;b=document.createElement("li");null==b.dataset&&(b.dataset={});b.dataset.link=a.link;b.dataset.target=a.target;this.classList.add("recommendation",b);b.innerHTML="\x3cimg src\x3d'"+a.thumbnail+"' class\x3d'"+this.cssPrefix+"recommendation-thumbnail' /\x3e \x3cspan class\x3d'"+this.cssPrefix+
"recommendation-text'\x3e"+a.description+"\x3c/span\x3e";k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();c.sendNotification(ib.RECOMMENDATION_SELECTED,a.currentTarget.dataset);return!1});this.list.appendChild(b)};var Pe=function(){Pe.__super__.constructor.call(this)};f(Pe,puremvc.SimpleCommand);Pe.prototype.execute=function(a){this.facade.retrieveProxy($.NAME);a=a.getBody();this.facade.logger.debug("Recommendation Selected: ",a);"none"!==a.target&&"player"!==a.target&&window.open(a.link,
a.target)};var Qe=function(){Qe.__super__.constructor.call(this)};f(Qe,puremvc.SimpleCommand);Qe.prototype.execute=function(a){this.facade.retrieveProxy($.NAME).invoke()};var Re=function(){Re.__super__.constructor.call(this)};f(Re,puremvc.SimpleCommand);Re.prototype.execute=function(a){var b;b=this.facade.retrieveProxy($.NAME).getRecommendations();a=a.getBody();a.newState===PlayState.ENDED?0<(null!=b?b.length:void 0)&&this.facade.sendNotification(d.ADD_APPLICATION_STATE,"recommendations-mode"):a.oldState===
PlayState.ENDED&&0<(null!=b?b.length:void 0)&&this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,"recommendations-mode")};var $=function(a){$.__super__.constructor.call(this,a);this.helper=new vc};f($,K);$.NAME=y.NAME;$.prototype.defaults={url:null,target:"_blank"};$.prototype.loaded=!0;$.prototype.recommendations=null;$.prototype.helper=null;$.prototype.getRecommendations=function(){return this.recommendations};$.prototype.setRecommendations=function(a){this.recommendations=a;this.sendNotification(ib.RECOMMENDATIONS_LOADED,
this.recommendations);return a};$.prototype.getURL=function(){return this.getConfigurationData().url};$.prototype.setURL=function(a){this.data.url=a;this.invoke();return a};$.prototype.getTarget=function(){return this.getConfigurationData().target||this.facade.app.retrieveProxy(D.NAME).getTarget()};$.prototype.setTarget=function(a){return this.data.target=a};$.prototype.invoke=function(){var a;a=this.getURL();null==a||""===a?this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error: No url provided"):
h.getJson(a,this.onload.bind(this),this.onerror.bind(this))};$.prototype.onload=function(a){a=this.createRecommendations(a);this.setRecommendations(a)};$.prototype.onerror=function(a){this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error:",a)};$.prototype.createRecommendations=function(a){var b,c,e,d;a=this.helper.createFeed(a);c=[];d=a.item;a=0;for(e=d.length;a<e;a++)b=d[a],b=new Lb(b.guid,b.link,b.title,b.description,b.thumbnail,b.duration,b.pubDate,this.getTarget(),b),c.push(b);return c};
var Yb=function(a,b){Yb.__super__.constructor.call(this,a,b)};f(Yb,Z);Yb.NAME="AuditudePlugin";Yb.prototype.moduleName="auditude";Yb.prototype.featureName="ads";Yb.prototype.createFullscreenProxy=function(){return new La(this.config)};Yb.prototype.createProxy=function(){return new W(this.config)};Yb.prototype.isFullscreenDevice=function(){return!0};s.registerPlugin("auditude","html",Yb);s.registerPlugin("auditude","flash",$c);var Zb=function(a){Zb.__super__.constructor.call(this,a);a=a.retrieveProxy($.NAME);
this.setURL=a.setURL.bind(a);this.getURL=a.getURL.bind(a);this.getData=a.getRecommendations.bind(a);this.setData=a.setRecommendations.bind(a);this.getTarget=a.getTarget.bind(a);this.setTarget=a.setTarget.bind(a)};f(Zb,db);Zb.prototype.setURL=function(a){};Zb.prototype.getURL=function(){};Zb.prototype.getData=function(){};Zb.prototype.setData=function(a){};Zb.prototype.getTarget=function(){};Zb.prototype.setTarget=function(a){};var Na=function(a,b){Na.__super__.constructor.call(this,a,b)};f(Na,S);
Na.NAME="AutoAdvancePlugin";Na.prototype.moduleName="autoadvance";Na.prototype.createController=function(){Na.__super__.createController.call(this);this.registerCommand(gb.START,Me);this.registerCommand(gb.ADVANCE,Ne);this.registerCommand(d.ENDED,Oe);this.registerCommand(d.CHANGE_MEDIA,Lc);this.registerCommand(d.PLAY,Lc);this.registerCommand(d.PLAYING,Lc);this.registerCommand(d.REPLAY,Lc)};Na.prototype.createModel=function(){this.registerProxy(new Ma(this.config))};Na.prototype.createView=function(){this.registerMediator(new Mb)};
Na.prototype.listNotificationInterests=function(){return[d.ENDED,d.CHANGE_MEDIA,d.PLAY,d.PLAYING,d.REPLAY]};Na.prototype.listNotificationPublications=function(){var a,b;return Na.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in gb)b=gb[a],c.push(b);return c}())};Na.prototype.listNotificationEvents=function(){var a,b;return Na.__super__.listNotificationEvents.call(this).concat(function(){var c;c=[];for(a in gb)b=gb[a],c.push(b);return c}())};s.registerPlugin("autoadvance",
"html",Na);s.registerPlugin("autoadvance","flash",hb);var xb=function(a){xb.__super__.constructor.call(this,xb.NAME,a)};f(xb,da);xb.NAME="RecommendationsGridMediator";xb.prototype.grid=null;xb.prototype.onRegister=function(){var a;this.classList.add("recommendations-grid");a=document.createElement("div");this.classList.add("recommendations-grid-label",a);a.textContent="Recommended";this.viewComponent.appendChild(a);this.grid=document.createElement("table");this.classList.add("recommendations-grid-table-grid",
this.grid);this.viewComponent.appendChild(this.grid);xb.__super__.onRegister.call(this)};xb.prototype.listNotificationInterests=function(){return[ib.RECOMMENDATIONS_LOADED]};xb.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case ib.RECOMMENDATIONS_LOADED:if(this.grid.innerHTML="",this.grid.appendChild(document.createElement("tr")),this.grid.appendChild(document.createElement("tr")),this.classList.add("recommendations-grid-row",this.grid.childNodes[0]),this.classList.add("recommendations-grid-row",
this.grid.childNodes[1]),b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a,c)}};xb.prototype.addElement=function(a,b){var c,e=this;c=document.createElement("td");null==c.dataset&&(c.dataset={});c.dataset.link=a.link;c.dataset.target=this.config.getTarget();this.classList.add("recommendations-grid-item",c);c.innerHTML="\x3cimg src\x3d'"+a.thumbnail+"' class\x3d'"+this.cssPrefix+"recommendations-grid-thumbnail' /\x3e \x3cspan class\x3d'"+this.cssPrefix+"recommendations-grid-text'\x3e"+
a.description+"\x3c/span\x3e";k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();e.sendNotification(ib.RECOMMENDATION_SELECTED,a.currentTarget.dataset);return!1});this.grid.childNodes[2>b%4?0:1].appendChild(c)};var xa=function(a,b){xa.__super__.constructor.call(this,a,b)};f(xa,Fa);xa.NAME="RecommendationsPlugin";xa.prototype.featureName="recommendations";xa.prototype.moduleName="recommendations";xa.prototype.createController=function(){this.registerCommand(ib.RECOMMENDATION_SELECTED,Pe);
this.registerCommand(d.START,Qe);this.registerCommand(d.PLAY_STATE_CHANGE,Re)};xa.prototype.createModel=function(){this.registerProxy(new $(this.config))};xa.prototype.createView=function(){this.registerMediator(new wb)};xa.prototype.createAPI=function(){return this.api=new Zb(this)};xa.prototype.listNotificationInterests=function(){return[d.START,d.PLAY_STATE_CHANGE]};xa.prototype.listNotificationPublications=function(){var a,b;return xa.__super__.listNotificationPublications.call(this).concat(function(){var c;
c=[];for(a in ib)b=ib[a],c.push(b);return c}())};xa.prototype.listNotificationEvents=function(){var a,b;return xa.__super__.listNotificationEvents.call(this).concat(function(){var c;c=[];for(a in ib)b=ib[a],c.push(b);return c}())};s.registerPlugin("recommendations","html",xa);s.registerPlugin("recommendations","flash",ia);var oa=function(a){oa.__super__.constructor.call(this,a)};f(oa,U);oa.prototype.configurationName="nielsen";oa.NAME=y.NAME;oa.cg="OnDemand";oa.url="http://secure-us.imrworldwide.com/cgi-bin/m";
oa.prototype.defaults={url:null,data:{ci:null,c6:null,cg:null,tl:null},events:null};oa.prototype.getTitle=function(){return this.title};oa.prototype.setTitle=function(a){return this.title=a};oa.prototype.start=function(){var a;a=this.constructURL("video","started");h.beacon(a)};oa.prototype.end=function(){var a;a=this.constructURL("video","ended");h.beacon(a)};oa.prototype.constructURL=function(a,b){var c,e,d,f,g,m,h,k,n,p;m=this.url||oa.url;d=null!=(g=this.value.events)?g[a]:void 0;if(null!=d)for(h=
0,k=d.length;h<k;h++)g=d[h],g.type===b&&(f=g);d=(null!=f?null!=(c=f.data)?c.ci:void 0:void 0)||this.value.data.ci;c=(null!=f?null!=(e=f.data)?e.c6:void 0:void 0)||this.value.data.c6;e=(null!=f?null!=(n=f.data)?n.cg:void 0:void 0)||this.value.data.cg||oa.cg;f=(null!=f?null!=(p=f.data)?p.tl:void 0:void 0)||this.value.data.tl;return""+m+"?ci\x3d"+d+"\x26c6\x3d"+c+"\x26cc\x3d1\x26tl\x3d"+f+"\x26cg\x3d"+e+"\x26rnd\x3d"+Date.now()};var Ad=function(){return Ad.__super__.constructor.apply(this,arguments)};
f(Ad,G);Ad.NAME="NielsenWrapper";Ad.prototype.createXML=function(a){var b,c,e,d,f,g,m,h,k,n,p,q,r,s,t,u,v;if(null!=(null!=(n=this.config)?n.events:void 0)){a.getElementsByTagName("application");d=a.getElementsByTagName("metrics")[0];n=a.createElement("vendor");n.setAttribute("id","nielsen");d.appendChild(n);d={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};m=[{value:"ci",key:"NIELSEN_CI"},{value:"cg",key:"NIELSEN_CG"},{value:"tl",key:"NIELSEN_TL"},{value:"c6",
key:"NIELSEN_C6"}];null!=this.config.url&&(c=a.createElement("property"),c.setAttribute("key","serviceURL"),b=F.createTextContent(a,this.config.url.toString()),c.appendChild(b),n.appendChild(c));t=this.config.events;for(k in t)if(e=t[k],null!=e&&0<e.length)for(p=0,r=e.length;p<r;p++)for(c=e[p],f=a.createElement("property"),f.setAttribute("key",d[k][c.type]),n.appendChild(f),q=0,s=m.length;q<s;q++)g=m[q],h=(null!=(u=c.data)?u[g.value]:void 0)||(null!=(v=this.config.data)?v[g.value]:void 0),null!=h&&
""!==h&&(b=a.createElement("property"),b.setAttribute("key",g.key),h=F.createTextContent(a,h),b.appendChild(h),f.appendChild(b));return a}};var Se=function(){Se.__super__.constructor.call(this)};f(Se,puremvc.SimpleCommand);Se.prototype.execute=function(a){this.facade.logger.debug("NielsenEndCommand");this.facade.retrieveProxy(oa.NAME).end()};var Te=function(){Te.__super__.constructor.call(this)};f(Te,puremvc.SimpleCommand);Te.prototype.execute=function(a){this.facade.logger.debug("NielsenStartCommand");
this.facade.retrieveProxy(oa.NAME).start()};var ad=function(a,b){ad.__super__.constructor.call(this,a,b)};f(ad,xa);ad.NAME="RecommendationsGridPlugin";ad.prototype.moduleName="recommendationsgrid";ad.prototype.createView=function(){this.registerMediator(new xb)};s.registerPlugin("recommendationsgrid","html",ad);s.registerPlugin("recommendationsgrid","flash",ia);var yb=function(a){yb.__super__.constructor.call(this,a)};f(yb,U);yb.prototype.configurationName="comscore";yb.NAME=y.NAME;yb.prototype.defaults=
{url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}};yb.prototype.adStart=function(){var a;this.facade.logger.log("ComscoreProxy -\x3e adStart");a=this.constructURL("ads","started");h.beacon(a)};yb.prototype.videoStart=function(){var a;this.facade.logger.log("ComscoreProxy -\x3e videoStart");a=this.constructURL("video","started");h.beacon(a)};yb.prototype.constructURL=function(a,b){var c,
e,d,f,g,m,h,k;c={};d=null!=(f=this.value.events)?f[a]:void 0;if(null!=d)for(h=0,k=d.length;h<k;h++)f=d[h],f.type===b&&(e=f);f=this.value.data;for(g in f)d=f[g],c[g]=(null!=e?null!=(m=e.data)?m[g]:void 0:void 0)||d;null==c.c7&&(c.c7=document.location.href.substr(0,512));null==c.c8&&(c.c8=document.referrer.substr(0,512));null==c.c9&&(c.c9=document.title);null==c.cv&&(c.cv="2.0");c.rn=Date.now();m=this.value.url;e=[];for(g in c)d=c[g],null!=d&&""!==d&&e.push(g+"\x3d"+escape(d));0<e.length&&(m+="?"+e.join("\x26"));
return m.substr(0,2080)};var Bd=function(){return Bd.__super__.constructor.apply(this,arguments)};f(Bd,G);Bd.NAME="ComscoreWrapper";Bd.prototype.createXML=function(a){var b,c,e,d,f,g,m,h,k,n,p,q,r,s,t,u,v;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("metrics")[0];null==c&&(c=a.createElement("metrics"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","comscore");c.appendChild(b);f={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};
h=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}];t=this.config.events;for(n in t)if(d=t[n],null!=d&&0<d.length)for(p=0,r=d.length;p<r;p++)for(e=d[p],g=a.createElement("property"),
g.setAttribute("key",f[n][e.type]),b.appendChild(g),c=a.createElement("property"),c.setAttribute("key","COMSCORE_CSURL"),k=F.createTextContent(a,this.config.url),c.appendChild(k),g.appendChild(c),q=0,s=h.length;q<s;q++)m=h[q],k=(null!=(u=e.data)?u[m.value]:void 0)||(null!=(v=this.config.data)?v[m.value]:void 0),null!=k&&""!==k&&(c=a.createElement("property"),c.setAttribute("key",m.key),k=F.createTextContent(a,k),c.appendChild(k),g.appendChild(c));return a};var Ue=function(){Ue.__super__.constructor.call(this)};
f(Ue,puremvc.SimpleCommand);Ue.prototype.execute=function(a){this.facade.logger.debug("ComscoreAdStartCommand");this.facade.retrieveProxy(yb.NAME).adStart()};var Ve=function(){Ve.__super__.constructor.call(this)};f(Ve,puremvc.SimpleCommand);Ve.prototype.execute=function(a){this.facade.logger.debug("ComscoreStartCommand");this.facade.retrieveProxy(yb.NAME).videoStart()};var zc=function(a,b){zc.__super__.constructor.call(this,a,b)};f(zc,S);zc.NAME="NielsenPlugin";zc.prototype.moduleName="nielsen";zc.prototype.createController=
function(){var a,b,c,e;b=null!=(a=this.config)?null!=(c=a.events)?c.video:void 0:void 0;if(null!=b)for(c=0,e=b.length;c<e;c++)a=b[c],"started"===a.type&&this.registerCommand(d.STARTED,Te),"ended"===a.type&&this.registerCommand(d.ENDED,Se)};zc.prototype.createModel=function(){this.registerProxy(new oa(this.config))};zc.prototype.listNotificationInterests=function(){return[d.STARTED,d.ENDED]};s.registerPlugin("nielsen","html",zc);s.registerPlugin("nielsen","flash",Ad);var pa=function(a){this.proxy=
a;pa.__super__.constructor.call(this);this.plugin=this.proxy.plugin;this.error=this.proxy.error};f(pa,puremvc.Proxy);pa.NAME="OmnitureAdProxy";pa.prototype.proxy=null;pa.prototype.plugin=null;pa.prototype.error=null;pa.prototype.currentTime=null;pa.prototype.started=!1;pa.prototype.ad=null;pa.prototype.getAd=function(){return this.ad};pa.prototype.setAd=function(a){this.started=!1;this.currentTime=0;return this.ad=a};pa.prototype.setTimeRemaining=function(a){this.currentTime=this.ad.duration-a;return a};
pa.prototype.start=function(){try{this.plugin.Media.openAd(this.ad.title,this.ad.duration,this.proxy.value.playerName,this.proxy.getMediaName(),this.ad.type,this.ad.position,this.ad.cpm),this.started=!0}catch(a){this.error("open",a)}};pa.prototype.play=function(){!0!==this.started&&this.start();try{this.plugin.Media.play(this.ad.title,this.currentTime||0)}catch(a){this.error("ad play",a)}};pa.prototype.pause=function(){try{this.plugin.Media.stop(this.ad.title,this.currentTime)}catch(a){this.error("ad pause",
a)}};pa.prototype.ended=function(){if(!1!==this.started)try{this.started=!1,this.plugin.Media.stop(this.ad.title,this.ad.duration),this.plugin.Media.close(this.ad.title)}catch(a){this.error("ad end",a)}};var L=function(){L.__super__.constructor.call(this)};f(L,puremvc.SimpleCommand);L.prototype.config=null;L.prototype.plugin=null;L.prototype.initializeNotifier=function(a){L.__super__.initializeNotifier.call(this,a);return this.config=this.plugin=this.facade.retrieveProxy(y.NAME)};var We=function(){We.__super__.constructor.call(this)};
f(We,L);We.prototype.execute=function(a){this.facade.logger.debug("OmniturePlayCommand");this.config.play()};var Xe=function(){Xe.__super__.constructor.call(this)};f(Xe,L);Xe.prototype.execute=function(a){this.config.setMedia(a.getBody());this.facade.removeCommand(d.PLAY)};var Ye=function(){Ye.__super__.constructor.call(this)};f(Ye,L);Ye.prototype.execute=function(a){this.config.pause()};var Ze=function(){Ze.__super__.constructor.call(this)};f(Ze,L);Ze.prototype.execute=function(a){this.facade.logger.debug("OmnitureSeekingCommand");
this.config.seeking()};var $e=function(){$e.__super__.constructor.call(this)};f($e,L);$e.prototype.execute=function(a){this.facade.logger.debug("OmnitureSeekedCommand");this.config.seeked()};var af=function(){af.__super__.constructor.call(this)};f(af,L);af.prototype.execute=function(a){this.config.ended()};var bf=function(){bf.__super__.constructor.call(this)};f(bf,L);bf.prototype.execute=function(a){this.facade.logger.debug("OmnitureStartCommand");this.config.start();this.facade.registerCommand(d.PLAY,
We)};var cf=function(){cf.__super__.constructor.call(this)};f(cf,L);cf.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdStartedCommand");this.config.ads.start()};var df=function(){df.__super__.constructor.call(this)};f(df,L);df.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdPlayCommand");this.config.ads.play()};var ef=function(){ef.__super__.constructor.call(this)};f(ef,L);ef.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdPauseCommand");this.config.ads.pause()};
var ff=function(){ff.__super__.constructor.call(this)};f(ff,L);ff.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdBreakEndCommand");this.config.ads.ended()};var gf=function(){gf.__super__.constructor.call(this)};f(gf,L);gf.prototype.execute=function(a){this.config.ads.setTimeRemaining(a.getBody())};var $b=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};$b.prototype.id=null;$b.prototype.startTime=null;$b.prototype.endTime=null;$b.prototype.text=null;$b.prototype.html=null;
$b.prototype.align=null;var hf=function(){hf.__super__.constructor.call(this)};f(hf,L);hf.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdLoadedCommand");this.config.ads.setAd(a.getBody())};var Ef=function(){};Ef.prototype.parse=function(a,b){var c,e,d,f,g,m,k,n,p;b=b.replace(/\r/g,"");e=b.split("\n\n");n=0;for(p=e.length;n<p;n++){c=e[n];c=c.split("\n");try{f=c[0],k=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),g=h.flattenTimecode(k[0]),d=h.flattenTimecode(k[1]),m=c.slice(2)}catch(q){T.warn("SRT Parsing Warning")}c=
new $b(g,d,"cue_"+f);c.html="\x3cp\x3e"+m.join("\x3cbr /\x3e")+"\x3c/p\x3e";c.text=m.join("\n");a.cues.push(c)}return a};var Ff=function(){};Ff.prototype.parse=function(a,b){var c,e;Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,c,e){var d;d="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,b,c){if("tts"===a.prefix)return d+=h.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=d});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,
c,e){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});e=b.querySelector("tt");e=e.getAttribute("lang")||e.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=e;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,e,d){var f;d=b.getAttribute("begin");b.removeAttribute("begin");null!=b.getAttribute("end")?(f=b.getAttribute("end"),b.removeAttribute("end")):null!=c[e+1]&&(f=c[e+1].getAttribute("begin"));e=new $b(h.flattenTimecode(d),
h.flattenTimecode(f),"cue_"+e);f=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=f&&(e.align="center"===f?"middle":f,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"));b=F.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");e.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,"");b=b.replace(/<br\/>/,"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");e.text=b;a.cues.push(e)});return a};var Cd=function(){return Cd.__super__.constructor.apply(this,
arguments)};f(Cd,G);Cd.NAME="OmnitureWrapper";Cd.prototype.createXML=function(a){var b,c,e,d,f,g,m,h,k,n,p,q;b=a.getElementsByTagName("application")[0];g=a.getElementsByTagName("metrics")[0];null==g&&(g=a.createElement("metrics"),b.appendChild(g));b=a.createElement("vendor");b.setAttribute("id","omniture");g.appendChild(b);m=[{value:this.config.channel,key:"OMNITURE_CHANNEL"},{value:this.config.account,key:"OMNITURE_ACCOUNT"},{value:this.config.debugTracking,key:"OMNITURE_DEBUG_TRACKING"},{value:this.config.trackLocal,
key:"OMNITURE_TRACK_LOCAL"},{value:this.config.visitorNamespace,key:"OMNITURE_VISITOR_NAMESPACE"},{value:this.config.trackingServer,key:"OMNITURE_TRACKING_SERVER"},{value:this.config.trackingServerSecure,key:"OMNITURE_TRACKING_SERVER_SECURE"},{value:this.config.currencyCode,key:"OMNITURE_CURRENCY_CODE"},{value:this.config.trackWhilePlaying,key:"OMNITURE_TRACK_WHILE_PLAYING"},{value:this.config.trackMediaMethods,key:"OMNITURE_TRACK_MEDIA_METHODS"},{value:this.config.mediaName,key:"OMNITURE_MEDIA_NAME"},
{value:this.config.playerName,key:"OMNITURE_PLAYER_NAME"}];c=0;for(e=m.length;c<e;c++)g=m[c],null!=g.value&&this.createProperty(a,g.key,g.value,b);c=this.config.Media;if(null!=c){m=[{value:c.autoTrack,key:"OMNITURE_AUTO_TRACK"},{value:c.segmentByMilestones,key:"OMNITURE_SEGMENT_MILESTONES"},{value:c.trackVars,key:"OMNITURE_TRACKVARS"},{value:c.trackEvents,key:"OMNITURE_TRACKEVENTS"},{value:c.trackUsingContextData,key:"OMNITURE_TRACK_CONTEXT_DATA"},{value:c.trackSecondIntervals,key:"OMNITURE_TRACKSECOND_INTERVALS"}];
e=0;for(h=m.length;e<h;e++)g=m[e],null!=g.value&&this.createProperty(a,g.key,g.value,b);if(null!=c.trackMilestones)for(k=this.createProperty(a,"OMNITURE_TRACK_MILESTONES",null,b),e=c.trackMilestones,n=0,p=e.length;n<p;n++)for(f in g=e[n],h=this.createProperty(a,g.percent,null,k),g)m=g[f],"percent"!==f&&this.createProperty(a,f,m,h);e=c.contextDataMapping;if(null!=e)for(f in c=this.createProperty(a,"OMNITURE_CONTEXT_DATA",null,b),e)if(m=e[f],"string"===typeof m&&this.createProperty(a,f,m,c),m instanceof
Array)for(h=this.createProperty(a,f,null,c),k=0,n=m.length;k<n;k++)g=m[k],this.createProperty(a,g.percent,g.events,h)}e=this.config.customLinkTracking;if(null!=e)for(f in h=this.createProperty(a,"OMNITURE_CUSTOM_LINK_TRACKING",null,b),e)if("intervalReached"===f)for(m=this.createProperty(a,f,null,h),p=e[f],n=0,k=p.length;n<k;n++)for(f in c=p[n],g=this.createProperty(a,c.interval,null,m),c)"interval"!==f&&this.createProperty(a,f,c[f],g);else this.createProperty(a,f,e[f],h);f=null!=(d=this.config.events)?
d.video:void 0;if(null!=f)for(c=0,m=f.length;c<m;c++){d=f[c];switch(d.type){case "started":g="videoStart";break;case "ended":g="videoComplete";break;case "play":g="videoResume";break;case "pause":g="videoPause";break;default:g=d.type}this.createProperty(a,g,d.data,b)}f=null!=(q=this.config.events)?q.ads:void 0;if(null!=f)for(m=0,q=f.length;m<q;m++)d=f[m],g="started"===d.type?"adStart":"ended"===d.type?"adComplete":d.type,this.createProperty(a,g,d.data,b)};var ac=function(a,b){ac.__super__.constructor.call(this,
a,b)};f(ac,G);ac.NAME="CaptioningWrapper";ac.prototype.hidden=!0;ac.prototype.listNotificationInterests=function(){return[n.CREATE_FLASH_VARS,n.CREATE_XML,d.MEDIA_CHANGE,n.CAPTIONING_REQUEST,n.CAPTION_LANG_CHANGE]};ac.prototype.handleNotification=function(a){var b,c,e,f;c=a.getName();a=a.getBody();switch(c){case n.CAPTION_LANG_CHANGE:f="";break;case n.CAPTIONING_REQUEST:this.setHidden(!this.getHidden());f="visibilitychange";a=a.enabled;break;case n.CREATE_XML:c=a.xml;e=null!=(b=this.config.flash)?
b.subply:void 0;null!=e&&(null!=e.timeMethod&&(b=c.getElementsByTagName("player")[0],b.setAttribute("subply_time_method",e.timeMethod)),null!=e.plugin&&(b=c.getElementsByTagName("application")[0],e=c.getElementsByTagName("subply")[0],null==e&&(e=c.createElement("subply"),b.appendChild(e)),this.createProperty(c,"SUBPLY_URL",this.config.flash.subply.plugin,e)));break;case n.CREATE_FLASH_VARS:b=a.flashvars;c=a.config;null!=(null!=(e=c.media)?e.track:void 0)&&(e=h.selectTrack(c.media.track,"captions"),
null!=e.src&&""!==e.src&&(b.caption_url=e.src),b.caption_type=null!=e.type?encodeURIComponent(e.type):"application/ttml+xml");break;case d.MEDIA_CHANGE:b=a,null!=b.track&&(e=h.selectTrack(b.track,"captions"),null!=(null!=e?e.src:void 0)&&""!==e.src&&(b.captioningUrl=e.src),b.captioningType=e.type||"application/ttml+xml")}null!=f&&this.dispatchEvent(new N(f,a))};ac.prototype.getHidden=function(){return this.hidden};ac.prototype.setHidden=function(a){return this.hidden=a};s.registerPlugin("captioning",
"flash",ac);var zb=function(a,b){zb.__super__.constructor.call(this,a,b)};f(zb,da);zb.NAME="PluginMediator";zb.prototype.initializeNotifier=function(a){zb.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(y.NAME);this.media=this.facade.app.retrieveProxy(p.NAME)};var P=function(a){P.__super__.constructor.call(this,P.NAME,a)};f(P,Aa);P.NAME="CaptioningHTMLMediator";P.prototype.captioningObject={"default":{fontFamily:"Arial",size:"1.3em",fontColor:"rgba(255,255,255,1)",
edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",
edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};P.prototype.captionText=
null;P.prototype.settingsUiVisible=!1;P.prototype.captionningStyle=null;P.prototype.swatchColorCurr=null;P.prototype.swatchOpacityCurr=null;P.prototype.colorPicker=null;P.prototype.colorPickerOpacity=null;P.prototype.advancedSettingContainer=null;P.prototype.list={font:null,language:null,edge:null,size:null,scroll:null};P.prototype.picker={color:null,background:null,edge:null,window:null};P.prototype.toggle={ON:null,OFF:null,disabled:!1};P.prototype.onRegister=function(){var a,b,c,e,d,f,g=this;this.captionText=
document.createElement("div");this.classList.add("caption-text",this.captionText);this.viewComponent.appendChild(this.captionText);e=document.createElement("div");this.classList.add("captioning-settings",e);c=document.createElement("div");this.classList.add("captioning-titlebar",c);a=document.createElement("span");this.classList.add("captioning-title",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_TITLE);c.appendChild(a);this.toggle.ON=document.createElement("button");this.classList.add("captioning-toggle-btn",
this.toggle.ON);this.toggle.ON.innerHTML="ON";k.create(this.toggle.ON,k.CLICK,function(a){a.stopImmediatePropagation();g.toggle.disabled||g.toggleButtonHandler(!0);return!1});this.toggle.OFF=document.createElement("button");this.classList.add("captioning-toggle-btn",this.toggle.OFF);this.toggle.disabled||this.classList.add("captioning-floater-btnselected",this.toggle.OFF);this.toggle.OFF.innerHTML="OFF";k.create(this.toggle.OFF,k.CLICK,function(a){a.stopImmediatePropagation();g.toggle.disabled||g.toggleButtonHandler(!1);
return!1});c.appendChild(this.toggle.OFF);c.appendChild(this.toggle.ON);e.appendChild(c);c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_LANGUAGE);c.appendChild(a);this.list.language=document.createElement("select");this.classList.add("captioning-dropdown",this.list.language);this.languageListPopulate();k.create(this.list.language,"change",function(a){var b;
a.stopImmediatePropagation();b="None"!==a.target.selectedValue;g.sendNotification(v.VISIBILITY_CHANGE,b);b&&g.facade.moduleAPI.setTrack(g.facade.moduleAPI.selectTrackByIndex(a.target.selectedIndex));return!1});c.appendChild(this.list.language);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_PRESETS);c.appendChild(a);a=document.createElement("div");this.classList.add("captioning-preset",a);this.classList.add("captioning-preset1",
a);a.innerHTML="Aa";b=document.createElement("div");this.classList.add("captioning-preset",b);this.classList.add("captioning-preset2",b);b.innerHTML="Aa";d=document.createElement("div");this.classList.add("captioning-preset",d);this.classList.add("captioning-preset3",d);d.innerHTML="Aa";f=document.createElement("div");this.classList.add("captioning-preset",f);this.classList.add("captioning-preset4",f);f.innerHTML="Aa";k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=
g.cloneObject(g.captioningObject.preset1);g.applyCaptioningStyle();return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset2);g.applyCaptioningStyle();return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset3);g.applyCaptioningStyle();return!1});k.create(f,k.CLICK,function(a){a.stopImmediatePropagation();g.captioningObject.selected=g.cloneObject(g.captioningObject.preset4);
g.applyCaptioningStyle();return!1});c.appendChild(a);c.appendChild(b);c.appendChild(d);c.appendChild(f);e.appendChild(c);this.advancedSettingContainer=document.createElement("div");c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_FONT);c.appendChild(a);this.list.font=document.createElement("select");this.classList.add("captioning-dropdown",this.list.font);
a=document.createElement("option");a.innerHTML="Arial";a.value="Arial,sans-serif";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Times New Roman";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Courier";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Georgia";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Helvetica";this.list.font.appendChild(a);a=document.createElement("option");
a.innerHTML="Verdana";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Impact";this.list.font.appendChild(a);a=document.createElement("option");a.innerHTML="Comic Sans Serif";this.list.font.appendChild(a);k.create(this.list.font,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.fontFamily=a.target.value;g.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.font);a=document.createElement("span");this.classList.add("captioning-label",
a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_EDGE);c.appendChild(a);this.list.edge=document.createElement("select");this.classList.add("captioning-dropdown",this.list.edge);a=document.createElement("option");a.innerHTML="none";a.value="none";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Right drop shadow";a.value="text-shadow: 3px 3px 2px";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Left drop shadow";a.value="text-shadow: -3px 3px 2px";
this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Uniform";a.value="text-shadow: 0px 0px 4px";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Raised";a.value="text-shadow: 0px 1px 1px";this.list.edge.appendChild(a);a=document.createElement("option");a.innerHTML="Depressed";a.value="text-shadow: 0px 1px 0px";this.list.edge.appendChild(a);k.create(this.list.edge,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.edgeType=
a.target.value;g.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.edge);this.advancedSettingContainer.appendChild(c);c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_SIZE);c.appendChild(a);this.list.size=document.createElement("select");this.classList.add("captioning-dropdown",this.list.size);a=document.createElement("option");a.innerHTML=
"Small";a.value=".8em";this.list.size.appendChild(a);a=document.createElement("option");a.innerHTML="Medium";a.value="1.3em";this.list.size.appendChild(a);a=document.createElement("option");a.innerHTML="Large";a.value="2.3em";this.list.size.appendChild(a);this.list.size.selectedIndex=1;c.appendChild(this.list.size);k.create(this.list.size,"change",function(a){a.stopImmediatePropagation();g.captioningObject.selected.size=a.target.value;g.applyCaptioningStyle(!1);return!1});a=document.createElement("span");
this.classList.add("captioning-label",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_SCROLL);c.appendChild(a);this.list.scroll=document.createElement("select");this.classList.add("captioning-dropdown",this.list.scroll);a=document.createElement("option");a.innerHTML="Roll up";this.list.scroll.appendChild(a);a=document.createElement("option");a.innerHTML="Roll down";this.list.scroll.appendChild(a);k.create(this.list.scroll,"change",function(a){a.stopImmediatePropagation();return!1});c.appendChild(this.list.scroll);
this.advancedSettingContainer.appendChild(c);c=document.createElement("div");this.classList.add("captioning-row",c);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_COLOR);this.picker.color=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.color);this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor;k.create(this.picker.color,k.CLICK,function(a){var b;
a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="152px",g.colorPicker.name="fontColor",g.captioningObject.instance=g.picker.color,-1!==g.picker.color.style.backgroundColor.indexOf("rgba")&&(b=g.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=
b?b:1);return!1});c.appendChild(a);c.appendChild(this.picker.color);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_BACKGROUND);this.picker.background=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.background);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;k.create(this.picker.background,k.CLICK,function(a){var b;a.stopImmediatePropagation();
g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="264px",g.colorPicker.name="backgroundColor",g.captioningObject.instance=g.picker.background,-1!==g.picker.background.style.backgroundColor.indexOf("rgba")&&(b=g.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:
1);return!1});c.appendChild(a);c.appendChild(this.picker.background);a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_EDGE);this.picker.edge=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.edge);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;k.create(this.picker.edge,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display=
"block"===g.colorPicker.style.display?"none":"block";"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="212px",g.colorPicker.name="edgeColor",g.captioningObject.instance=g.picker.edge,-1!==g.picker.edge.style.backgroundColor.indexOf("rgba")&&(b=g.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});c.appendChild(a);c.appendChild(this.picker.edge);
a=document.createElement("span");this.classList.add("captioning-label-small",a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_WINDOW);this.picker.window=document.createElement("div");this.classList.add("captioning-color-picker",this.picker.window);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;k.create(this.picker.window,k.CLICK,function(a){var b;a.stopImmediatePropagation();g.colorPicker.style.display="block"===g.colorPicker.style.display?"none":"block";
"block"===g.colorPicker.style.display&&(null!=(a=g.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),g.colorPicker.style.left="300px",g.colorPicker.name="windowColor",g.captioningObject.instance=g.picker.window,-1!==g.picker.window.style.backgroundColor.indexOf("rgba")&&(b=g.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),g.colorPickerOpacity.value=null!=b?b:1);return!1});c.appendChild(a);c.appendChild(this.picker.window);this.advancedSettingContainer.appendChild(c);
this.classList.add("captioning-advanced-container",this.advancedSettingContainer);e.appendChild(this.advancedSettingContainer);c=document.createElement("div");this.classList.add("caption-text",c);this.classList.add("caption-text-preview",c);a=document.createElement("p");a.innerHTML="Lorem ipsum dolor sit amet";c.appendChild(a);e.appendChild(c);c=document.createElement("div");this.classList.add("captioning-footer-container",c);a=document.createElement("button");this.classList.add("captioning-footer-button",
a);a.innerHTML=this.localizationManager.getString(w.MSG_CC_APPLY);b=document.createElement("button");this.classList.add("captioning-footer-button",b);b.innerHTML=this.localizationManager.getString(w.MSG_CC_CANCEL);d=document.createElement("button");this.classList.add("captioning-footer-button",d);d.innerHTML=this.localizationManager.getString(w.MSG_CC_RESET);f=document.createElement("button");this.classList.add("captioning-advanced-button",f);f.innerHTML=this.localizationManager.getString(w.MSG_CC_SHOW_ADVANCED);
c.appendChild(a);c.appendChild(b);c.appendChild(d);450<this.facade.app.getViewComponent().clientWidth&&c.appendChild(f);k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();localStorage.setItem(Oc.PREFIX+"captioningDefault",JSON.stringify(g.captioningObject.selected));g.sendNotification(v.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);g.applyCaptioningStyle(!1,!0);g.sendNotification(v.SETTINGS_CHANGE,g.captioningObject.selected);return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();
g.sendNotification(v.SETTINGS_VISIBILITY_CHANGE,g.settingsUiVisible);return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();g.colorPicker.style.display="none";g.applyCaptioningStyle(!0);return!1});k.create(f,k.CLICK,function(a){a.stopImmediatePropagation();"block"===g.advancedSettingContainer.style.display?(a.target.innerHTML=g.localizationManager.getString(w.MSG_CC_SHOW_ADVANCED),g.advancedSettingContainer.style.display="none",g.colorPicker.style.display="none"):(a.target.innerHTML=
g.localizationManager.getString(w.MSG_CC_HIDE_ADVANCED),g.advancedSettingContainer.style.display="block");return!1});e.appendChild(c);this.viewComponent.appendChild(e);this.captionningStyle=document.createElement("style");this.captionningStyle.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.captionningStyle);e="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=document.createElement("div");this.classList.add("colorpicker-palette",this.colorPicker);c=document.createElement("div");this.classList.add("colorpicker-swatch",c);c.innerHTML="\x26nbsp;";a=0;for(b=e.length;a<b;a++)d=e[a],c.style.backgroundColor=d,d=c.cloneNode(),k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();null!==g.swatchColorCurr&&(g.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");g.swatchColorCurr=a.target;g.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";
g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=g.toRGBA(a.target.style.backgroundColor);g.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(d);this.colorPickerOpacity=document.createElement("input");this.colorPickerOpacity.type="range";this.classList.add("colorpicker-slider",this.colorPickerOpacity);this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;k.create(this.colorPickerOpacity,
"change",function(a){a.stopImmediatePropagation();g.captioningObject.instance.style.backgroundColor=g.captioningObject.selected[g.colorPicker.name]=g.toRGBA(g.captioningObject.instance.style.backgroundColor);g.applyCaptioningStyle(!1);return!1});e=document.createElement("span");this.classList.add("opacity-label",e);e.innerHTML=this.localizationManager.getString(w.MSG_CC_OPACITY);this.colorPicker.appendChild(e);this.colorPicker.appendChild(this.colorPickerOpacity);this.swatchOpacityCurr=this.colorPickerOpacity;
this.viewComponent.appendChild(this.colorPicker);k.create(document,k.CLICK,function(a){a.stopImmediatePropagation();"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==g.colorPicker.style.display&&(g.colorPicker.style.display="none");return!1});null!=localStorage.getItem(Oc.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(Oc.PREFIX+"captioningDefault")),
this.applyCaptioningStyle(!1)):(e=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),e||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(e));P.__super__.onRegister.call(this)};P.prototype.toRGBA=function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+a[1]+","+a[2]+","+this.swatchOpacityCurr.value+")"};P.prototype.languageListPopulate=function(){var a,b,c,e,d;c=this.facade.moduleAPI.getTracks();this.list.language.innerHTML=
"";e=0;for(d=c.length;e<d;e++)a=c[e],b=document.createElement("option"),a=a.language,a=this.facade.app.retrieveProxy(ca.NAME).getLanguageString(a),b.innerHTML=a,null!=a&&""!==a&&this.list.language.appendChild(b);this.toggle.disabled=0===this.list.language.childElementCount;this.toggle.disabled&&(b=document.createElement("option"),b.innerHTML="None",this.list.language.appendChild(b))};P.prototype.cloneObject=function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};P.prototype.applyCaptioningStyle=function(a,
b){var c,e,d,f,g,h;null==a&&(a=!1);null==b&&(b=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"none",this.list.size.value=this.captioningObject["default"].size,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=
this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=
this.captioningObject.selected.size),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));
f="font-family: "+(a?this.captioningObject["default"].fontFamily:this.list.font.value)+" ;";d=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+";";g="font-size: "+(a?this.captioningObject["default"].size:this.list.size.value)+" ;";e="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" ;";c="background-color: "+(a?this.captioningObject["default"].backgroundColor:
this.picker.background.style.backgroundColor)+" ;";h="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" ;";this.captionningStyle.innerHTML=b?this.captioningObject.appliedStyleText=".akamai-caption-text { "+f+g+d+h+" }.akamai-caption-text p { "+e+c+" }":this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+f+g+d+h+" }.akamai-caption-text-preview p { "+e+c+" }"};P.prototype.toggleButtonHandler=function(a){null==a&&(a=!1);
a?(this.classList.add("captioning-floater-btnselected",this.toggle.ON),this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)):(this.classList.add("captioning-floater-btnselected",this.toggle.OFF),this.classList.remove("captioning-floater-btnselected",this.toggle.ON));this.sendNotification(v.VISIBILITY_CHANGE,a);this.sendNotification(Gf.UPDATE_SETTINGS,{captioning:{hidden:!a}})};P.prototype.listNotificationInterests=function(){return[v.CUE_CHANGE,v.SETTINGS_VISIBILITY_CHANGE,v.TOGGLE_SETTINGS_VISIBILITY,
v.SETTINGS_CHANGE]};P.prototype.handleNotification=function(a){var b,c,e,f;b=a.getName();a=a.getBody();switch(b){case v.CUE_CHANGE:b="";e=0;for(f=a.length;e<f;e++)c=a[e],b+=c.html;this.captionText.innerHTML=b;break;case v.SETTINGS_VISIBILITY_CHANGE:case v.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();a=this.settingsUiVisible?d.ADD_APPLICATION_STATE:
d.REMOVE_APPLICATION_STATE;this.sendNotification(a,"cc-setting-active");break;case v.SETTINGS_CHANGE:this.captioningObject.selected=a,this.applyCaptioningStyle(!1,!0)}};var qa=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);
b.poll()};null==window.com&&(window.com=a);qa.__super__.constructor.call(this,this.constructor.NAME)};f(qa,puremvc.Proxy);qa.NAME="LiveCaptionProxy";qa.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};qa.prototype.caption=null;qa.prototype.head=null;qa.prototype.script=null;qa.prototype.timeout=null;qa.prototype.getURL=function(){return this.data.url};qa.prototype.setURL=function(a){return this.data.url=a};qa.prototype.start=function(){this.send()};qa.prototype.poll=
function(){var a=this;setTimeout(function(){a.send()},this.data.interval||1E3)};qa.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script);this.script=document.createElement("script");this.script.src=this.data.base+this.data.url+".js?nocache\x3d"+Date.now();this.head.appendChild(this.script)};qa.prototype.stop=function(){clearTimeout(timeout)};qa.prototype.parse=function(a){var b,c,e,d;if(a.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=
new $b(h.flattenTimecode(a.From),h.flattenTimecode(a.To),a.Ticks);this.caption.text=a.Text;b="";d=a.Text.split("\n");c=0;for(e=d.length;c<e;c++)a=d[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(v.CUE_CHANGE,[this.caption]);return this.caption}};var Nb=function(a){Nb.__super__.constructor.call(this,Nb.NAME,a)};f(Nb,Aa);Nb.NAME="CaptioningNativeMediator";Nb.prototype.video=null;Nb.prototype.index=-1;Nb.prototype.plugin=
null;Nb.prototype.onRegister=function(){this.video=this.facade.app.video;this.plugin=this.facade.retrieveProxy(M.NAME)};Nb.prototype.listNotificationInterests=function(){return[v.VISIBILITY_CHANGE,v.TRACK_SELECTED,v.TRACKS_LOADED]};Nb.prototype.handleNotification=function(a){var b,c,e,d,f,g,h,k;b=a.getBody();switch(a.getName()){case v.TRACKS_LOADED:d=0;for(g=b.length;d<g;d++)if(c=b[d],"captions"===c.kind||"subtitles"===c.kind)for(a=this.video.addTextTrack(c.kind,c.label,c.srclang),k=c.cues,f=0,h=
k.length;f<h;f++)c=k[f],e=new TextTrackCue(c.startTime,c.endTime,c.text),c.id=c.id,a.addCue(e);break;case v.TRACK_SELECTED:-1<this.index&&(this.video.textTracks[this.index].mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case v.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}};var jf=function(){jf.__super__.constructor.call(this)};f(jf,puremvc.SimpleCommand);
jf.prototype.execute=function(a){var b,c,e,d,f,g;d=a.getBody();b=this.facade.retrieveProxy(M.NAME).getTrack();if(null!=b){a=b.activeCues;e=b.cues;b=!1;f=0;for(g=e.length;f<g;f++)c=e[f],d>=c.startTime&&d<c.endTime?0<=Nc.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(v.CUE_CHANGE,a)}};var kf=function(){kf.__super__.constructor.call(this)};f(kf,puremvc.SimpleCommand);kf.prototype.execute=function(a){var b;a=a.getBody();b=this.facade.retrieveProxy(M.NAME);
null!=a.track&&b.setTracks(a.track);null!=a.track&&this.sendNotification(v.ENABLED,!0)};var lf=function(){lf.__super__.constructor.call(this)};f(lf,puremvc.SimpleCommand);lf.prototype.execute=function(a){this.facade.retrieveProxy(M.NAME).setHidden(!a.getBody())};var Gf={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"},mf=function(){mf.__super__.constructor.call(this)};f(mf,puremvc.SimpleCommand);mf.prototype.execute=function(a){var b,c;this.facade.logger.debug("CaptioningStartedCommand");
a=this.facade.retrieveProxy(M.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(d.TIME_UPDATE),a=this.facade.retrieveProxy(qa.NAME),null==a&&(a=new qa,this.facade.registerProxy(a)),a.setURL(b.src),a.start())};var Ob=function(a){Ob.__super__.constructor.call(this,Ob.NAME,a)};f(Ob,zb);Ob.NAME="CaptioningMediator";Ob.prototype.captionButton=null;Ob.prototype.onRegister=function(){var a=this;this.classList.add("captioning-overlay");
this.captionButton=document.createElement("div");this.classList.add("caption-button",this.captionButton);this.captionButton.textContent=this.localizationManager.getString(w.MSG_CC);k.create(this.captionButton,k.CLICK,function(b){b.stopImmediatePropagation();"embedded"===a.plugin.getTrack().type?a.sendNotification(v.VISIBILITY_CHANGE,a.plugin.getHidden()):a.sendNotification(v.SETTINGS_VISIBILITY_CHANGE,a.plugin.getHidden());return!1});this.sendNotification(d.ADD_CONTROL,this.captionButton);Ob.__super__.onRegister.call(this)};
Ob.prototype.listNotificationInterests=function(){return[v.VISIBILITY_CHANGE,v.ENABLED,v.TRACK_SELECTED]};Ob.prototype.handleNotification=function(a){var b,c,e;c=(b=a.getBody())?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;switch(a.getName()){case v.TRACK_SELECTED:e="cc-embedded";c="embedded"===b.type?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;break;case v.VISIBILITY_CHANGE:e="cc-active";break;case v.ENABLED:e="cc-enabled"}this.sendNotification(c,e)};CaptionParsers={"application/ttml+xml":new Ff,
"application/x-subrip":new Ef};var v={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},Pb=function(a,b){var c,e=this;this.kind=a.kind;this.type=a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||
this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=[];this.isLive=/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=h.get(this.src,{onload:function(){try{CaptionParsers[e.type].parse(e,c.response)}catch(a){T.error("Could not parse caption track: "+e.src);return}"function"===typeof b&&b()},onerror:function(){T.error("Could not load caption track: "+e.src)}})};Pb.prototype.kind=null;Pb.prototype.src=null;Pb.prototype.language=
null;Pb.prototype.cues=null;Pb.prototype.label=null;Pb.prototype.activeCues=null;Pb.prototype.type=null;Pb.prototype.styles=null;Pb.prototype.isLive=!1;var X=function(a){X.__super__.constructor.call(this,a)};f(X,K);X.NAME=y.NAME;X.prototype.defaults={plugin:null,account:null,playerName:null,mediaName:null,main:"s"};X.prototype.media=null;X.prototype.started=!1;X.prototype.video=null;X.prototype.ads=null;X.prototype.getLoaded=function(){return null!=window[this.getConfigurationData().main]};X.prototype.getScript=
function(){return this.getConfigurationData().plugin};X.prototype.getMedia=function(){return this.media};X.prototype.setMedia=function(a){this.started=!1;return this.media=a};X.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||this.media.title};X.prototype.initialize=function(){var a;X.__super__.initialize.call(this);if(null!=this.plugin){try{null==this.plugin.Media&&this.plugin.loadModule("Media")}catch(b){this.error("initialize",b)}null!=(null!=(a=this.plugin.Media)?
a.openAd:void 0)&&(this.ads=new pa(this),this.facade.registerProxy(this.ads),this.facade.registerCommand(q.AD_LOADED,hf),this.facade.registerCommand(q.AD_STARTED,cf),this.facade.registerCommand(q.AD_PLAY,df),this.facade.registerCommand(q.AD_PAUSE,ef),this.facade.registerCommand(q.AD_TIME_REMAINING,gf),this.facade.registerCommand(q.BREAK_END,ff));this.video=this.facade.app.getVideo()}};X.prototype.createPlugin=function(){return window[this.getConfigurationData().main]};X.prototype.start=function(){try{this.plugin.Media.open(this.getMediaName(),
this.video.duration,this.getConfigurationData().playerName),this.started=!0}catch(a){this.error(a)}};X.prototype.play=function(){!0!==this.started&&this.start();try{this.plugin.Media.play(this.getMediaName(),this.video.currentTime||0)}catch(a){this.error(a)}};X.prototype.pause=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime)}catch(a){this.error(a)}};X.prototype.seeking=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime)}catch(a){this.error(a)}};
X.prototype.seeked=function(){try{this.plugin.Media.play(this.getMediaName(),this.video.currentTime)}catch(a){this.error(a)}};X.prototype.ended=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime),this.plugin.Media.close(this.getMediaName()),this.started=!1}catch(a){this.error(a)}};var M=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];M.__super__.constructor.call(this,a)};f(M,K);M.NAME=y.NAME;M.prototype.defaults={};M.prototype.hidden=!0;M.prototype.tracks=
null;M.prototype.track=null;M.prototype.activeCaptions=null;M.prototype.captions=null;M.prototype.loaded=!0;M.prototype.useNative=function(){var a;return null!=this.facade.app.video.textTracks&&3===(null!=(a=window.TextTrackCue)?a.length:void 0)};M.prototype.getTracks=function(){return this.tracks};M.prototype.setTracks=function(a){var b,c,e,d,f,g,h=this;this.tracks=[];this.track=null;b=a.length;e=0;d=function(){e++;e===b&&(h.sendNotification(v.TRACKS_LOADED,h.tracks),h.autoSelectTrack())};f=0;for(g=
a.length;f<g;f++)c=a[f],c=new Pb(c,d),this.tracks.push(c);return a};M.prototype.getTrack=function(){return this.track};M.prototype.setTrack=function(a){this.track=a;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(v.TRACK_SELECTED,this.track);return a};M.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};M.prototype.selectTrackByLanguage=function(a){var b,c,e,d,f;f=this.tracks;e=0;for(d=f.length;e<d;e++)if(b=
f[e],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};M.prototype.getHidden=function(){return this.hidden};M.prototype.setHidden=function(a){return this.hidden=a};M.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.app.retrieveProxy(ca.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var Ac=function(a,b){Ac.__super__.constructor.call(this,a,b)};f(Ac,S);Ac.NAME="ComscorePlugin";
Ac.prototype.moduleName="comscore";Ac.prototype.createController=function(){this.registerCommand(d.STARTED,Ve);this.registerCommand(q.AD_STARTED,Ue)};Ac.prototype.createModel=function(){this.registerProxy(new yb(this.config))};Ac.prototype.listNotificationInterests=function(){return[d.STARTED,q.AD_STARTED]};s.registerPlugin("comscore","html",Ac);s.registerPlugin("comscore","flash",Bd);var Ab=function(a){var b;Ab.__super__.constructor.call(this,a);b=a.retrieveProxy(M.NAME);this.getHidden=b.getHidden.bind(b);
this.setHidden=function(b){a.sendNotification(v.VISIBILITY_CHANGE,b);return b};this.getTracks=b.getTracks.bind(b);this.getTrack=b.getTrack.bind(b);this.setTrack=b.setTrack.bind(b);this.selectTrackByIndex=b.selectTrackByIndex.bind(b);this.selectTrackByLanguage=b.selectTrackByLanguage.bind(b);this.changeSettings=function(b){a.sendNotification(v.SETTINGS_CHANGE,b);return b}};f(Ab,db);Ab.prototype.getHidden=function(){};Ab.prototype.setHidden=function(a){};Ab.prototype.getTracks=function(){};Ab.prototype.getTrack=
function(){};Ab.prototype.setTrack=function(a){};Ab.prototype.selectTrackByIndex=function(a){};Ab.prototype.selectTrackByLanguage=function(a){};Ab.prototype.changeSettings=function(a){};var Bc=function(a,b){Bc.__super__.constructor.call(this,a,b)};f(Bc,S);Bc.NAME="OmniturePlugin";Bc.prototype.moduleName="omniture";Bc.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,Xe);this.registerCommand(d.ENDED,af);this.registerCommand(d.STARTED,bf);this.registerCommand(d.PAUSE,Ye);this.registerCommand(d.SEEKING,
Ze);this.registerCommand(d.SEEKED,$e)};Bc.prototype.createModel=function(){this.registerProxy(new X(this.config))};Bc.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.TIME_UPDATE,d.ENDED,d.STARTED,d.PLAY,d.PAUSE,d.SEEKING,d.SEEKED,q.AD_LOADED,q.AD_STARTED,q.AD_PLAY,q.AD_PAUSE,q.AD_TIME_REMAINING,q.BREAK_END]};s.registerPlugin("omniture","html",Bc);s.registerPlugin("omniture","flash",Cd);var bd=function(a,b){null==b&&(b={});bd.__super__.constructor.call(this,a,b)};f(bd,G);bd.NAME=
"InfoWrapper";bd.prototype.listNotificationInterests=function(){return[n.CREATE_FLASH_VARS,n.CREATE_XML,n.SHARE,n.SHARE_REQUEST]};bd.prototype.handleNotification=function(a){var b,c,e,d,f,g,h,k;d=a.getName();a=a.getBody();switch(d){case n.CREATE_XML:d=a.xml;d.getElementsByTagName("application");f=d.getElementsByTagName("view")[0];c=d.getElementsByTagName("element");h=0;for(k=c.length;h<k;h++)if(b=c[h],"infoOverlayAdvanced"===b.getAttribute("id")){e=b;break}if(null==f)return;null==e&&(e=d.createElement("element"),
e.setAttribute("id","infoOverlayAdvanced"),e.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),f.insertBefore(e,f.childNodes[0]));b=d.createElement("data");e.appendChild(b);null!=this.config.title&&(e=d.createElement("property"),e.setAttribute("key","title"),f=F.createTextContent(d,this.config.title),e.appendChild(f),b.appendChild(e));null!=this.config.description&&(e=d.createElement("property"),e.setAttribute("key","description"),f=F.createTextContent(d,this.config.description),e.appendChild(f),
b.appendChild(e));null!=this.config.more&&(e=d.createElement("property"),e.setAttribute("key","more"),f=F.createTextContent(d,this.config.more),e.appendChild(f),b.appendChild(e));null!=this.config.less&&(e=d.createElement("property"),e.setAttribute("key","less"),f=F.createTextContent(d,this.config.less),e.appendChild(f),b.appendChild(e));null!=this.config.provider&&(c=d.createElement("property"),c.setAttribute("key","provider"),b.appendChild(c),null!=this.config.provider.name&&(e=d.createElement("property"),
e.setAttribute("key","name"),f=F.createTextContent(d,this.config.provider.name),e.appendChild(f),c.appendChild(e)),null!=this.config.provider.image&&(e=d.createElement("property"),e.setAttribute("key","image"),f=F.createTextContent(d,this.config.provider.image),e.appendChild(f),c.appendChild(e)));break;case n.SHARE:case n.SHARE_REQUEST:g="share"}if(null!=g)return this.dispatchEvent(new N(g,a))};s.registerPlugin("info","flash",bd);var fa=function(a){fa.__super__.constructor.call(this,fa.NAME,a)};f(fa,
zb);fa.NAME="InfoMediator";fa.prototype.more=null;fa.prototype.less=null;fa.prototype.close=null;fa.prototype.title=null;fa.prototype.shortDescription=null;fa.prototype.icon=null;fa.prototype.provider=null;fa.prototype.onRegister=function(){this.classList.add("info");this.title=document.createElement("div");this.classList.add("info-title",this.title);this.viewComponent.appendChild(this.title);this.provider=document.createElement("div");this.classList.add("info-provider",this.provider);this.viewComponent.appendChild(this.provider);
this.shortDescription=document.createElement("div");this.classList.add("info-short-description",this.shortDescription);this.viewComponent.appendChild(this.shortDescription);this.icon=document.createElement("img");this.classList.add("info-icon",this.icon);this.viewComponent.appendChild(this.icon);this.dataChangedHandler();fa.__super__.onRegister.call(this)};fa.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};fa.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();
switch(b){case d.MEDIA_CHANGE:this.dataChangedHandler()}};fa.prototype.moreClicked=function(a){return this.classList.add("open")};fa.prototype.closeClicked=function(a){return this.classList.remove("open")};fa.prototype.dataChangedHandler=function(){var a;null!=this.plugin.value.title&&(this.title.textContent=this.plugin.value.title);null!=(null!=(a=this.plugin.value.provider)?a.image:void 0)&&(this.icon.src=this.plugin.value.provider.image);a=getComputedStyle(this.title);this.title.clientHeight>parseInt(a.lineHeight)?
(this.classList.add("info-small"),this.shortDescription.innerHTML=this.provider.innerHTML=""):(this.classList.remove("info-small"),this.truncateDescription(this.plugin.value.description,this.plugin.value.more),this.provider.textContent=null!=this.plugin.value.provider.name?""+this.plugin.value.provider.name:"")};fa.prototype.truncateDescription=function(a){var b,c,e,d,f;c="";e=this.shortDescription;e.textContent="";if(null!=a)for(b=d=0,f=a.length;d<f;b=++d)if(b=a[b],e.textContent=c+b+"...",e.scrollHeight>
e.clientHeight){e.textContent=c+"...";break}else c+=b};var cd=function(a){cd.__super__.constructor.call(this,a)};f(cd,U);cd.prototype.configurationName="info";cd.NAME=y.NAME;cd.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"};var Oa=function(a,b){Oa.__super__.constructor.call(this,a,b)};f(Oa,Fa);Oa.NAME="CaptioningPlugin";Oa.prototype.featureName="captioning";Oa.prototype.moduleName="captioning";Oa.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,
kf);this.registerCommand(d.STARTED,mf);this.registerCommand(d.TIME_UPDATE,jf);this.registerCommand(v.VISIBILITY_CHANGE,lf)};Oa.prototype.createModel=function(){this.registerProxy(new M(this.config))};Oa.prototype.createView=function(){var a;a=new Ob;this.registerMediator(a);this.registerMediator(new P(a.viewComponent))};Oa.prototype.createAPI=function(){return new Ab(this)};Oa.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.STARTED,d.TIME_UPDATE,v.TOGGLE_SETTINGS_VISIBILITY]};
Oa.prototype.listNotificationPublications=function(){var a,b;return Oa.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in v)b=v[a],b!==v.TOGGLE_SETTINGS_VISIBILITY&&c.push(b);return c}()).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,Gf.UPDATE_SETTINGS])};Oa.prototype.listNotificationEvents=function(){return[v.VISIBILITY_CHANGE,v.ENABLED]};s.registerPlugin("captioning","html",Oa);var ra=function(a){ra.__super__.constructor.call(this,a)};f(ra,U);ra.prototype.configurationName=
"imaoverlay";ra.NAME="IMAOveralyProxy";ra.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30};ra.prototype.durationTimer=null;ra.prototype.intervalTimer=null;ra.prototype.delayTimer=null;ra.prototype.stop=function(){clearTimeout(this.durationTimer);clearTimeout(this.delayTimer);clearTimeout(this.intervalTimer)};ra.prototype.play=function(){var a=this;this.stop();this.requestAd();this.delayTimer=setTimeout(function(){a.requestAd();a.intervalTimer=setInterval(function(){a.requestAd()},
1E3*a.value.interval)},1E3*this.value.delay)};ra.prototype.requestAd=function(){h.get(this.getValue("adTagUrl").replace("[timestamp]",(new Date).getTime()),{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)};ra.prototype.vastLoadHandler=function(a){var b,c,e,d,f;a=a.target.responseXML;if(null!=a)try{b=a.querySelector("NonLinear"),null!=b?(f=null!=a.querySelector("Impression")?a.querySelector("Impression").textContent:"",e=null!=a.querySelector("Tracking[event\x3dcreativeView]")?
a.querySelector("Tracking[event\x3dcreativeView]").textContent:"",c=null!=b.querySelector("NonLinearClickThrough")?b.querySelector("NonLinearClickThrough").textContent:"",d={src:b.querySelector("StaticResource").textContent,width:b.getAttribute("width"),height:b.getAttribute("height"),tracking:[f,e],href:c},this.displayAd(d)):this.error("No overlay was returned")}catch(g){this.error(g)}};ra.prototype.error=function(a){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",a);this.stop()};ra.prototype.displayAd=
function(a){var b=this;this.sendNotification("ima/addOverlay",a);this.durationTimer=setTimeout(function(){b.sendNotification("ima/removeOverlay")},1E3*this.value.duration)};var Dd=function(){return Dd.__super__.constructor.apply(this,arguments)};f(Dd,Q);Dd.NAME="IMAWrapper";Dd.prototype.createXML=function(a){var b,c,e,d,f,g,h,k,n;c=a.getElementsByTagName("application")[0];b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id",
"dfp");b.appendChild(c);d=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"}];f=0;for(h=d.length;f<h;f++)e=d[f],null!=e.value&&this.createProperty(a,e.key,e.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(a,"DFP_AD_TAG_PARAMS",this.config.params.adTag,c),null!=this.config.params.manual&&this.createProperty(a,"DFP_MANUAL_PARAMS",this.config.params.manual,
c));if(null!=this.config.companions){d=[];f=[];n=this.config.companions;h=0;for(k=n.length;h<k;h++)e=n[h],d.push(e.width+"x"+e.height),f.push(e.id);this.createProperty(a,"DFP_SIZE",d.join(","),c);this.createProperty(a,"COMPANION_ID",f.join(","),c)}null!=this.config.disableCompanionAds&&this.createProperty(a,"disableCompanionAds",this.config.disableCompanionAds,c);if(null!=this.config.overlay)for(!0===this.config.overlay.enabled&&(g=a.createElement("overlay"),b.appendChild(g)),d=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},
{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],b=0,c=d.length;b<c;b++)e=d[b],null!=e.value&&this.createProperty(a,e.key,e.value,g);return a};var u=function(a){u.__super__.constructor.call(this,a)};f(u,x);u.NAME=
x.NAME;u.prototype.defaults={plugin:null,adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1};u.prototype.key="ima";u.prototype.interval=null;u.prototype.adDisplayContainer=null;u.prototype.adDisplayContainerInitialized=!1;u.prototype.adsLoader=null;u.prototype.adsRenderingSettings=null;u.prototype.adsManagerLoaded=!1;u.prototype.adsManager=null;u.prototype.cuepoints=null;u.prototype.adLoaded=!1;u.prototype.playWhenLoaded=!1;u.prototype.contentHasEnded=!1;u.prototype.getScript=function(){return this.value.plugin};
u.prototype.setLoadedMetadata=function(a){u.__super__.setLoadedMetadata.call(this,a);this.canPlay()&&!0===this.playWhenLoaded&&this.startAd();return a};u.prototype.initialize=function(){};u.prototype.ready=function(){this.adDisplayContainer=this.createPlugin();this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsRenderingSettings=new google.ima.AdsRenderingSettings;this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),
!1);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)};u.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container)};u.prototype.engage=function(){!1!==this.getEnabled()&&(u.__super__.engage.call(this),!0===this.adsManagerLoaded&&!1===this.contentHasEnded&&this.contentEnded(),this.playWhenLoaded=this.adsManagerLoaded=this.contentHasEnded=this.adsManagerLoaded=!1)};u.prototype.requestAd=function(){var a,
b,c;null==(a=this.value).width&&(a.width=this.facade.app.getViewComponent().clientWidth);null==(a=this.value).height&&(a.height=this.facade.app.getViewComponent().clientHeight);b=new google.ima.AdsRequest;a=this.getValue("adTagUrl");c=this.getValue("adsResponse");null!=c&&""!==c?b.adsResponse=h.read(c,null,h.mimeTypes.txt):b.adTagUrl=a;b.linearAdSlotWidth=this.value.width;b.linearAdSlotHeight=this.value.height;b.nonLinearAdSlotWidth=null!=this.value.overlay?this.value.overlay.width:300;b.nonLinearAdSlotHeight=
null!=this.value.overlay?this.value.overlay.height:50;this.adsLoader.requestAds(b)};u.prototype.start=function(){if(!1===u.__super__.start.call(this))return!1;!0!==this.adDisplayContainerInitialized&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0);!0===this.canPlay()?this.startAd():(this.playWhenLoaded=!0,this.requestAd())};u.prototype.canPlay=function(){return!0===this.adsManagerLoaded&&!0===this.loadedMetadata};u.prototype.startAd=function(){this.playWhenLoaded=!1;try{this.adsManager.init(this.value.width,
this.value.height,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(a){this.error(a)}};u.prototype.onAdsManagerLoaded=function(a){this.facade.logger.log("IMA: adsManagerLoaded");this.adsRenderingSettings.bitrate=this.getValue("maxBitrate");this.adsRenderingSettings.autoAlign=!0;this.adsRenderingSettings.useStyledNonLinearAds=!0;this.adsManager=a.getAdsManager(this.facade.app.video,this.adsRenderingSettings);this.adsManagerLoaded=!0;this.cuePoints=this.adsManager.getCuePoints();this.facade.app.sendNotification(d.ADD_CUE_POINTS,
this.cuePoints);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,
this.onAdEvent.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this));this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()};u.prototype.onAdClick=function(a){this.getPaused()||(this.setPaused(!0),this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PAUSED),
this.facade.app.sendNotification(d.CHANGE_ACTIVE_STATE,$a.ACTIVE))};u.prototype.onAdEvent=function(a){var b,c;b=a.getAd();this.facade.logger.log("IMA Ad Event: "+a.type,a,b);switch(a.type){case google.ima.AdEvent.Type.LOADED:b.isLinear()?(a=b.getAdPodInfo().getAdPosition(),c=1===a?"preroll":"midroll",this.adVO=new Wa(b.getAdId(),b.getAdId(),b.getDuration(),a,c,"ima",null,null,b),this.sendNotification(q.AD_LOADED,this.adVO),this.sendNotification(q.AD_DURATION_CHANGE,this.adVO)):(this.facade.app.sendNotification(d.ADD_APPLICATION_STATE,
"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:b.isLinear()&&(this.setInProgress(!0),this.sendNotification(q.AD_STARTED),this.interval=setInterval(this.onAdTimeUpdate.bind(this),300),this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,PlayState.PLAYING),this.sendNotification(q.AD_PLAY));try{c=b.a.companions,null!=c&&0<c.length&&this.setCompanions(c)}catch(e){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",e)}break;case google.ima.AdEvent.Type.COMPLETE:b.isLinear()&&
this.sendNotification(q.AD_ENDED)}};u.prototype.onAdTimeUpdate=function(a){this.sendNotification(q.AD_TIME_REMAINING,this.adsManager.getRemainingTime())};u.prototype.onAdError=function(a){this.error(a.getError());this.contentPlay()};u.prototype.play=function(){u.__super__.play.call(this);try{this.adsManager.resume()}catch(a){this.facade.logger.error("[AMP IMA ERROR]","resume",a)}};u.prototype.pause=function(){u.__super__.pause.call(this);try{this.adsManager.pause()}catch(a){this.facade.logger.error("[AMP IMA ERROR]",
"pause",a)}};u.prototype.breakEnd=function(){var a;clearInterval(this.interval);u.__super__.breakEnd.call(this);(a=this.facade.retrieveProxy(ra.NAME))&&a.play()};u.prototype.setCompanions=function(a){var b,c,d,f;c=[];d=0;for(f=a.length;d<f;d++)b=a[d],c.push({data:b.content,type:b.resourceType,width:b.size.width,height:b.size.height,metadata:b});u.__super__.setCompanions.call(this,c);return a};u.prototype.contentPause=function(){u.__super__.contentPause.call(this);this.sendNotification(q.BREAK_START)};
u.prototype.contentPlay=function(){this.facade.logger.log("IMA: contentPlay");this.sendNotification(q.BREAK_END);u.__super__.contentPlay.call(this)};u.prototype.contentEnded=function(){var a,b;this.facade.logger.log("IMA: contentComplete");this.contentHasEnded=!0;try{null!=(a=this.adsManager)&&"function"===typeof a.destroy&&a.destroy(),null!=(b=this.adsLoader)&&"function"===typeof b.contentComplete&&b.contentComplete()}catch(c){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",c)}};var nf=
function(){nf.__super__.constructor.call(this)};f(nf,puremvc.SimpleCommand);nf.prototype.execute=function(a){this.facade.sendNotification(d.ADD_APPLICATION_STATE,"ad-overlay-mode")};var of=function(){of.__super__.constructor.call(this)};f(of,puremvc.SimpleCommand);of.prototype.execute=function(a){this.facade.retrieveProxy(ra.NAME).stop();this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-overlay-mode")};var Ha=function(a){Ha.__super__.constructor.call(this,Ha.NAME,a)};f(Ha,da);Ha.NAME=
"IMAOverlayMediator";Ha.prototype.anchor=null;Ha.prototype.image=null;Ha.prototype.tracker=null;Ha.prototype.tracker2=null;Ha.prototype.closeButton=null;Ha.prototype.closeText=null;Ha.prototype.onRegister=function(){var a=this;this.classList.add("ad-overlay");this.anchor=document.createElement("a");this.classList.add("ad-overlay-anchor",this.anchor);this.anchor.target="_blank";this.viewComponent.appendChild(this.anchor);this.image=document.createElement("img");this.classList.add("ad-overlay-img",
this.image);this.anchor.appendChild(this.image);this.tracker=document.createElement("img");this.tracker.width=0;this.tracker.height=0;this.viewComponent.appendChild(this.tracker);this.tracker2=document.createElement("img");this.tracker2.width=0;this.tracker2.height=0;this.viewComponent.appendChild(this.tracker2);this.closeButton=document.createElement("div");this.classList.add("ad-close-button",this.closeButton);this.viewComponent.appendChild(this.closeButton);this.closeText=document.createElement("div");
this.classList.add("ad-close-text",this.closeText);this.closeText.textContent="x";this.closeButton.appendChild(this.closeText);k.create(this.closeButton,k.CLICK,function(b){b.stopImmediatePropagation();a.sendNotification("ima/removeOverlay");return!1});Ha.__super__.onRegister.call(this)};Ha.prototype.listNotificationInterests=function(){return["ima/addOverlay","ima/removeOverlay"]};Ha.prototype.handleNotification=function(a){switch(a.getName()){case "ima/addOverlay":a=a.getBody(),this.image.src=a.src,
this.anchor.href=a.href,this.tracker.src=a.tracking[0],this.tracker2.src=a.tracking[1]}};var pf=function(){pf.__super__.constructor.call(this)};f(pf,puremvc.SimpleCommand);pf.prototype.execute=function(a){this.facade.retrieveProxy(u.NAME).ready()};var bc=function(a){bc.__super__.constructor.call(this,a)};f(bc,u);bc.NAME=u.NAME;bc.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.app.video,this.facade.getViewComponent().container)};
bc.prototype.engage=function(a){bc.__super__.engage.call(this,a);this.sendNotification(d.DISABLE_VIDEO_EVENTS,["ended","durationchange"])};bc.prototype.reset=function(a){bc.__super__.reset.call(this,a);this.sendNotification(d.ENABLE_VIDEO_EVENTS,["ended","durationchange"])};var cc=function(a,b){cc.__super__.constructor.call(this,a,b)};f(cc,S);cc.NAME="InfoPlugin";cc.prototype.moduleName="info";cc.prototype.createModel=function(){this.registerProxy(new cd(this.config))};cc.prototype.createView=function(){this.registerMediator(new fa)};
cc.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};s.registerPlugin("info","html",cc);s.registerPlugin("info","external",cc);var jb=function(a,b){null==b&&(b={});jb.__super__.constructor.call(this,a,b)};f(jb,G);jb.NAME="ShareWrapper";jb.prototype.controls=["share","facebook","twitter"];jb.prototype.createFlashVars=function(a){null==a.share_mode&&(a.share_mode=2);return a};jb.prototype.createXML=function(a){this.createControls(a);return a};jb.prototype.createControls=function(a){var b,
c,d,f,h,g,k;f=a.getElementsByTagName("element");c={};g=0;for(k=f.length;g<k;g++)d=f[g],h=d.getAttribute("id"),c[h]=d;d=c.controls;if(null!=d)for(this.config.share=!0,k=this.controls,f=0,g=k.length;f<g;f++)b=k[f],h=""+b+"Btn",null==c[h]&&!0===this.config[b]&&(b=a.createElement("element"),b.setAttribute("id",h),d.appendChild(b))};jb.prototype.listNotificationInterests=function(){return jb.__super__.listNotificationInterests.call(this).concat([n.SHARE,n.SHARE_REQUEST])};jb.prototype.handleNotification=
function(a){var b,c;jb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case n.SHARE:case n.SHARE_REQUEST:c="share"}null!=c&&this.dispatchEvent(new N(c,a))};s.registerPlugin("share","flash",jb);var ya=function(a){ya.__super__.constructor.call(this,ya.NAME,a)};f(ya,zb);ya.NAME="ShareMediator";ya.prototype.shareControl=null;ya.prototype.shareButton=null;ya.prototype.facebook=null;ya.prototype.twitter=null;ya.prototype.shareSeparator=null;ya.prototype.embed=null;ya.prototype.onRegister=
function(){var a=this;this.sendNotification(d.ADD_APPLICATION_STATE,"share-enabled");this.shareControl=document.createElement("div");this.classList.add("share-control",this.shareControl);this.shareSeparator=document.createElement("div");this.classList.add("share-separator",this.shareSeparator);this.shareControl.appendChild(this.shareSeparator);this.shareButton=document.createElement("div");this.classList.add("share-button",this.shareButton);k.create(this.shareButton,k.CLICK,function(b){b.stopImmediatePropagation();
a.clickHandler("share");return!1});this.shareControl.appendChild(this.shareButton);!0===this.plugin.getFacebook()&&(this.facebook=document.createElement("div"),this.classList.add("share-facebook-button",this.facebook),k.create(this.facebook,k.CLICK,function(b){b.stopImmediatePropagation();a.clickHandler("facebook");return!1}),this.shareControl.appendChild(this.facebook));!0===this.plugin.getTwitter()&&(this.twitter=document.createElement("div"),this.classList.add("share-twitter-button",this.twitter),
k.create(this.twitter,k.CLICK,function(b){b.stopImmediatePropagation();a.clickHandler("twitter");return!1}),this.shareControl.appendChild(this.twitter));this.sendNotification(d.ADD_CONTROL,this.shareControl);ya.__super__.onRegister.call(this)};ya.prototype.clickHandler=function(a){this.sendNotification(d.DISPATCH_EVENT,new N("share",{provider:a,link:this.plugin.getLink(),embed:this.plugin.getEmbed()}))};ya.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};ya.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:null!=a.embed?this.sendNotification(d.ADD_APPLICATION_STATE,"share-enabled"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"share-enabled")}};var sa=function(a){sa.__super__.constructor.call(this,a)};f(sa,K);sa.NAME=y.NAME;sa.prototype.defaults={facebook:!1,twitter:!1};sa.prototype.loaded=!0;sa.prototype.link=null;sa.prototype.embed=null;sa.prototype.getEmbed=function(){return this.embed};sa.prototype.setEmbed=function(a){return this.embed=
a};sa.prototype.getLink=function(){return this.link};sa.prototype.setLink=function(a){return this.link=a};sa.prototype.getFacebook=function(){return this.getConfigurationData().facebook};sa.prototype.setFacebook=function(a){return this.data.facebook=a};sa.prototype.getTwitter=function(){return this.getConfigurationData().twitter};sa.prototype.setTwitter=function(a){return this.data.twitter=a};var qf=function(){qf.__super__.constructor.call(this)};f(qf,puremvc.SimpleCommand);qf.prototype.execute=function(a){var b;
this.facade.logger.debug("ShareMediaChangeCommand");a=a.getBody();b=this.facade.retrieveProxy(sa.NAME);b.setEmbed(a.embed);b.setLink(a.link)};var Ia=function(a,b){Ia.__super__.constructor.call(this,a,b)};f(Ia,Z);Ia.NAME="IMAPlugin";Ia.prototype.moduleName="ima";Ia.prototype.featureName="ads";Ia.prototype.createFullscreenProxy=function(){return new bc(this.config)};Ia.prototype.createProxy=function(){return new u(this.config)};Ia.prototype.isFullscreenDevice=function(){return h.isFullscreenDevice()||
/Android 4\.[0-1]/.test(navigator.userAgent)};Ia.prototype.createModel=function(){Ia.__super__.createModel.call(this);null!=this.config.overlay&&this.registerProxy(new ra(this.config.overlay))};Ia.prototype.createController=function(){Ia.__super__.createController.call(this);null!=this.config.overlay&&(this.registerCommand("ima/addOverlay",nf),this.registerCommand("ima/removeOverlay",of));this.registerCommand(d.READY,pf)};Ia.prototype.createView=function(){Ia.__super__.createView.call(this);null!=
this.config.overlay&&this.registerMediator(new Ha)};s.registerPlugin("ima","html",Ia);s.registerPlugin("ima","flash",Dd);var Ed=function(a){Ed.__super__.constructor.call(this,a);a=a.retrieveProxy(x.NAME);this.getHidden=a.getHidden.bind(a);this.setHidden=function(a){this.sendNotification("statsvisibilitychange",a);return a}};f(Ed,db);Ed.prototype.getHidden=function(){};Ed.prototype.setHidden=function(a){};var kb=function(a){kb.__super__.constructor.call(this,a)};f(kb,y);kb.NAME=y.NAME;kb.prototype.defaults=
{url:null};kb.prototype.hidden=!0;kb.prototype.getURL=function(){return this.data.url};kb.prototype.setURL=function(a){return this.data.url=a};kb.prototype.getHidden=function(){return this.hidden};kb.prototype.setHidden=function(a){return this.hidden=a};kb.prototype.invoke=function(){var a,b=this;if(null!=this.data.url)return a=h.get(this.data.url,{onload:function(){null!=a.response&&b.sendNotification("bitratesUpdate",a.response)},onerror:function(a){return b.sendNotification("bitratesUpdate",null)}})};
var rf=function(){rf.__super__.constructor.call(this)};f(rf,puremvc.SimpleCommand);rf.prototype.execute=function(a){var b;this.facade.logger.debug("StatsVisibilityChangeCommand");b=this.facade.retrieveProxy(kb.NAME);b.setHidden(a.getBody());b.setURL(""+this.facade.app.parent.getSrc());!1===a.getBody()&&b.invoke()};var za=function(a){za.__super__.constructor.call(this,za.NAME,a)};f(za,zb);za.NAME="StatsMediator";za.prototype.statsText=null;za.prototype.statsButton=null;za.prototype.bitrateText=null;
za.prototype.bitrateArr=null;za.prototype.onRegister=function(){var a=this;this.sendNotification(d.ADD_APPLICATION_STATE,"stats");this.classList.add("stats-overlay");this.classList.add("hidden");this.statsFormat=document.createElement("div");this.classList.add("stats-text",this.statsFormat);this.viewComponent.appendChild(this.statsFormat);this.statsBitRate=document.createElement("div");this.classList.add("stats-text",this.statsBitRate);this.viewComponent.appendChild(this.statsBitRate);this.statsPlayBack=
document.createElement("div");this.classList.add("stats-text",this.statsPlayBack);this.viewComponent.appendChild(this.statsPlayBack);this.statsAnalytics=document.createElement("div");this.classList.add("stats-text",this.statsAnalytics);this.viewComponent.appendChild(this.statsAnalytics);this.statsButton=document.createElement("div");this.classList.add("stats-button",this.statsButton);k.create(this.statsButton,k.CLICK,function(b){b.stopImmediatePropagation();a.sendNotification("statsvisibilitychange",
!a.plugin.getHidden());return!1});this.sendNotification(d.ADD_CONTROL,this.statsButton);za.__super__.onRegister.call(this)};za.prototype.listNotificationInterests=function(){return["statsvisibilitychange","bitratesUpdate"]};za.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case "statsvisibilitychange":this.plugin.getHidden()?this.classList.add("hidden"):(this.classList.remove("hidden"),this.statsBitRate.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3eLoading...",
this.renderStats());break;case "bitratesUpdate":null!=a?this.constructBitrateText(a):this.statsBitRate.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3eNot Available"}};za.prototype.renderStats=function(){var a,b,c,d;a=this.facade.app.getAPI();b=void 0===a.getMedia()?"Not Available":a.getMedia().type;d=""===a.getSrc()||null===a.getSrc()?"Not Available":a.getSrc();c=""!==h.getPlaybackMode()&&null!==h.getPlaybackMode()&&-1!==h.getPlaybackMode().indexOf("html")?
"HTML5 Video: "+h.getDevice()+", "+this.facade.app.parent.version:"Not Available";a=""===this.facade.app.parent.mediaanalytics.getConfig().config||null===this.facade.app.parent.mediaanalytics.getConfig().config?"Not Available":this.facade.app.parent.mediaanalytics.getConfig().config;this.statsFormat.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eStream\x3c/b\x3eFormat: "+b+"\x3cbr/\x3eURL: "+d;this.statsPlayBack.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3ePlayback\x3c/b\x3e"+
c;this.statsAnalytics.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAnalytics\x3c/b\x3e"+a};za.prototype.constructBitrateText=function(a){var b,c,d,f,h;this.bitrateArr=[];this.bitrateText="";this.bitrateArr=function(){var b,d,e,f;e=a.split("#");f=[];b=0;for(d=e.length;b<d;b++)c=e[b],-1!==c.indexOf("BANDWIDTH")&&-1!==c.indexOf("RESOLUTION")&&f.push(this.parseBitrate(c));return f}.call(this);this.bitrateArr.sort(function(a,b){return a.bitrate<b.bitrate?-1:a.bitrate>b.bitrate?
1:0});h=this.bitrateArr;b=d=0;for(f=h.length;d<f;b=++d)c=h[b],this.bitrateText+=b+1+". "+c.bitrate+" kbps "+c.res+"\x3cbr/\x3e";""===this.bitrateText&&(this.bitrateText="Not Available");this.statsBitRate.innerHTML="\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e"+this.bitrateText};za.prototype.parseBitrate=function(a){var b,c,d;c=a.indexOf("BANDWIDTH");b=a.indexOf(",",c+10);b=a.slice(c+10,b);d=a.indexOf("RESOLUTION");c=a.indexOf(",",d+10);a=a.slice(d+
11,c);return{bitrate:parseInt(b)/1E3,res:a}};var Fd=function(){Fd.__super__.constructor.call(this)};f(Fd,Wb);Fd.prototype.execute=function(a){this.facade.logger.debug("AISLaunchIDPLoginCommand");this.getProxy().launchIDPLogin(a.getBody())};var Ja=function(a){Ja.__super__.constructor.call(this,Ja.NAME,a)};f(Ja,Aa);Ja.NAME="AISChooserMediator";Ja.prototype.menu=null;Ja.prototype.label=null;Ja.prototype.grid=null;Ja.prototype.select=null;Ja.prototype.login=null;Ja.prototype.title=null;Ja.prototype.onRegister=
function(){var a=this;this.classList.add("ais-chooser");this.classList.add("hidden");this.title=document.createElement("div");this.title.innerHTML="Choose your provider";this.classList.add("ais-chooser-title",this.title);this.viewComponent.appendChild(this.title);this.grid=document.createElement("div");this.classList.add("ais-chooser-grid",this.grid);this.viewComponent.appendChild(this.grid);this.menu=document.createElement("div");this.classList.add("ais-chooser-menu",this.menu);this.viewComponent.appendChild(this.menu);
this.label=document.createElement("div");this.label.innerHTML="Providers: ";this.classList.add("ais-chooser-label",this.label);this.menu.appendChild(this.label);this.select=document.createElement("select");this.classList.add("ais-chooser-select",this.select);this.menu.appendChild(this.select);this.login=document.createElement("input");this.login.type="button";this.login.value="Login";this.classList.add("ais-chooser-login",this.login);k.create(this.login,k.CLICK,function(b){"function"===typeof b.stopImmediatePropagation&&
b.stopImmediatePropagation();a.sendNotification("launchIDPLogin",a.select.options[a.select.selectedIndex].value);return!1});this.menu.appendChild(this.login);Ja.__super__.onRegister.call(this)};Ja.prototype.listNotificationInterests=function(){return["chooseAuthProvider","aisathenticating"]};Ja.prototype.handleNotification=function(a){var b,c,d,f,h,g,m,n,p,q,r,s,t,u,v,w,x,z=this;switch(a.getName()){case "chooseAuthProvider":b=a.getBody();a=b.possible_idps;f=b.footprints||[];h=b.grouped_idps||[];b=
this.facade.retrieveProxy(y.NAME);p=b.value.logos;b=null!=p?p.base:void 0;this.grid.innerHTML="";if(null!=h&&null!=(null!=p?p.group:void 0)){g=0;for(m=h.length;g<m;g++)if(c=h[g],c.name===p.group){d=c;break}if(null!=d)for(h=document.createElement("div"),h.className="ais-chooser-grid-menu",this.grid.appendChild(h),x=d.members,d=v=0,w=x.length;v<w;d=++v)q=x[d],g=a[q],c=document.createElement("div"),k.create(c,k.CLICK,function(a){"function"===typeof a.stopImmediatePropagation&&a.stopImmediatePropagation();
z.sendNotification("launchIDPLogin",(null!=a.currentTarget?a.currentTarget:a.srcElement).dataset.key);return!1}),r=document.createElement("div"),this.classList.add("ais-chooser-grid-cell",r),null!=(null!=(s=a[q].logos)?s[p.key]:void 0)?(m=document.createElement("img"),m.alt=g.display_name,u=g.logos[p.key],t=document.createElement("span"),t.innerHTML=g.display_name,this.classList.add("ais-chooser-grid-cell-label",t),-1===u.indexOf("http")&&(u=b+u),m.src=u,null==m.dataset&&(m.dataset={}),m.dataset.key=
q,this.classList.add("ais-chooser-grid-cell-img",m),r.appendChild(t),r.appendChild(m)):r.innerHTML=g.display_name,this.classList.add("ais-chooser-grid-item",c),this.classList.add("ais-chooser-grid-index-"+(d+1),c),null==c.dataset&&(c.dataset={}),c.dataset.key=q,c.appendChild(r),h.appendChild(c)}""!==this.grid.innerHTML&&(this.classList.add("ais-chooser-featured"),this.label.textContent="Other ");s=this.select.options;d=b=0;for(p=s.length;b<p;d=++b)this.select.options.remove(d);if(0<f.length)for(b=
0,p=f.length;b<p;b++)n=f[b],s[s.length]=new Option(""+a[n].display_name,""+n);for(n in a)f=a[n],s[s.length]=new Option(""+f.display_name,""+n);this.classList.remove("hidden");break;case "aisathenticating":this.classList.add("hidden")}};var Pa=function(a){Pa.__super__.constructor.call(this,Pa.NAME,a)};f(Pa,Aa);Pa.NAME="AISPlayMediator";Pa.prototype.menu=null;Pa.prototype.restart=null;Pa.prototype.resume=null;Pa.prototype.resumeTime=null;Pa.prototype.onRegister=function(){var a=this;this.classList.add("ais-play");
this.classList.add("hidden");this.menu=document.createElement("div");this.classList.add("ais-play-menu",this.menu);this.viewComponent.appendChild(this.menu);this.restart=document.createElement("input");this.classList.add("ais-play-restart",this.restart);this.restart.type="button";this.restart.textContent="Restart";k.create(this.restart,k.CLICK,function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.play();return!1});this.menu.appendChild(this.restart);this.resume=
document.createElement("input");this.classList.add("ais-play-resume",this.resume);this.resume.type="button";this.resume.value="Resume";k.create(this.resume,k.CLICK,function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.play(a.resumeTime);return!1});this.menu.appendChild(this.resume);Pa.__super__.onRegister.call(this)};Pa.prototype.play=function(a){this.facade.retrieveProxy(A.NAME).play(a)};Pa.prototype.listNotificationInterests=function(){return["choosePlayOptions"]};
Pa.prototype.handleNotification=function(a){switch(a.getName()){case "choosePlayOptions":this.resumeTime=a.getBody(),this.classList.remove("hidden")}};var sf=function(){sf.__super__.constructor.call(this)};f(sf,Wb);sf.prototype.execute=function(a){this.facade.logger.debug("AISAuthenticateMediaCommand");"ais"===this.facade.app.retrieveProxy(p.NAME).getData().status.reason&&this.getProxy().authorize()};var dd=function(a){var b;dd.__super__.constructor.call(this,a);b=a.retrieveProxy(A.NAME);this.authorize=
b.authorize.bind(b);this.logout=b.logout.bind(b);this.getIdps=function(){return a.idps}};f(dd,db);dd.prototype.authorize=function(a){};dd.prototype.logout=function(){};dd.prototype.getIdps=function(){};var Qb=function(a){Qb.__super__.constructor.call(this,Qb.NAME,a)};f(Qb,Aa);Qb.NAME="AISAuthenticatingMediator";Qb.prototype.retry=null;Qb.prototype.onRegister=function(){var a=this;this.classList.add("ais-authenticating");this.classList.add("hidden");this.retry=document.createElement("input");this.classList.add("ais-authenticating-button",
this.retry);this.retry.type="button";this.retry.value="Back to Providers";k.create(this.retry,k.CLICK,function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.classList.add("hidden");a.sendNotification("startAuthentication");return!1});this.viewComponent.appendChild(this.retry);Qb.__super__.onRegister.call(this)};Qb.prototype.listNotificationInterests=function(){return["aisathenticating"]};Qb.prototype.handleNotification=function(a){switch(a.getName()){case "aisathenticating":!0===
a.getBody()?this.classList.remove("hidden"):this.classList.add("hidden")}};var Gd=function(){Gd.__super__.constructor.call(this)};f(Gd,Wb);Gd.prototype.execute=function(a){this.facade.logger.debug("AISStartAuthenticationCommand");this.getProxy().bounce()};var lb=function(){lb.__super__.constructor.call(this,lb.NAME)};f(lb,da);lb.NAME="AISMediator";lb.prototype.chooser=null;lb.prototype.auth=null;lb.prototype.play=null;lb.prototype.onRegister=function(){var a=this;this.classList.add("ais-overlay");
this.classList.add("hidden");setTimeout(function(){a.chooser=document.createElement("div");a.viewComponent.appendChild(a.chooser);a.facade.registerMediator(new Ja(a.chooser));a.auth=document.createElement("div");a.viewComponent.appendChild(a.auth);a.facade.registerMediator(new Qb(a.auth));a.play=document.createElement("div");a.viewComponent.appendChild(a.play);return a.facade.registerMediator(new Pa(a.play))},20);lb.__super__.onRegister.call(this)};lb.prototype.listNotificationInterests=function(){return["startAuthentication",
"authenticationComplete","choosePlayOptions",d.MEDIA_CHANGE]};lb.prototype.handleNotification=function(a){switch(a.getName()){case "choosePlayOptions":case "startAuthentication":this.classList.remove("hidden");break;case "authenticationComplete":case d.MEDIA_CHANGE:this.classList.add("hidden"),this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating")}};var ma=function(a,b){ma.__super__.constructor.call(this,a,b)};f(ma,Fa);ma.NAME="AISPlugin";ma.prototype.moduleName="ais";ma.prototype.featureName=
"auth";ma.prototype.idps=null;ma.prototype.createController=function(){this.registerCommand(Y.AUTHORIZE,sf);this.registerCommand("launchIDPLogin",Fd);this.registerCommand("startAuthentication",Gd)};ma.prototype.createModel=function(){this.registerProxy(new A(this.config))};ma.prototype.createView=function(){this.registerMediator(new lb)};ma.prototype.createAPI=function(){return new dd(this)};ma.prototype.listNotificationInterests=function(){return ma.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,
Y.AUTHORIZE])};ma.prototype.listNotificationPublications=function(){return ma.__super__.listNotificationPublications.call(this).concat([Y.AUTHORIZATION_FAILED,Y.AUTHORIZED,Y.SET_TOKEN,Y.SET_KEY,d.INITIALIZED,d.PLAY,d.SEEK])};ma.prototype.listNotificationEvents=function(){return ma.__super__.listNotificationEvents.call(this).concat(["aisauthenticated"])};s.registerPlugin("ais","html",ma);var dc=function(a,b){dc.__super__.constructor.call(this,a,b)};f(dc,ma);dc.NAME="AISFlashPlugin";dc.prototype.proxy=
null;dc.prototype.startTime=null;dc.prototype.createController=function(){this.registerCommand("launchIDPLogin",Fd);this.registerCommand("startAuthentication",Gd)};dc.prototype.setData=function(a){var b;b=this.retrieveProxy(A.NAME);b.data.platformID=a.platformID;b.data.resourceID=a.resourceID;b.data.contentID=a.contentID};dc.prototype.authorize=function(a){this.retrieveProxy(A.NAME).authorize(a)};var Xa=function(a,b){Xa.__super__.constructor.call(this,a,b)};f(Xa,Fa);Xa.NAME="SharePlugin";Xa.prototype.moduleName=
"share";Xa.prototype.featureName="share";Xa.prototype.createModel=function(){this.registerProxy(new sa(this.config))};Xa.prototype.createController=function(){this.registerCommand(d.MEDIA_CHANGE,qf)};Xa.prototype.createView=function(){this.registerMediator(new ya)};Xa.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};Xa.prototype.listNotificationPublications=function(){return Xa.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL])};
s.registerPlugin("share","html",Xa);s.registerPlugin("share","external",Xa);var ec=function(a,b){var c=this;ec.__super__.constructor.call(this,a,b);this.plugin=new dc(this.player,b);this.plugin.getAPI().addEventListener("loggedin",function(a){c.facade.dispatcher.dispatchEvent(a)});a.registerModule(this.plugin)};f(ec,G);ec.NAME="AISWrapper";ec.plugin=null;ec.prototype.getAPI=function(){return this.plugin.getAPI()};ec.prototype.getFeatureName=function(){return"auth"};ec.prototype.listNotificationInterests=
function(){return[n.CREATE_XML,n.AUTHORIZE,n.TIME_UPDATE,n.ENDED,n.PAUSED,n.CAPABILITY_CHANGE,n.RESET]};ec.prototype.handleNotification=function(a){var b,c,e,f,h,g;b=a.getName();a=a.getBody();switch(b){case n.CREATE_XML:a=a.xml;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("authentication");null==c||0===c.length?(c=a.createElement("authentication"),b.appendChild(c)):c=c[0];b=a.createElement("vendor");b.setAttribute("id","ais");c.appendChild(b);f=[{value:this.config.platformID,
key:"platformID"},{value:this.config.resourceID,key:"resourceID"},{value:this.config.contentID,key:"contentID"}];h=0;for(g=f.length;h<g;h++)e=f[h],null!=e.value&&(c=a.createElement("property"),c.setAttribute("key",e.key),e=F.createTextContent(a,e.value),c.appendChild(e),b.appendChild(c));break;case n.AUTHORIZE:this.plugin.startTime=null;this.plugin.setData(a);b=this.player.retrieveProxy(qc.NAME);null==b.getSrc()&&b.setSrc(a.media.src);this.plugin.authorize();break;case n.TIME_UPDATE:this.plugin.sendNotification(d.TIME_UPDATE,
a);break;case n.ENDED:this.plugin.sendNotification(d.ENDED,a);break;case n.PAUSED:this.plugin.sendNotification(d.PAUSE,a);break;case n.RESET:this.plugin.sendNotification(d.MEDIA_CHANGE,a);break;case n.CAPABILITY_CHANGE:null!=this.plugin.startTime&&"canSeekChange"===a.type&&a.enabled&&this.player.setCurrentTime(this.plugin.startTime)}};s.registerPlugin("ais","flash",ec);var I=function(a){I.__super__.constructor.call(this,a)};f(I,x);I.NAME=x.NAME;I.prototype.context=null;I.prototype.prerollSlots=null;
I.prototype.midrollSlots=null;I.prototype.postrollSlots=null;I.prototype.initialized=!1;I.prototype.playWhenLoaded=!1;I.prototype.defaults={plugin:{js:"http://adm.fwmrm.net/p/vitest-js/AdManager.js"},networkId:"96749",serverUrl:"http://demo.v.fwmrm.net/ad/g/1",profileId:"global-js",siteSectionId:"DemoSiteGroup.01",videoAssetId:"#{media.guid}",prerollSlotId:"Preroll_1",midrollSlotId:"Midroll_1",postrollSlotId:"Postroll_1",visitorId:null,keyValues:null,keyValuesString:null};I.prototype.getLoaded=function(){var a,
b;return null!=("undefined"!==typeof tv&&null!==tv?null!=(a=tv.freewheel)?null!=(b=a.SDK)?b.AdManager:void 0:void 0:void 0)};I.prototype.initialize=function(){this.plugin=this.createPlugin();this.plugin.setNetwork(this.value.networkId);this.plugin.setServer(this.value.serverUrl)};I.prototype.createPlugin=function(){return new tv.freewheel.SDK.AdManager};I.prototype.engage=function(a){var b,c,e,f,k,g;I.__super__.engage.call(this,a);this.sendNotification(d.DISABLE_VIDEO_EVENTS,["ended","durationchange"]);
this.prerollSlots=[];this.midrollSlots=[];this.postrollSlots=[];this.context=this.plugin.newContext();this.context.registerVideoDisplayBase(this.facade.app.viewComponent.id);this.context.setProfile(this.value.profileId);this.context.setVideoAsset(this.value.videoAssetId,a.duration,this.value.networkId);this.context.setSiteSection(this.value.siteSectionId,this.value.networkId);null!=this.value.visitorId&&this.context.setVisitor(this.value.visitorId);if(null!=this.value.keyValues)for(e in g=this.value.keyValues,
g)k=g[e],null!=k&&this.context.addKeyValue(e,k);if(null!=this.value.keyValuesString)for(e=this.value.keyValuesString.split("\x26"),k=0,g=e.length;k<g;k++)c=e[k],""!==c&&(c=c.split("\x3d"),this.context.addKeyValue(c[0],c[1]));this.context.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.onRequestComplete.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.onSlotEnded.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.onAdImpression.bind(this));
this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.onAdImpression.bind(this));this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT,1E4,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT,1E4,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.addTemporalSlot(this.value.prerollSlotId,tv.freewheel.SDK.ADUNIT_PREROLL,0);if(0<(null!=(b=a.scenes)?b.length:void 0)){b=
[];g=a.scenes;c=e=0;for(k=g.length;e<k;c=++e)f=g[c],0<c&&(c=h.flattenTimecode(f.sceneStartTime),b.push(c),this.context.addTemporalSlot(this.value.midrollSlotId,tv.freewheel.SDK.ADUNIT_MIDROLL,c));this.facade.app.sendNotification(d.ADD_CUE_POINTS,b)}this.context.addTemporalSlot(this.value.postrollSlotId,tv.freewheel.SDK.ADUNIT_POSTROLL,a.duration);this.context.submitRequest()};I.prototype.reset=function(a){I.__super__.reset.call(this,a);this.sendNotification(d.ENABLE_VIDEO_EVENTS,["ended","durationchange"])};
I.prototype.onAdImpression=function(a){this.sendNotification(q.AD_STARTED,this.adVO)};I.prototype.onAdImpressionEnd=function(a){this.sendNotification(q.AD_ENDED,this.adVO)};I.prototype.onRequestComplete=function(a){var b,c,d;this.facade.logger.log("FreeWheelProxy: -\x3e onRequestComplete, ",a);if(a.success)for(b=this.context.getTemporalSlots(),c=0,d=b.length;c<d;c++)switch(a=b[c],a.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:this.prerollSlots.push(a);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.midrollSlots.push(a);
break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.push(a)}this.initialized=!0;!0===this.playWhenLoaded&&this.startAd()};I.prototype.onSlotEnded=function(a){this.facade.logger.log("FreeWheelProxy: -\x3e onSlotEnded slotTimePositionClass: "+a.slot.getTimePositionClass());switch(a.slot.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:this.prerollSlots.length&&(this.prerollSlots.shift(),this.prerollSlots.length?this.playAd(this.prerollSlots[0]):this.sendNotification(q.BREAK_END));
break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.midrollSlots.shift();this.contentPlay();break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.length&&(this.postrollSlots.shift(),this.postrollSlots.length?this.playAd(this.postrollSlots[0]):this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED))}};I.prototype.playAd=function(a){this.adVO=new Wa(a.getCustomId(),a.getCustomId(),a.getTotalDuration(),a.getTimePosition(),a.getTimePositionClass().toLowerCase(),
"freewheel",null,null,a);a.play()};I.prototype.start=function(){if(!1===I.__super__.start.call(this))return!1;!0===this.canPlay()?this.startAd():this.playWhenLoaded=!0;return!0};I.prototype.canPlay=function(){return!0===this.initialized};I.prototype.startAd=function(){this.playWhenLoaded=!1;try{this.sendNotification(q.BREAK_START),this.prerollSlots.length?this.playAd(this.prerollSlots[0]):this.sendNotification(q.BREAK_END)}catch(a){this.error(a)}};I.prototype.breakEnd=function(){I.__super__.breakEnd.call(this);
this.facade.app.sendNotification(d.PLAY,!0);this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING)};I.prototype.contentEnded=function(){var a;this.facade.logger.log("FreeWheelProxy: -\x3e onContentVideoEnded");this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);null!=(a=this.postrollSlots)&&a.length?this.playAd(this.postrollSlots[0]):this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)};var Hd=function(){return Hd.__super__.constructor.apply(this,arguments)};f(Hd,
Q);Hd.NAME="FreeWheelWrapper";Hd.prototype.createXML=function(a){var b,c,d,f,h,g;c=a.getElementsByTagName("application")[0];b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","freewheel");b.appendChild(c);f=[{value:this.config.plugin.swf,key:"FREEWHEEL_AD_MANAGER_URL"},{value:this.config.serverUrl,key:"FREEWHEEL_SERVER_URL"},{value:this.config.networkId,key:"FREEWHEEL_NETWORK_ID"},{value:this.config.profileId,
key:"FREEWHEEL_PROFILE"},{value:this.config.siteSectionId,key:"FREEWHEEL_SITE_SECTION_ID"},{value:this.config.siteSectionFallbackId,key:"FREEWHEEL_SITE_SECTION_FALLBACK_ID"},{value:this.config.prerollSlotId,key:"FREEWHEEL_PREROLL_SLOT_ID"},{value:this.config.midrollSlotId,key:"FREEWHEEL_MIDROLL_SLOT_ID"},{value:this.config.postrollSlotId,key:"FREEWHEEL_POSTROLL_SLOT_ID"},{value:this.config.videoAssetId,key:"FREEWHEEL_VIDEO_ASSET_ID"},{value:this.config.videoAssetFallbackId,key:"FREEWHEEL_VIDEO_ASSET_FALLBACK_ID"},
{value:this.config.videoAssetVideoPlayRandom,key:"FREEWHEEL_VIDEO_ASSET_VIDEO_PLAY_RANDOM"},{value:this.config.visitorId,key:"FREEWHEEL_VISITOR_ID"},{value:this.config.keyValuesString,key:"FREEWHEEL_KEY_VALUES_STRING"},{value:"30898",key:"FREEWHEEL_SITE_SECTION_PAGE_VIEW_RANDOM"},{value:"EXACT",key:"FREEWHEEL_VIDEO_ASSET_DURATION_TYPE"},{value:this.config.visitorHeader,key:"FREEWHEEL_VISITOR_HTTP_HEADER_KEY_VALUE"}];h=0;for(g=f.length;h<g;h++)b=f[h],null!=b.value&&this.createProperty(a,b.key,b.value,
c);null!=this.config.position&&c.setAttribute("position",this.config.position);if(null!=this.config.keyValues){b=a.createElement("property");b.setAttribute("key","FREEWHEEL_KEY_VALUE");h=this.config.keyValues;for(d in h)f=h[d],null!=f&&this.createProperty(a,d,f,b);c.appendChild(b)}};var Qa=function(a){this.supportedTypes=null!=a?a:[];Qa.__super__.constructor.call(this)};f(Qa,r);Qa.prototype.supportedTypes=null;Qa.prototype.src=null;Qa.prototype.playbackCoreName=null;Qa.prototype.getPlaybackCoreName=
function(){return this.playbackCoreName};Qa.prototype.getSupportedTypes=function(){return this.supportedTypes};Qa.prototype.setSupportedTypes=function(a){return this.supportedTypes=a};Qa.prototype.getSrc=function(){return this.src};Qa.prototype.setSrc=function(a){var b;null!=a&&""!==a||this.facade.sendNotification(d.ERROR,"The value of src is not supported: "+a);a!==this.getSrc()&&(this.src=a);b=this.facade.retrieveProxy(p.NAME).getType();this.createPlayer(b);return a};Qa.prototype.createPlayer=function(a){};
Qa.prototype.canPlayType=function(a){return-1!==this.getSupportedTypes().indexOf(a)?"maybe":""};var fc=function(a){fc.__super__.constructor.call(this,a)};f(fc,Qa);fc.prototype.initialized=!0;fc.prototype.playbackCoreName="dash";fc.prototype.context=null;fc.prototype.player=null;fc.prototype.createPlayer=function(a){this.context=new Dash.di.DashContext;this.player=new MediaPlayer(this.context);this.player.startup();this.player.addEventListener("error",this.onError.bind(this));this.player.debug.setLogToBrowserConsole(!1);
this.player.attachView(this.facade.getVideo());this.player.setAutoPlay(!1);this.player.attachSource(this.getSrc())};fc.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",error)};var tf=function(){tf.__super__.constructor.call(this)};f(tf,puremvc.SimpleCommand);tf.prototype.execute=function(a){var b,c,e,f,h=this;e=a.getBody();a=this.facade.retrieveProxy(r.NAME).getCore();null!=a&&a.webkitSupportsFullscreen&&(c=this.facade.retrieveProxy(B.NAME),c.setDisplayState(e),b={},
f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},b.exit=function(){return document.cancelFullscreen()},b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",b.element="webkitFullscreenElement"):null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},
b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),e===ua.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=function(a){if(null==document[b.element])return h.sendNotification(d.CHANGE_DISPLAY_STATE,ua.NORMAL)})):e===ua.NORMAL&&
(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new N("fullscreenchange",e===ua.FULL_SCREEN)))};var Bb=function(a,b){Bb.__super__.constructor.call(this,a,b)};f(Bb,S);Bb.NAME="StatsPlugin";Bb.prototype.moduleName="stats";Bb.prototype.createModel=function(){this.registerProxy(new kb(this.config))};Bb.prototype.createController=function(){this.registerCommand("statsvisibilitychange",rf)};Bb.prototype.createView=function(){this.registerMediator(new za)};Bb.prototype.createAPI=function(){return new Ed(this)};
Bb.prototype.listNotificationPublications=function(){return Bb.__super__.listNotificationPublications.call(this).concat([d.ADD_CONTROL,d.REMOVE_CONTROL])};s.registerPlugin("stats","html",Bb);var ed=function(a){ed.__super__.constructor.call(this,a)};f(ed,K);ed.NAME=y.NAME;ed.prototype.defaults={plugin:null,types:["application/dash+xml"]};ed.prototype.initialize=function(){var a,b;window.MediaSource=window.MediaSource||window.WebKitMediaSource;null!=window.MediaSource&&(this.sendNotification(Notification.INITIALIZED),
a=new fc(this.getConfigurationData().types),b=this.facade.app.retrieveProxy(ba.NAME),b.registerPlaybackCore(a))};var gc=function(a,b){gc.__super__.constructor.call(this,a,b)};f(gc,Z);gc.NAME="FreeWheelPlugin";gc.prototype.moduleName="freewheel";gc.prototype.featureName="ads";gc.prototype.createFullscreenProxy=function(){return this.createProxy()};gc.prototype.createProxy=function(){return new I(this.config)};gc.prototype.isFullscreenDevice=function(){return!0};s.registerPlugin("freewheel","html",
gc);s.registerPlugin("freewheel","flash",Hd);var J=function(a){J.__super__.constructor.call(this,a)};f(J,K);J.NAME=y.NAME;J.prototype.defaults={plugin:null,applicationID:"44B6E47D"};J.prototype.session=null;J.prototype.feed=null;J.prototype.initialize=function(){var a=this;chrome.cast&&chrome.cast.isAvailable?this.initializeCastApi():(window.__onGCastApiAvailable=function(b,c){!0===b?a.initializeCastApi():a.logEvent("cast load error",c)},setTimeout(this.initializeCastApi.bind(this),1E3))};J.prototype.initializeCastApi=
function(){var a;a=this.getConfigurationData().applicationID;a=new chrome.cast.SessionRequest(a);a=new chrome.cast.ApiConfig(a,this.sessionListener.bind(this),this.receiverListener.bind(this));chrome.cast.initialize(a,this.onInitSuccess.bind(this),this.onInitError.bind(this))};J.prototype.onInitSuccess=function(a){this.logEvent("init success",a)};J.prototype.onInitError=function(a){this.logEvent("init error",a)};J.prototype.receiverListener=function(a){"available"===a?(this.logEvent("receiver found"),
this.sendNotification(Id.AVAILABILITY_CHANGE,!0)):this.logEvent("receiver list empty")};J.prototype.sessionListener=function(a){this.logEvent("session listener",a)};J.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))};J.prototype.send=function(a){this.session.sendMessage("urn:x-cast:com.akamai.amp.cast",a,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))};J.prototype.onLaunchError=function(a){this.logEvent("launch error.",
a)};J.prototype.onRequestSessionSuccess=function(a){this.logEvent("request session success.",a);this.session=a;this.session.addMessageListener("urn:x-cast:com.akamai.amp.cast",this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));a=this.facade.app.retrieveProxy(r.NAME);this.send({type:"feed.url",data:this.feed,startTime:a.getCurrentTime()});this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{target:"chromecast"})};J.prototype.onUpdate=function(a){a||this.sendNotification(d.PLAYBACK_TARGET_CHANGE,
{target:"amp"})};J.prototype.onMessageSuccess=function(a){this.logEvent("message success",a)};J.prototype.onMessageError=function(a){this.logEvent("message error",a)};J.prototype.onMessage=function(a,b){b=JSON.parse(b);switch(b.type){case "playstatechange":this.sendNotification(d.CHANGE_PLAY_STATE,b.data.newState);break;case "timeupdate":this.sendNotification(d.TIME_UPDATE,b.currentTime);break;case "durationchange":0===b.duration||isNaN(b.duration)||this.sendNotification(d.DURATION_CHANGE,b.duration)}"timeupdate"!==
b.type&&this.logEvent("receiver sent:",b)};J.prototype.onStop=function(a){this.logEvent("stop");this.session.stop(onStopSuccess,onStopError)};J.prototype.onStopSuccess=function(a){this.logEvent("stop success",a)};J.prototype.onStopError=function(a){this.logEvent("stop error",a)};J.prototype.logEvent=function(a,b){null==a&&(a=b.type||"");this.facade.logger.log("[AMP CHROMECAST] "+a,b)};J.prototype.play=function(){this.send({type:d.PLAY})};J.prototype.pause=function(){this.send({type:d.PAUSE})};J.prototype.setCurrentTime=
function(a){this.send({type:d.SEEK,data:a})};var uf=function(){uf.__super__.constructor.call(this)};f(uf,L);uf.prototype.execute=function(a){this.config.launch()};var vf=function(){vf.__super__.constructor.call(this)};f(vf,L);vf.prototype.execute=function(a){this.facade.logger.debug("ChromeCastTogglePlayPauseCommand");switch(this.facade.app.retrieveProxy(B.NAME).getPlayState()){case PlayState.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case PlayState.PAUSED:case PlayState.READY:this.plugin.play();
break;case PlayState.PLAYING:case PlayState.WAITING:this.plugin.pause()}};var hc=function(a){hc.__super__.constructor.call(this,a)};f(hc,Qa);hc.prototype.initialized=!0;hc.prototype.player=null;hc.prototype.host=null;hc.prototype.protocol=null;hc.prototype.playbackCoreName="chromecast";hc.prototype.createPlayer=function(a){var b,c=this;null!==this.player&&(this.player.unload(),this.player=null);cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG);this.host=new cast.player.api.Host({mediaElement:this.facade.getVideo(),
url:this.getSrc()});this.host.onError=function(a){c.facade.logger.error("Google Media Player Fatal Error - "+a);c.player.unload()};b=h.mimeTypes;switch(a){case b.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case b.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case b.ism:this.protocol=cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,
0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")};var wf=function(){wf.__super__.constructor.call(this)};f(wf,L);wf.prototype.execute=function(a){this.facade.logger.debug("ChromeCastSeekCommand");this.plugin.setCurrentTime(a.getBody())};var Mc=function(a){Mc.__super__.constructor.call(this,Mc.NAME,a)};f(Mc,zb);Mc.NAME="ChromeCastReceiverMediator";Mc.prototype.onRegister=function(){this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-receiver");Mc.__super__.onRegister.call(this)};
var Ya=function(a){Ya.__super__.constructor.call(this,Ya.NAME,a)};f(Ya,zb);Ya.NAME="ChromeCastSenderMediator";Ya.prototype.chromeCastButton=null;Ya.prototype.chromeCastMessage=null;Ya.prototype.chromeCastMessageContainer=null;Ya.prototype.onRegister=function(){this.classList.add("chromecast-overlay");this.chromeCastMessageContainer=document.createElement("div");this.classList.add("chromecast-message-container",this.chromeCastMessageContainer);this.viewComponent.appendChild(this.chromeCastMessageContainer);
this.chromeCastMessage=document.createElement("div");this.classList.add("chromecast-message",this.chromeCastMessage);this.chromeCastMessage.textContent=this.localizationManager.getString("MSG_CHROMECAST_MESSAGE");this.chromeCastMessageContainer.appendChild(this.chromeCastMessage);this.chromeCastButton=document.createElement("div");this.chromeCastButton.addEventListener("click",this.clickHandler.bind(this));this.classList.add("chromecast-button",this.chromeCastButton);Ya.__super__.onRegister.call(this)};
Ya.prototype.clickHandler=function(a){this.sendNotification(Id.LAUNCH)};Ya.prototype.listNotificationInterests=function(){return[Id.AVAILABILITY_CHANGE]};Ya.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case Id.AVAILABILITY_CHANGE:!0===a?(this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-sender"),this.sendNotification(d.ADD_CONTROL,this.chromeCastButton)):(this.sendNotification(d.REMOVE_APPLICATION_STATE,"chromecast-sender"),this.sendNotification(d.REMOVE_CONTROL,
this.chromeCastButton))}};var ic=function(a){ic.__super__.constructor.call(this,a)};f(ic,K);ic.NAME=y.NAME;ic.prototype.defaults={plugin:null,types:["application/x-mpegURL","application/dash+xml","application/vnd.ms-sstr+xml"]};ic.prototype.initialize=function(){var a;this.sendNotification(Notification.INITIALIZED);a=new hc(this.getConfigurationData().types);this.facade.app.retrieveProxy(ba.NAME).registerPlaybackCore(a)};ic.prototype.play=function(){this.facade.app.getAPI().play()};ic.prototype.pause=
function(){this.facade.app.getAPI().pause()};ic.prototype.setCurrentTime=function(a){this.facade.app.getAPI().setCurrentTime(a)};var Jd=function(){Jd.__super__.constructor.call(this)};f(Jd,L);Jd.prototype.execute=function(a){this.facade.logger.debug("ChromeCastSeekedCommand");this.facade.app.retrieveProxy(B.NAME).setSeeking(!1)};var Kd=function(){Kd.__super__.constructor.call(this)};f(Kd,L);Kd.prototype.execute=function(a){this.config.send({type:"captioning.visibilitychange",data:a.getBody()})};var Ld=
function(){Ld.__super__.constructor.call(this)};f(Ld,L);Ld.prototype.execute=function(a){this.config.send({type:"captioning.settingschange",data:a.getBody()})};var xf=function(){xf.__super__.constructor.call(this)};f(xf,L);xf.prototype.execute=function(a){this.config.feed=a.getBody()};var yf=function(){yf.__super__.constructor.call(this)};f(yf,L);yf.prototype.execute=function(a){a=a.getBody().target;"chromecast"===a?(this.sendNotification(d.PAUSE),this.sendNotification(d.ADD_APPLICATION_STATE,"hide-video"),
this.sendNotification(d.DISABLE_FULL_SCREEN),this.sendNotification(d.DISABLE_VIDEO_EVENTS,["seeking","seeked"]),this.facade.app.removeCommand(C.TOGGLE_PLAY_PAUSE),this.facade.app.removeCommand(C.SEEK),this.facade.app.removeCommand(d.SEEKED),this.facade.registerCommand(C.TOGGLE_PLAY_PAUSE,vf),this.facade.registerCommand(C.SEEK,wf),this.facade.registerCommand(d.SEEKED,Jd),this.facade.registerCommand(v.VISIBILITY_CHANGE,Kd),this.facade.registerCommand(v.SETTINGS_CHANGE,Ld)):"amp"===a&&(this.sendNotification(d.REMOVE_APPLICATION_STATE,
"hide-video"),this.sendNotification(d.ENABLE_FULL_SCREEN),this.sendNotification(d.ENABLE_VIDEO_EVENTS,["seeking","seeked"]),this.facade.removeCommand(C.TOGGLE_PLAY_PAUSE),this.facade.removeCommand(C.SEEK),this.facade.removeCommand(d.SEEKED,Jd),this.facade.removeCommand(v.VISIBILITY_CHANGE,Kd),this.facade.removeCommand(v.SETTINGS_CHANGE,Ld),this.facade.app.registerCommand(C.TOGGLE_PLAY_PAUSE,mc),this.facade.app.registerCommand(C.SEEK,Pc),this.facade.app.registerCommand(d.SEEKED,gd))};var Id={LAUNCH:"launch",
AVAILABILITY_CHANGE:"availabilitychange"},fd=function(a){fd.__super__.constructor.call(this,a);a=a.retrieveProxy(J.NAME);this.play=a.play.bind(a);this.pause=a.pause.bind(a);this.setCurrentTime=a.setCurrentTime.bind(a)};f(fd,db);fd.prototype.play=function(){};fd.prototype.pause=function(){};fd.prototype.setCurrentTime=function(a){};var Cc=function(a,b){Cc.__super__.constructor.call(this,a,b)};f(Cc,S);Cc.NAME="DASHPlugin";Cc.prototype.moduleName="dash";Cc.prototype.createModel=function(){this.registerProxy(new ed(this.config))};
Cc.prototype.registered=function(){this.app.registerCommand(d.CHANGE_DISPLAY_STATE,tf);Cc.__super__.registered.call(this)};s.registerPlugin("dash","html",Cc);var Ra=function(a,b){Ra.__super__.constructor.call(this,a,b)};f(Ra,S);Ra.NAME="ChromeCastPlugin";Ra.prototype.moduleName="chromecast";Ra.prototype.createModel=function(){this.isSender()?this.registerProxy(new J(this.config.sender)):this.isReceiver()&&this.registerProxy(new ic(this.config.receiver))};Ra.prototype.createController=function(){this.isSender()&&
(this.registerCommand(Id.LAUNCH,uf),this.registerCommand(Ua.LOAD_FEED,xf),this.registerCommand(d.PLAYBACK_TARGET_CHANGE,yf))};Ra.prototype.createView=function(){this.isSender()?this.registerMediator(new Ya):this.isReceiver()&&this.registerMediator(new Mc)};Ra.prototype.createAPI=function(){return this.api=new fd(this)};Ra.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)};Ra.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};Ra.prototype.listNotificationInterests=
function(){return[Ua.LOAD_FEED,C.TOGGLE_PLAY_PAUSE,C.SEEK,d.SEEKED,v.VISIBILITY_CHANGE,v.SETTINGS_CHANGE]};Ra.prototype.listNotificationPublications=function(){return Ra.__super__.listNotificationPublications.apply(this,arguments).concat([d.INITIALIZED,d.ADD_CONTROL,d.REMOVE_CONTROL,d.PLAYBACK_TARGET_CHANGE,d.REGISTER_PLAYBACK_CORE,d.CHANGE_PLAY_STATE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PAUSE])};s.registerPlugin("chromecast","html",Ra);zf.akamai={amp:{AMP:s,utils:{Utils:h,QueryString:Hc,Clock:sb,Alarm:Gc}}};
window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP Premier v2.0.0052",zf)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP Premier v2.0.0052")})();